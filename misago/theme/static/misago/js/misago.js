!function o(l,i,s){function u(t,e){if(!i[t]){if(!l[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var a=i[t]={exports:{}};l[t][0].call(a.exports,function(e){return u(l[t][1][e]||e)},a,a.exports,o,l,i,s)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}({1:[function(e,t,n){!function(){"use strict";var l={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"==r||"number"==r)e.push(n);else if(Array.isArray(n)&&n.length){var a=i.apply(null,n);a&&e.push(a)}else if("object"==r)for(var o in n)l.call(n,o)&&n[o]&&e.push(o)}}return e.join(" ")}void 0!==t&&t.exports?(i.default=i,t.exports=i):"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("classnames",[],function(){return i}):window.classNames=i}()},{}],2:[function(e,t,n){var r,a;r=this,a=function(){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=0;if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator])return(t=e[Symbol.iterator]()).next.bind(t);if(Array.isArray(e)||(e=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)))return function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(e){return u[e]}var e,t=(function(t){function e(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}t.exports={defaults:e(),getDefaults:e,changeDefaults:function(e){t.exports.defaults=e}}}(e={exports:{}}),e.exports),a=(t.defaults,t.getDefaults,t.changeDefaults,/[&<>"']/),l=/[&<>"']/g,i=/[<>"']|&(?!#?\w+;)/,s=/[<>"']|&(?!#?\w+;)/g,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var c=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function f(e){return e.replace(c,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}var d=/(^|[^\[])\^/g;var m=/[^\w:]/g,h=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;var y={},b=/^[^:]+:\/*[^/]*$/,v=/^([^:]+:)[\s\S]*$/,g=/^([^:]+:\/*[^/]*)[\s\S]*$/;function _(e,t){y[" "+e]||(b.test(e)?y[" "+e]=e+"/":y[" "+e]=E(e,"/",!0));var n=-1===(e=y[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(v,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(g,"$1")+t:e+t}function E(e,t,n){var r=e.length;if(0===r)return"";for(var a=0;a<r;){var o=e.charAt(r-a-1);if(o!==t||n){if(o===t||!n)break;a++}else a++}return e.substr(0,r-a)}var w=function(e,t){if(t){if(a.test(e))return e.replace(l,n)}else if(i.test(e))return e.replace(s,n);return e},O=f,k=function(n,e){n=n.source||n,e=e||"";var r={replace:function(e,t){return t=(t=t.source||t).replace(d,"$1"),n=n.replace(e,t),r},getRegex:function(){return new RegExp(n,e)}};return r},x=function(e,t,n){if(e){var r;try{r=decodeURIComponent(f(n)).replace(m,"").toLowerCase()}catch(e){return null}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:")||0===r.indexOf("data:"))return null}t&&!h.test(n)&&(n=_(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(e){return null}return n},P={exec:function(){}},j=function(e){for(var t,n,r=1;r<arguments.length;r++)for(n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},S=function(e,t){var n=e.replace(/\|/g,function(e,t,n){for(var r=!1,a=t;0<=--a&&"\\"===n[a];)r=!r;return r?"|":" |"}).split(/ \|/),r=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n},N=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,r=0,a=0;a<n;a++)if("\\"===e[a])a++;else if(e[a]===t[0])r++;else if(e[a]===t[1]&&--r<0)return a;return-1},C=function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},R=t.defaults,M=E,T=S,D=w,L=N;function A(e,t,n){var r=t.href,a=t.title?D(t.title):null;return"!"!==e[0].charAt(0)?{type:"link",raw:n,href:r,title:a,text:e[1]}:{type:"image",raw:n,text:D(e[1]),href:r,title:a}}var I=function(){function e(e){this.options=e||R}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return 1<t[0].length?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e,t){var n=this.rules.block.code.exec(e);if(n){var r=t[t.length-1];if(r&&"paragraph"===r.type)return{raw:n[0],text:n[0].trimRight()};var a=n[0].replace(/^ {4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?a:M(a,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],r=function(e,t){var n=e.match(/^(\s+)(?:```)/);if(null===n)return t;var r=n[1];return t.split("\n").map(function(e){var t=e.match(/^\s+/);return null!==t&&t[0].length>=r.length?e.slice(r.length):e}).join("\n")}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:r}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[1].length,text:t[2]}},t.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var n={type:"table",header:T(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(n.header.length===n.align.length){for(var r=n.align.length,a=0;a<r;a++)/^ *-+: *$/.test(n.align[a])?n.align[a]="right":/^ *:-+: *$/.test(n.align[a])?n.align[a]="center":/^ *:-+ *$/.test(n.align[a])?n.align[a]="left":n.align[a]=null;for(r=n.cells.length,a=0;a<r;a++)n.cells[a]=T(n.cells[a],n.header.length);return n}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:n}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){for(var n,r,a,o,l,i,s,u=t[0],c=t[2],f=1<c.length,d={type:"list",raw:u,ordered:f,start:f?+c:"",loose:!1,items:[]},p=t[0].match(this.rules.block.item),m=!1,h=p.length,y=0;y<h;y++)r=(u=n=p[y]).length,~(n=n.replace(/^ *([*+-]|\d+\.) */,"")).indexOf("\n ")&&(r-=n.length,n=this.options.pedantic?n.replace(/^ {1,4}/gm,""):n.replace(new RegExp("^ {1,"+r+"}","gm"),"")),y!==h-1&&(a=this.rules.block.bullet.exec(p[y+1])[0],(1<c.length?1===a.length:1<a.length||this.options.smartLists&&a!==c)&&(o=p.slice(y+1).join("\n"),d.raw=d.raw.substring(0,d.raw.length-o.length),y=h-1)),l=m||/\n\n(?!\s*$)/.test(n),y!==h-1&&(m="\n"===n.charAt(n.length-1),l=l||m),l&&(d.loose=!0),s=void 0,(i=/^\[[ xX]\] /.test(n))&&(s=" "!==n[1],n=n.replace(/^\[[ xX]\] +/,"")),d.items.push({type:"list_item",raw:u,task:i,checked:s,loose:l,text:n});return d}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):D(t[0]):t[0]}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:T(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];for(var r=n.align.length,a=0;a<r;a++)/^ *-+: *$/.test(n.align[a])?n.align[a]="right":/^ *:-+: *$/.test(n.align[a])?n.align[a]="center":/^ *:-+ *$/.test(n.align[a])?n.align[a]="left":n.align[a]=null;for(r=n.cells.length,a=0;a<r;a++)n.cells[a]=T(n.cells[a].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},t.text=function(e,t){var n=this.rules.block.text.exec(e);if(n){var r=t[t.length-1];return r&&"text"===r.type?{raw:n[0],text:n[0]}:{type:"text",raw:n[0],text:n[0]}}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:D(t[1])}},t.tag=function(e,t,n){var r=this.rules.inline.tag.exec(e);if(r)return!t&&/^<a /i.test(r[0])?t=!0:t&&/^<\/a>/i.test(r[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):D(r[0]):r[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n,r=L(t[2],"()");-1<r&&(n=(0===t[0].indexOf("!")?5:4)+t[1].length+r,t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,n).trim(),t[3]="");var a,o=t[2],l="";return l=this.options.pedantic?(a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o),a?(o=a[1],a[3]):""):t[3]?t[3].slice(1,-1):"",A(t,{href:(o=o.trim().replace(/^<([\s\S]*)>$/,"$1"))?o.replace(this.rules.inline._escapes,"$1"):o,title:l?l.replace(this.rules.inline._escapes,"$1"):l},t[0])}},t.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var r=(n[2]||n[1]).replace(/\s+/g," ");if((r=t[r.toLowerCase()])&&r.href)return A(n,r,n[0]);var a=n[0].charAt(0);return{type:"text",raw:a,text:a}}},t.strong=function(e){var t=this.rules.inline.strong.exec(e);if(t)return{type:"strong",raw:t[0],text:t[4]||t[3]||t[2]||t[1]}},t.em=function(e){var t=this.rules.inline.em.exec(e);if(t)return{type:"em",raw:t[0],text:t[6]||t[5]||t[4]||t[3]||t[2]||t[1]}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\n/g," "),r=/[^ ]/.test(n),a=n.startsWith(" ")&&n.endsWith(" ");return r&&a&&(n=n.substring(1,n.length-1)),n=D(n,!0),{type:"codespan",raw:t[0],text:n}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[1]}},t.autolink=function(e,t){var n=this.rules.inline.autolink.exec(e);if(n){var r,a="@"===n[2]?"mailto:"+(r=D(this.options.mangle?t(n[1]):n[1])):r=D(n[1]);return{type:"link",raw:n[0],text:r,href:a,tokens:[{type:"text",raw:r,text:r}]}}},t.url=function(e,t){var n,r,a,o;if(n=this.rules.inline.url.exec(e)){if("@"===n[2])a="mailto:"+(r=D(this.options.mangle?t(n[0]):n[0]));else{for(;o=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0],o!==n[0];);r=D(n[0]),a="www."===n[1]?"http://"+r:r}return{type:"link",raw:n[0],text:r,href:a,tokens:[{type:"text",raw:r,text:r}]}}},t.inlineText=function(e,t,n){var r=this.rules.inline.text.exec(e);if(r){var a=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):D(r[0]):r[0]:D(this.options.smartypants?n(r[0]):r[0]);return{type:"text",raw:r[0],text:a}}},e}(),U=P,z=k,H=j,B={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:U,table:U,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};B.def=z(B.def).replace("label",B._label).replace("title",B._title).getRegex(),B.bullet=/(?:[*+-]|\d{1,9}\.)/,B.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,B.item=z(B.item,"gm").replace(/bull/g,B.bullet).getRegex(),B.list=z(B.list).replace(/bull/g,B.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+B.def.source+")").getRegex(),B._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",B._comment=/<!--(?!-?>)[\s\S]*?-->/,B.html=z(B.html,"i").replace("comment",B._comment).replace("tag",B._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),B.paragraph=z(B._paragraph).replace("hr",B.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",B._tag).getRegex(),B.blockquote=z(B.blockquote).replace("paragraph",B.paragraph).getRegex(),B.normal=H({},B),B.gfm=H({},B.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),B.gfm.nptable=z(B.gfm.nptable).replace("hr",B.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",B._tag).getRegex(),B.gfm.table=z(B.gfm.table).replace("hr",B.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",B._tag).getRegex(),B.pedantic=H({},B.normal,{html:z("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",B._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:U,paragraph:z(B.normal._paragraph).replace("hr",B.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",B.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var W={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:U,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^_([^\s_<][\s\S]*?[^\s_])_(?!_|[^\s,punctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\s,punctuation])|^\*([^\s*<\[])\*(?!\*)|^\*([^\s<"][\s\S]*?[^\s\[\*])\*(?![\]`punctuation])|^\*([^\s*"<\[][\s\S]*[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:U,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/,_punctuation:"!\"#$%&'()*+\\-./:;<=>?@\\[^_{|}~"};W.em=z(W.em).replace(/punctuation/g,W._punctuation).getRegex(),W._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,W._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,W._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,W.autolink=z(W.autolink).replace("scheme",W._scheme).replace("email",W._email).getRegex(),W._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,W.tag=z(W.tag).replace("comment",B._comment).replace("attribute",W._attribute).getRegex(),W._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,W._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,W._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,W.link=z(W.link).replace("label",W._label).replace("href",W._href).replace("title",W._title).getRegex(),W.reflink=z(W.reflink).replace("label",W._label).getRegex(),W.normal=H({},W),W.pedantic=H({},W.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:z(/^!?\[(label)\]\((.*?)\)/).replace("label",W._label).getRegex(),reflink:z(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",W._label).getRegex()}),W.gfm=H({},W.normal,{escape:z(W.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),W.gfm.url=z(W.gfm.url,"i").replace("email",W.gfm._extended_email).getRegex(),W.breaks=H({},W.gfm,{br:z(W.br).replace("{2,}","*").getRegex(),text:z(W.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var F={block:B,inline:W},q=t.defaults,Y=F.block,G=F.inline;function V(e){return e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function $(e){for(var t,n="",r=e.length,a=0;a<r;a++)t=e.charCodeAt(a),.5<Math.random()&&(t="x"+t.toString(16)),n+="&#"+t+";";return n}var K=function(){function n(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||q,this.options.tokenizer=this.options.tokenizer||new I,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:Y.normal,inline:G.normal};this.options.pedantic?(t.block=Y.pedantic,t.inline=G.pedantic):this.options.gfm&&(t.block=Y.gfm,this.options.breaks?t.inline=G.breaks:t.inline=G.gfm),this.tokenizer.rules=t}n.lex=function(e,t){return new n(t).lex(e)};var e,t,r,a=n.prototype;return a.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},a.blockTokens=function(e,t,n){var r,a,o,l;for(void 0===t&&(t=[]),void 0===n&&(n=!0),e=e.replace(/^ +$/gm,"");e;)if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),r.type&&t.push(r);else if(r=this.tokenizer.code(e,t))e=e.substring(r.raw.length),r.type?t.push(r):((l=t[t.length-1]).raw+="\n"+r.raw,l.text+="\n"+r.text);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.nptable(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),t.push(r);else if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),o=r.items.length,a=0;a<o;a++)r.items[a].tokens=this.blockTokens(r.items[a].text,[],!1);t.push(r)}else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.def(e)))e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else if(n&&(r=this.tokenizer.paragraph(e)))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.text(e,t))e=e.substring(r.raw.length),r.type?t.push(r):((l=t[t.length-1]).raw+="\n"+r.raw,l.text+="\n"+r.text);else if(e){var i="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(i);break}throw new Error(i)}return t},a.inline=function(e){for(var t,n,r,a,o,l=e.length,i=0;i<l;i++)switch((o=e[i]).type){case"paragraph":case"text":case"heading":o.tokens=[],this.inlineTokens(o.text,o.tokens);break;case"table":for(o.tokens={header:[],cells:[]},r=o.header.length,t=0;t<r;t++)o.tokens.header[t]=[],this.inlineTokens(o.header[t],o.tokens.header[t]);for(r=o.cells.length,t=0;t<r;t++)for(a=o.cells[t],o.tokens.cells[t]=[],n=0;n<a.length;n++)o.tokens.cells[t][n]=[],this.inlineTokens(a[n],o.tokens.cells[t][n]);break;case"blockquote":this.inline(o.tokens);break;case"list":for(r=o.items.length,t=0;t<r;t++)this.inline(o.items[t].tokens)}return e},a.inlineTokens=function(e,t,n,r){var a;for(void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===r&&(r=!1);e;)if(a=this.tokenizer.escape(e))e=e.substring(a.raw.length),t.push(a);else if(a=this.tokenizer.tag(e,n,r))e=e.substring(a.raw.length),n=a.inLink,r=a.inRawBlock,t.push(a);else if(a=this.tokenizer.link(e))e=e.substring(a.raw.length),"link"===a.type&&(a.tokens=this.inlineTokens(a.text,[],!0,r)),t.push(a);else if(a=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(a.raw.length),"link"===a.type&&(a.tokens=this.inlineTokens(a.text,[],!0,r)),t.push(a);else if(a=this.tokenizer.strong(e))e=e.substring(a.raw.length),a.tokens=this.inlineTokens(a.text,[],n,r),t.push(a);else if(a=this.tokenizer.em(e))e=e.substring(a.raw.length),a.tokens=this.inlineTokens(a.text,[],n,r),t.push(a);else if(a=this.tokenizer.codespan(e))e=e.substring(a.raw.length),t.push(a);else if(a=this.tokenizer.br(e))e=e.substring(a.raw.length),t.push(a);else if(a=this.tokenizer.del(e))e=e.substring(a.raw.length),a.tokens=this.inlineTokens(a.text,[],n,r),t.push(a);else if(a=this.tokenizer.autolink(e,$))e=e.substring(a.raw.length),t.push(a);else if(n||!(a=this.tokenizer.url(e,$))){if(a=this.tokenizer.inlineText(e,r,V))e=e.substring(a.raw.length),t.push(a);else if(e){var o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}throw new Error(o)}}else e=e.substring(a.raw.length),t.push(a);return t},e=n,r=[{key:"rules",get:function(){return{block:Y,inline:G}}}],(t=null)&&o(e.prototype,t),r&&o(e,r),n}(),Z=t.defaults,J=x,X=w,Q=function(){function e(e){this.options=e||Z}var t=e.prototype;return t.code=function(e,t,n){var r,a=(t||"").match(/\S*/)[0];return!this.options.highlight||null!=(r=this.options.highlight(e,a))&&r!==e&&(n=!0,e=r),a?'<pre><code class="'+this.options.langPrefix+X(a,!0)+'">'+(n?e:X(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:X(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,n){var r=t?"ol":"ul";return"<"+r+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+r+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n"+(t=t&&"<tbody>"+t+"</tbody>")+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,n){if(null===(e=J(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<a href="'+X(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>"},t.image=function(e,t,n){if(null===(e=J(this.options.sanitize,this.options.baseUrl,e)))return n;var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},t.text=function(e){return e},e}(),ee=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return""+n},t.image=function(e,t,n){return""+n},t.br=function(){return""},e}(),te=function(){function e(){this.seen={}}return e.prototype.slug=function(e){var t=e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(t))for(var n=t;this.seen[n]++,t=n+"-"+this.seen[n],this.seen.hasOwnProperty(t););return this.seen[t]=0,t},e}(),ne=t.defaults,re=O,ae=function(){function n(e){this.options=e||ne,this.options.renderer=this.options.renderer||new Q,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ee,this.slugger=new te}n.parse=function(e,t){return new n(t).parse(e)};var e=n.prototype;return e.parse=function(e,t){void 0===t&&(t=!0);for(var n,r,a,o,l,i,s,u,c,f,d,p,m,h,y,b,v,g="",_=e.length,E=0;E<_;E++)switch((c=e[E]).type){case"space":continue;case"hr":g+=this.renderer.hr();continue;case"heading":g+=this.renderer.heading(this.parseInline(c.tokens),c.depth,re(this.parseInline(c.tokens,this.textRenderer)),this.slugger);continue;case"code":g+=this.renderer.code(c.text,c.lang,c.escaped);continue;case"table":for(i=s="",a=c.header.length,n=0;n<a;n++)i+=this.renderer.tablecell(this.parseInline(c.tokens.header[n]),{header:!0,align:c.align[n]});for(s+=this.renderer.tablerow(i),u="",a=c.cells.length,n=0;n<a;n++){for(i="",o=(l=c.tokens.cells[n]).length,r=0;r<o;r++)i+=this.renderer.tablecell(this.parseInline(l[r]),{header:!1,align:c.align[r]});u+=this.renderer.tablerow(i)}g+=this.renderer.table(s,u);continue;case"blockquote":u=this.parse(c.tokens),g+=this.renderer.blockquote(u);continue;case"list":for(f=c.ordered,d=c.start,p=c.loose,a=c.items.length,u="",n=0;n<a;n++)y=(h=c.items[n]).checked,b=h.task,m="",h.task&&(v=this.renderer.checkbox(y),p?0<h.tokens.length&&"text"===h.tokens[0].type?(h.tokens[0].text=v+" "+h.tokens[0].text,h.tokens[0].tokens&&0<h.tokens[0].tokens.length&&"text"===h.tokens[0].tokens[0].type&&(h.tokens[0].tokens[0].text=v+" "+h.tokens[0].tokens[0].text)):h.tokens.unshift({type:"text",text:v}):m+=v),m+=this.parse(h.tokens,p),u+=this.renderer.listitem(m,b,y);g+=this.renderer.list(u,f,d);continue;case"html":g+=this.renderer.html(c.text);continue;case"paragraph":g+=this.renderer.paragraph(this.parseInline(c.tokens));continue;case"text":for(u=c.tokens?this.parseInline(c.tokens):c.text;E+1<_&&"text"===e[E+1].type;)u+="\n"+((c=e[++E]).tokens?this.parseInline(c.tokens):c.text);g+=t?this.renderer.paragraph(u):u;continue;default:var w='Token with "'+c.type+'" type was not found.';if(this.options.silent)return void console.error(w);throw new Error(w)}return g},e.parseInline=function(e,t){t=t||this.renderer;for(var n,r="",a=e.length,o=0;o<a;o++)switch((n=e[o]).type){case"escape":r+=t.text(n.text);break;case"html":r+=t.html(n.text);break;case"link":r+=t.link(n.href,n.title,this.parseInline(n.tokens,t));break;case"image":r+=t.image(n.href,n.title,n.text);break;case"strong":r+=t.strong(this.parseInline(n.tokens,t));break;case"em":r+=t.em(this.parseInline(n.tokens,t));break;case"codespan":r+=t.codespan(n.text);break;case"br":r+=t.br();break;case"del":r+=t.del(this.parseInline(n.tokens,t));break;case"text":r+=t.text(n.text);break;default:var l='Token with "'+n.type+'" type was not found.';if(this.options.silent)return void console.error(l);throw new Error(l)}return r},n}(),oe=j,le=C,ie=w,se=t.getDefaults,ue=t.changeDefaults,ce=t.defaults;function fe(e,n,r){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof n&&(r=n,n=null),n=oe({},fe.defaults,n||{}),le(n),r){var a,o=n.highlight;try{a=K.lex(e,n)}catch(e){return r(e)}var l=function(t){var e;if(!t)try{e=ae.parse(a,n)}catch(e){t=e}return n.highlight=o,t?r(t):r(null,e)};if(!o||o.length<3)return l();if(delete n.highlight,!a.length)return l();var i=0;return fe.walkTokens(a,function(n){"code"===n.type&&(i++,o(n.text,n.lang,function(e,t){return e?l(e):(null!=t&&t!==n.text&&(n.text=t,n.escaped=!0),void(0===--i&&l()))}))}),void(0===i&&l())}try{var t=K.lex(e,n);return n.walkTokens&&fe.walkTokens(t,n.walkTokens),ae.parse(t,n)}catch(e){if(e.message+="\nPlease report this to https://github.com/markedjs/marked.",n.silent)return"<p>An error occurred:</p><pre>"+ie(e.message+"",!0)+"</pre>";throw e}}return fe.options=fe.setOptions=function(e){return oe(fe.defaults,e),ue(fe.defaults),fe},fe.getDefaults=se,fe.defaults=ce,fe.use=function(i){var t,n=oe({},i);i.renderer&&function(){var l=fe.defaults.renderer||new Q;for(var e in i.renderer)!function(a){var o=l[a];l[a]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=i.renderer[a].apply(l,t);return!1===r&&(r=o.apply(l,t)),r}}(e);n.renderer=l}(),i.tokenizer&&function(){var l=fe.defaults.tokenizer||new I;for(var e in i.tokenizer)!function(a){var o=l[a];l[a]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=i.tokenizer[a].apply(l,t);return!1===r&&(r=o.apply(l,t)),r}}(e);n.tokenizer=l}(),i.walkTokens&&(t=fe.defaults.walkTokens,n.walkTokens=function(e){i.walkTokens(e),t&&t(e)}),fe.setOptions(n)},fe.walkTokens=function(e,t){for(var n,r=p(e);!(n=r()).done;){var a=n.value;switch(t(a),a.type){case"table":for(var o,l=p(a.tokens.header);!(o=l()).done;){var i=o.value;fe.walkTokens(i,t)}for(var s,u=p(a.tokens.cells);!(s=u()).done;)for(var c,f=p(s.value);!(c=f()).done;){var d=c.value;fe.walkTokens(d,t)}break;case"list":fe.walkTokens(a.items,t);break;default:a.tokens&&fe.walkTokens(a.tokens,t)}}},fe.Parser=ae,fe.parser=ae.parse,fe.Renderer=Q,fe.TextRenderer=ee,fe.Lexer=K,fe.lexer=K.lex,fe.Tokenizer=I,fe.Slugger=te,fe.parse=fe},"object"==typeof n&&void 0!==t?t.exports=a():"function"==typeof define&&define.amd?define(a):(r=r||self).marked=a()},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=r(e("react")),f=r(e("./..")),u=r(e("../utils/escape-html"));function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.errors,n=e.privacyPolicy,r=e.termsOfService,a=e.onPrivacyPolicyChange,o=e.onTermsOfServiceChange,l=f.default.get("TERMS_OF_SERVICE_ID"),i=f.default.get("TERMS_OF_SERVICE_URL"),s=f.default.get("PRIVACY_POLICY_ID"),u=f.default.get("PRIVACY_POLICY_URL");return l||s?c.default.createElement("div",null,c.default.createElement(d,{agreement:gettext("the terms of service"),checked:null!==r,errors:t.termsOfService,url:i,value:l,onChange:o}),c.default.createElement(d,{agreement:gettext("the privacy policy"),checked:null!==n,errors:t.privacyPolicy,url:u,value:s,onChange:a})):null}var d=function(e){var t=e.agreement,n=e.checked,r=e.errors,a=e.url,o=e.value,l=e.onChange;if(!a)return null;var i=interpolate('<a href="%(url)s" target="_blank">%(agreement)s</a>',{agreement:(0,u.default)(t),url:(0,u.default)(a)},!0),s=interpolate(gettext("I have read and accept %(agreement)s."),{agreement:i},!0);return c.default.createElement("div",{className:"checkbox legal-footnote"},c.default.createElement("label",null,c.default.createElement("input",{checked:n,type:"checkbox",value:o,onChange:l}),c.default.createElement("span",{dangerouslySetInnerHTML:{__html:s}})),r&&r.map(function(e,t){return c.default.createElement("div",{className:"help-block errors",key:t},e)}))};n.default=a},{"../utils/escape-html":378,"./..":296,react:"react"}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var f=r(e("react")),o=r(e("./.."));function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var u=e.buttonClassName,c=e.buttonLabel,t=e.formLabel,n=e.header,r=e.labelClassName,a=o.default.get("SOCIAL_AUTH");return 0===a.length?null:f.default.createElement("div",{className:"form-group form-social-auth"},f.default.createElement(l,{className:r,text:n}),f.default.createElement("div",{className:"row"},a.map(function(e){var t=e.id,n=e.name,r=e.button_text,a=e.button_color,o=e.url,l="btn btn-block btn-default btn-social-"+t,i=a?{color:a}:null,s=r||interpolate(c,{site:n},!0);return f.default.createElement("div",{className:u||"col-xs-12",key:t},f.default.createElement("a",{className:l,style:i,href:o},s))})),f.default.createElement("hr",null),f.default.createElement(l,{className:r,text:t}))}var l=function(e){var t=e.className,n=e.text;return n?f.default.createElement("h5",{className:t||""},n):null};n.default=a},{"./..":296,react:"react"}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../services/ajax"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=d(o);return t=l?(e=d(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?f(n):r}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),p(f(t=r.call(this,e)),"handleDecline",function(){t.state.submiting||confirm(gettext("Declining will result in immediate deactivation and deletion of your account. This action is not reversible."))&&(t.setState({submiting:!0}),l.default.post(t.props.api,{accept:!1}).then(function(){location.reload(!0)}))}),p(f(t),"handleAccept",function(){t.state.submiting||(t.setState({submiting:!0}),l.default.post(t.props.api,{accept:!0}).then(function(){location.reload(!0)}))}),t.state={submiting:!1},t}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",null,o.default.createElement("button",{className:"btn btn-default",disabled:this.state.submiting,type:"buton",onClick:this.handleDecline},gettext("Decline")),o.default.createElement("button",{className:"btn btn-primary",disabled:this.state.submiting,type:"buton",onClick:this.handleAccept},gettext("Accept and continue")))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"../services/ajax":359,react:"react"}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ModalHeader=E,n.default=void 0;var r=o(e("react")),a=o(e("./form")),i=o(e("./form-group")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==m(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../reducers/participants")),u=e("../reducers/thread"),c=o(e("../services/ajax")),f=o(e("../services/modal")),d=o(e("../services/snackbar")),p=o(e("../services/store"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=g(o);return t=l?(e=g(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==m(r)&&"function"!=typeof r?v(n):r}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,a.default);var e,t,n,o=b(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=v(t),a=function(e){t.changeValue("username",e.target.value)},(r="onUsernameChange")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.state={isLoading:!1,username:""},t}return e=l,(t=[{key:"clean",value:function(){return!!this.state.username.trim().length||(d.default.error(gettext("You have to enter user name.")),!1)}},{key:"send",value:function(){return c.default.patch(this.props.thread.api.index,[{op:"add",path:"participants",value:this.state.username},{op:"add",path:"acl",value:1}])}},{key:"handleSuccess",value:function(e){p.default.dispatch((0,u.updateAcl)(e)),p.default.dispatch(s.replace(e.participants)),d.default.success(gettext("New participant has been added to thread.")),f.default.hide()}},{key:"render",value:function(){return r.default.createElement("div",{className:"modal-dialog modal-sm",role:"document"},r.default.createElement("form",{onSubmit:this.handleSubmit},r.default.createElement("div",{className:"modal-content"},r.default.createElement(E,null),r.default.createElement("div",{className:"modal-body"},r.default.createElement(i.default,{for:"id_username",label:gettext("User to add")},r.default.createElement("input",{id:"id_username",className:"form-control",disabled:this.state.isLoading,onChange:this.onUsernameChange,type:"text",value:this.state.username}))),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-block btn-primary",disabled:this.state.isLoading},gettext("Add participant")),r.default.createElement("button",{className:"btn btn-block btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel"))))))}}])&&h(e.prototype,t),n&&h(e,n),l}();function E(e){return r.default.createElement("div",{className:"modal-header"},r.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},r.default.createElement("span",{"aria-hidden":"true"},"×")),r.default.createElement("h4",{className:"modal-title"},gettext("Add participant")))}n.default=_},{"../reducers/participants":345,"../reducers/thread":354,"../services/ajax":359,"../services/modal":366,"../services/snackbar":371,"../services/store":372,"./form":50,"./form-group":49,react:"react"}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.select=function(e){return{user:e.auth.user,signedIn:e.auth.signedIn,signedOut:e.auth.signedOut}},n.default=void 0;var r,o=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,n,r=u(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"refresh",value:function(){window.location.reload()}},{key:"getMessage",value:function(){return this.props.signedIn?interpolate(gettext("You have signed in as %(username)s. Please refresh the page before continuing."),{username:this.props.signedIn.username},!0):this.props.signedOut?interpolate(gettext("%(username)s, you have been signed out. Please refresh the page before continuing."),{username:this.props.user.username},!0):void 0}},{key:"render",value:function(){var e="auth-message";return(this.props.signedIn||this.props.signedOut)&&(e+=" show"),o.default.createElement("div",{className:e},o.default.createElement("div",{className:"container"},o.default.createElement("p",{className:"lead"},this.getMessage()),o.default.createElement("p",null,o.default.createElement("button",{className:"btn btn-default",type:"button",onClick:this.refresh},gettext("Reload page")),o.default.createElement("span",{className:"hidden-xs hidden-sm"}," "+gettext("or press F5 key.")))))}}])&&l(e.prototype,t),n&&l(e,n),a}();n.default=a},{react:"react"}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.size||100,n=e.size2x||t;return r.default.createElement("img",{alt:"",className:e.className||"user-avatar",src:l(e.user,t),srcSet:l(e.user,n),width:t,height:t})},n.getSrc=l,n.resolveAvatarForSize=i;var r=o(e("react")),a=o(e("./.."));function o(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return e&&e.id?i(e.avatars,t).url:a.default.get("BLANK_AVATAR_URL")}function i(e,t){var n=e[0];return e.forEach(function(e){e.size>=t&&(n=e)}),n}},{"./..":296,react:"react"}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("moment")),l=r(e("react"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,l.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getReasonMessage",value:function(){return this.props.message.html?l.default.createElement("div",{className:"lead",dangerouslySetInnerHTML:{__html:this.props.message.html}}):l.default.createElement("p",{className:"lead"},this.props.message.plain)}},{key:"getExpirationMessage",value:function(){if(this.props.expires){if(this.props.expires.isAfter((0,o.default)())){var e=interpolate(gettext("This ban expires on %(expires_on)s."),{expires_on:this.props.expires.format("LL, LT")},!0),t=interpolate(gettext("This ban expires %(expires_on)s."),{expires_on:this.props.expires.fromNow()},!0);return l.default.createElement("abbr",{title:e},t)}return gettext("This ban has expired.")}return gettext("This ban is permanent.")}},{key:"render",value:function(){return l.default.createElement("div",{className:"page page-error page-error-banned"},l.default.createElement("div",{className:"container"},l.default.createElement("div",{className:"message-panel"},l.default.createElement("div",{className:"message-icon"},l.default.createElement("span",{className:"material-icon"},"highlight_off")),l.default.createElement("div",{className:"message-body"},this.getReasonMessage(),l.default.createElement("p",{className:"message-footnote"},this.getExpirationMessage())))))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{moment:"moment",react:"react"}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("./loader"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){var e="btn "+this.props.className,t=this.props.disabled;return this.props.loading&&(e+=" btn-loading",t=!0),o.default.createElement("button",{className:e,disabled:t,onClick:this.props.onClick,type:this.props.onClick?"button":"submit"},this.props.children,this.props.loading?o.default.createElement(l.default,null):null)}}])&&s(e.prototype,t),n&&s(e,n),a}();(n.default=a).defaultProps={className:"btn-default",type:"submit",loading:!1,disabled:!1,onClick:null}},{"./loader":52,react:"react"}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement("div",{className:"categories-list"},a.default.createElement("ul",{className:"list-group"},a.default.createElement("li",{className:"list-group-item empty-message"},a.default.createElement("p",{className:"lead"},gettext("No categories exist or you don't have permission to see them.")))))};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.categories;return r.default.createElement("div",{className:"categories-list"},t.map(function(e){return r.default.createElement(a.default,{category:e,key:e.id})}))};var r=o(e("react")),a=o(e("./category"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./category":13,react:"react"}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.category,n="list-group list-group-category";t.css_class&&(n+=" list-group-category-has-flavor",n+=" list-group-category-"+t.css_class);return r.default.createElement("ul",{className:n},r.default.createElement(a.default,{category:t,isFirst:!0}),t.subcategories.map(function(e){return r.default.createElement(a.default,{category:e,isFirst:!1,key:e.id})}))};var r=o(e("react")),a=o(e("./list-item"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./list-item":16,react:"react"}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.category;return t.description?a.default.createElement("div",{className:"category-description",dangerouslySetInnerHTML:{__html:t.description.html}}):null};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.category;return a.default.createElement("div",{className:o(t),title:l(t)},a.default.createElement("span",{className:"material-icon"},i(t)))},n.getClassName=o,n.getTitle=l,n.getIcon=i;var r,a=(r=e("react"))&&r.__esModule?r:{default:r};function o(e){return e.is_read?"read-status item-read":"read-status item-new"}function l(e){return e.is_closed?e.is_read?gettext("This category has no new posts. (closed)"):gettext("This category has new posts. (closed)"):e.is_read?gettext("This category has no new posts."):gettext("This category has new posts.")}function i(e){return e.is_closed?e.is_read?"lock_outline":"lock":e.is_read?"chat_bubble_outline":"chat_bubble"}},{react:"react"}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.category,n=e.isFirst,r="list-group-item";t.description?r+=" list-group-category-has-description":r+=" list-group-category-no-description";n&&(r+=" list-group-item-first");t.css_class&&(r+=" list-group-category-has-flavor",r+=" list-group-item-category-"+t.css_class);return a.default.createElement("li",{className:r},a.default.createElement("div",{className:"row"},a.default.createElement(o.default,{category:t}),a.default.createElement(i.default,{category:t}),a.default.createElement(l.default,{category:t})),a.default.createElement(s.default,{category:t,isFirst:n}))};var a=r(e("react")),o=r(e("./main")),l=r(e("./last-thread")),i=r(e("./stats")),s=r(e("./subcategories"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./last-thread":17,"./main":18,"./stats":19,"./subcategories":20,react:"react"}],17:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.category;return r.default.createElement("div",{className:"col-xs-12 col-sm-6 col-md-4 category-last-thread"},r.default.createElement(l,{category:t}),r.default.createElement(u,{category:t}),r.default.createElement(c,{category:t}),r.default.createElement(f,{category:t}))},n.LastThread=l,n.LastPosterAvatar=i,n.LastPosterName=s,n.Empty=u,n.Private=c,n.Protected=f,n.Message=d;var r=o(e("react")),a=o(e("../../../avatar"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=e.category;return t.acl.can_browse&&t.acl.can_see_all_threads&&t.last_thread_title?r.default.createElement("div",{className:"media"},r.default.createElement("div",{className:"media-left hidden-xs"},r.default.createElement(i,{category:t})),r.default.createElement("div",{className:"media-body"},r.default.createElement("div",{className:"media-heading"},r.default.createElement("a",{className:"item-title thread-title",href:t.url.last_thread_new,title:t.last_thread_title},t.last_thread_title)),r.default.createElement("ul",{className:"list-inline"},r.default.createElement("li",{className:"category-last-thread-poster"},r.default.createElement(s,{category:t})),r.default.createElement("li",{className:"divider"},"—"),r.default.createElement("li",{className:"category-last-thread-date"},r.default.createElement("a",{href:t.url.last_post},t.last_post_on.fromNow()))))):null}function i(e){var t=e.category;return t.last_poster?r.default.createElement("a",{className:"last-poster-avatar",href:t.last_poster.url,title:t.last_poster_name},r.default.createElement(a.default,{className:"media-object",size:40,user:t.last_poster})):r.default.createElement("span",{className:"last-poster-avatar",title:t.last_poster_name},r.default.createElement(a.default,{className:"media-object",size:40}))}function s(e){var t=e.category;return t.last_poster?r.default.createElement("a",{className:"item-title",href:t.last_poster.url},t.last_poster_name):r.default.createElement("span",{className:"item-title"},t.last_poster_name)}function u(e){var t=e.category;return!t.acl.can_browse||!t.acl.can_see_all_threads||t.last_thread_title?null:r.default.createElement(d,{message:gettext("This category is empty. No threads were posted within it so far.")})}function c(e){var t=e.category;return!t.acl.can_browse||t.acl.can_see_all_threads?null:r.default.createElement(d,{message:gettext("This category is private. You can see only your own threads within it.")})}function f(e){return e.category.acl.can_browse?null:r.default.createElement(d,{message:gettext("This category is protected. You can't browse its contents.")})}function d(e){var t=e.message;return r.default.createElement("div",{className:"media category-thread-message"},r.default.createElement("div",{className:"media-left"},r.default.createElement("span",{className:"material-icon"},"info_outline")),r.default.createElement("div",{className:"media-body"},r.default.createElement("p",null,t)))}},{"../../../avatar":8,react:"react"}],18:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.category;return r.default.createElement("div",{className:"col-xs-12 col-sm-6 col-md-6 category-main"},r.default.createElement("div",{className:"media"},r.default.createElement("div",{className:"media-left"},r.default.createElement(o.default,{category:t})),r.default.createElement("div",{className:"media-body"},r.default.createElement("h4",{className:"media-heading"},r.default.createElement("a",{href:t.url.index},t.name)),r.default.createElement(a.default,{category:t}))))};var r=l(e("react")),a=l(e("./description")),o=l(e("./icon"));function l(e){return e&&e.__esModule?e:{default:e}}},{"./description":14,"./icon":15,react:"react"}],19:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.category;return r.default.createElement("div",{className:"col-md-2 hidden-xs hidden-sm"},r.default.createElement("ul",{className:"list-unstyled category-stats"},r.default.createElement(o,{threads:t.threads}),r.default.createElement(l,{posts:t.posts})))},n.Threads=o,n.Posts=l;var r=a(e("react"));a(e("../../../avatar"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.threads,n=ngettext("%(threads)s thread","%(threads)s threads",t);return r.default.createElement("li",{className:"category-stat-threads"},interpolate(n,{threads:t},!0))}function l(e){var t=e.posts,n=ngettext("%(posts)s post","%(posts)s posts",t);return r.default.createElement("li",{className:"category-stat-posts"},interpolate(n,{posts:t},!0))}},{"../../../avatar":8,react:"react"}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.category;return e.isFirst||0===t.subcategories.length?null:r.default.createElement("div",{className:"row subcategories-list"},t.subcategories.map(function(e){return r.default.createElement(a.default,{category:e,key:e.id})}))};var r=o(e("react")),a=o(e("./list-item"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./list-item":21,react:"react"}],21:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.category,n="btn btn-default btn-block btn-sm btn-subcategory";t.is_read||(n+=" btn-subcategory-new");return a.default.createElement("div",{className:"col-xs-12 col-sm-4 col-md-3"},a.default.createElement("a",{className:n,href:t.url.index},a.default.createElement("span",{className:"material-icon"},o(t)),a.default.createElement("span",{className:"icon-text"},t.name)))},n.getIcon=o;var r,a=(r=e("react"))&&r.__esModule?r:{default:r};function o(e){return e.is_closed?e.is_read?"lock_outline":"lock":e.is_read?"chat_bubble_outline":"chat_bubble"}},{react:"react"}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.select=function(e){return{tick:e.tick.tick}},n.default=void 0;var r=o(e("moment")),a=o(e("react")),i=o(e("./blankslate")),s=o(e("./categories-list")),u=o(e("../..")),c=o(e("../../services/polls"));function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?h(n):r}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function e(t){return Object.assign({},t,{last_post_on:t.last_post_on?(0,r.default)(t.last_post_on):null,subcategories:t.subcategories.map(e)})},l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,a.default.Component);var e,t,n,o=m(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=h(t),a=function(e){t.setState({categories:e.map(b)})},(r="update")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.state={categories:u.default.get("CATEGORIES").map(b)},t.startPolling(u.default.get("CATEGORIES_API")),t}return e=l,(t=[{key:"startPolling",value:function(e){c.default.start({poll:"categories",url:e,frequency:18e4,update:this.update})}},{key:"render",value:function(){var e=this.state.categories;return 0===e.length?a.default.createElement(i.default,null):a.default.createElement(s.default,{categories:e})}}])&&d(e.prototype,t),n&&d(e,n),l}();n.default=l},{"../..":296,"../../services/polls":369,"./blankslate":11,"./categories-list":12,moment:"moment",react:"react"}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement("select",{className:e.className||"form-control",disabled:e.disabled||!1,id:e.id||null,onChange:e.onChange,value:e.value},e.choices.map(function(e){return a.default.createElement("option",{disabled:e.disabled||!1,key:e.value,value:e.value},"- - ".repeat(e.level)+e.label)}))};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],24:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("react")),a=(o(e("../avatar")),o(e("../button"))),i=o(e("../../services/ajax")),s=o(e("../../services/snackbar"));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=m(o);return t=l?(e=m(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==u(r)&&"function"!=typeof r?p(n):r}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,r.default.Component);var e,t,n,o=d(l);function l(e){var a,t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a=o.call(this,e),t=p(a),r=function(){if(a.state.isLoading)return!1;a.setState({isLoading:!0});var e=a.props.upload?"crop_tmp":"crop_src",t=$(".crop-form"),n=t.cropit("exportZoom"),r=t.cropit("offset");i.default.post(a.props.user.api.avatar,{avatar:e,crop:{offset:{x:r.x*n,y:r.y*n},zoom:t.cropit("zoom")*n}}).then(function(e){a.props.onComplete(e),s.default.success(e.detail)},function(e){400===e.status?(s.default.error(e.detail),a.setState({isLoading:!1})):a.props.showError(e)})},(n="cropAvatar")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,a.state={isLoading:!1,deviceRatio:1},a}return e=l,(t=[{key:"getAvatarSize",value:function(){return this.props.upload?this.props.options.crop_tmp.size:this.props.options.crop_src.size}},{key:"getImagePath",value:function(){return this.props.upload?this.props.dataUrl:this.props.options.crop_src.url}},{key:"componentDidMount",value:function(){for(var o=this,l=$(".crop-form"),e=this.getAvatarSize(),t=l.width();t<e;)e/=2;var n=this.getAvatarSize()/e;l.width(e),l.cropit({width:e,height:e,exportZoom:n,imageState:{src:this.getImagePath()},onImageLoaded:function(){var e,t,n,r,a;o.props.upload?(e=l.cropit("zoom"),(t=l.cropit("imageSize")).width>t.height?(n=(t.width*e-o.getAvatarSize())/-2,l.cropit("offset",{x:n,y:0})):t.width<t.height?(r=(t.height*e-o.getAvatarSize())/-2,l.cropit("offset",{x:0,y:r})):l.cropit("offset",{x:0,y:0})):(a=o.props.options.crop_src.crop)&&(l.cropit("zoom",a.zoom),l.cropit("offset",{x:a.x,y:a.y}))}})}},{key:"componentWillUnmount",value:function(){$(".crop-form").cropit("disable")}},{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement("div",{className:"modal-body modal-avatar-crop"},r.default.createElement("div",{className:"crop-form"},r.default.createElement("div",{className:"cropit-preview"}),r.default.createElement("input",{type:"range",className:"cropit-image-zoom-input"}))),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("div",{className:"col-md-6 col-md-offset-3"},r.default.createElement(a.default,{onClick:this.cropAvatar,loading:this.state.isLoading,className:"btn-primary btn-block"},this.props.upload?gettext("Set avatar"):gettext("Crop image")),r.default.createElement(a.default,{onClick:this.props.showIndex,disabled:this.state.isLoading,className:"btn-default btn-block"},gettext("Cancel")))))}}])&&c(e.prototype,t),n&&c(e,n),l}();n.default=l},{"../../services/ajax":359,"../../services/snackbar":371,"../avatar":8,"../button":10,react:"react"}],25:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Gallery=n.GalleryItem=void 0;var l=s(e("react")),a=(s(e("../avatar")),s(e("../button"))),o=(s(e("../..")),s(e("../../services/ajax"))),i=s(e("../../services/snackbar")),r=s(e("../../utils/batch"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==u(r)&&"function"!=typeof r?b(n):r}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(){m(o,l.default.Component);var a=y(o);function o(){var e;f(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"select",function(){e.props.select(e.props.id)}),e}return p(o,[{key:"getClassName",value:function(){return this.props.selection===this.props.id?this.props.disabled?"btn btn-avatar btn-disabled avatar-selected":"btn btn-avatar avatar-selected":this.props.disabled?"btn btn-avatar btn-disabled":"btn btn-avatar"}},{key:"render",value:function(){return l.default.createElement("button",{type:"button",className:this.getClassName(),disabled:this.props.disabled,onClick:this.select},l.default.createElement("img",{src:this.props.url}))}}]),o}();n.GalleryItem=_;var E=function(){m(t,l.default.Component);var e=y(t);function t(){return f(this,t),e.apply(this,arguments)}return p(t,[{key:"render",value:function(){var n=this;return l.default.createElement("div",{className:"avatars-gallery"},l.default.createElement("h3",null,this.props.name),l.default.createElement("div",{className:"avatars-gallery-images"},(0,r.default)(this.props.images,4,null).map(function(e,t){return l.default.createElement("div",{className:"row",key:t},e.map(function(e,t){return l.default.createElement("div",{className:"col-xs-3",key:t},e?l.default.createElement(_,c({disabled:n.props.disabled,select:n.props.select,selection:n.props.selection},e)):l.default.createElement("div",{className:"blank-avatar"}))}))})))}}]),t}();n.Gallery=E;var w=function(){m(r,l.default.Component);var n=y(r);function r(e){var t;return f(this,r),g(b(t=n.call(this,e)),"select",function(e){t.setState({selection:e})}),g(b(t),"save",function(){return!t.state.isLoading&&(t.setState({isLoading:!0}),void o.default.post(t.props.user.api.avatar,{avatar:"galleries",image:t.state.selection}).then(function(e){t.setState({isLoading:!1}),i.default.success(e.detail),t.props.onComplete(e),t.props.showIndex()},function(e){400===e.status?(i.default.error(e.detail),t.setState({isLoading:!1})):t.props.showError(e)}))}),t.state={selection:null,isLoading:!1},t}return p(r,[{key:"render",value:function(){var n=this;return l.default.createElement("div",null,l.default.createElement("div",{className:"modal-body modal-avatar-gallery"},this.props.options.galleries.map(function(e,t){return l.default.createElement(E,{name:e.name,images:e.images,selection:n.state.selection,disabled:n.state.isLoading,select:n.select,key:t})})),l.default.createElement("div",{className:"modal-footer"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-6 col-md-offset-3"},l.default.createElement(a.default,{onClick:this.save,loading:this.state.isLoading,disabled:!this.state.selection,className:"btn-primary btn-block"},this.state.selection?gettext("Save choice"):gettext("Select avatar")),l.default.createElement(a.default,{onClick:this.props.showIndex,disabled:this.state.isLoading,className:"btn-default btn-block"},gettext("Cancel"))))))}}]),r}();n.default=w},{"../..":296,"../../services/ajax":359,"../../services/snackbar":371,"../../utils/batch":375,"../avatar":8,"../button":10,react:"react"}],26:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../avatar")),i=r(e("../button")),s=r(e("../loader")),u=r(e("../../services/ajax")),c=r(e("../../services/snackbar"));function r(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?h(n):r}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,o.default.Component);var e,t,n,r=m(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),b(h(t=r.call(this,e)),"setGravatar",function(){t.callApi("gravatar")}),b(h(t),"setGenerated",function(){t.callApi("generated")}),t.state={isLoading:!1},t}return e=a,(t=[{key:"callApi",value:function(e){var t=this;if(this.state.isLoading)return!1;this.setState({isLoading:!0}),u.default.post(this.props.user.api.avatar,{avatar:e}).then(function(e){t.setState({isLoading:!1}),c.default.success(e.detail),t.props.onComplete(e)},function(e){400===e.status?(c.default.error(e.detail),t.setState({isLoading:!1})):t.props.showError(e)})}},{key:"getGravatarButton",value:function(){return this.props.options.gravatar?o.default.createElement(i.default,{onClick:this.setGravatar,disabled:this.state.isLoading,className:"btn-default btn-block btn-avatar-gravatar"},gettext("Download my Gravatar")):null}},{key:"getCropButton",value:function(){return this.props.options.crop_src?o.default.createElement(i.default,{className:"btn-default btn-block btn-avatar-crop",disabled:this.state.isLoading,onClick:this.props.showCrop},gettext("Re-crop uploaded image")):null}},{key:"getUploadButton",value:function(){return this.props.options.upload?o.default.createElement(i.default,{className:"btn-default btn-block btn-avatar-upload",disabled:this.state.isLoading,onClick:this.props.showUpload},gettext("Upload new image")):null}},{key:"getGalleryButton",value:function(){return this.props.options.galleries?o.default.createElement(i.default,{className:"btn-default btn-block btn-avatar-gallery",disabled:this.state.isLoading,onClick:this.props.showGallery},gettext("Pick avatar from gallery")):null}},{key:"getAvatarPreview",value:function(){var e={id:this.props.user.id,avatars:this.props.options.avatars};return this.state.isLoading?o.default.createElement("div",{className:"avatar-preview preview-loading"},o.default.createElement(l.default,{size:"200",user:e}),o.default.createElement(s.default,null)):o.default.createElement("div",{className:"avatar-preview"},o.default.createElement(l.default,{size:"200",user:e}))}},{key:"render",value:function(){return o.default.createElement("div",{className:"modal-body modal-avatar-index"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-md-5"},this.getAvatarPreview()),o.default.createElement("div",{className:"col-md-7"},this.getGravatarButton(),o.default.createElement(i.default,{onClick:this.setGenerated,disabled:this.state.isLoading,className:"btn-default btn-block btn-avatar-generate"},gettext("Generate my individual avatar")),this.getCropButton(),this.getUploadButton(),this.getGalleryButton())))}}])&&d(e.prototype,t),n&&d(e,n),a}();n.default=a},{"../../services/ajax":359,"../../services/snackbar":371,"../avatar":8,"../button":10,"../loader":52,react:"react"}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.select=function(e){return{user:e.auth.user}},n.default=n.ChangeAvatarError=void 0;var r=a(e("react")),l=a(e("./index")),i=a(e("./crop")),s=a(e("./upload")),u=a(e("./gallery")),c=a(e("../modal-loader")),f=e("../../reducers/users"),d=a(e("../../services/ajax")),p=a(e("../../services/store"));function a(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==m(r)&&"function"!=typeof r?E(n):r}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(){v(t,r.default.Component);var e=_(t);function t(){return y(this,t),e.apply(this,arguments)}return b(t,[{key:"getErrorReason",value:function(){return this.props.reason?r.default.createElement("p",{dangerouslySetInnerHTML:{__html:this.props.reason}}):null}},{key:"render",value:function(){return r.default.createElement("div",{className:"modal-body"},r.default.createElement("div",{className:"message-icon"},r.default.createElement("span",{className:"material-icon"},"remove_circle_outline")),r.default.createElement("div",{className:"message-body"},r.default.createElement("p",{className:"lead"},this.props.message),this.getErrorReason(),r.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},gettext("Ok"))))}}]),t}();n.ChangeAvatarError=O;var k=function(){v(o,r.default.Component);var a=_(o);function o(){var t;y(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return h(E(t=a.call.apply(a,[this].concat(n))),"showError",function(e){t.setState({error:e})}),h(E(t),"showIndex",function(){t.setState({component:l.default})}),h(E(t),"showUpload",function(){t.setState({component:s.default})}),h(E(t),"showCrop",function(){t.setState({component:i.default})}),h(E(t),"showGallery",function(){t.setState({component:u.default})}),h(E(t),"completeFlow",function(e){p.default.dispatch((0,f.updateAvatar)(t.props.user,e.avatars)),t.setState({component:l.default,options:e})}),t}return b(o,[{key:"componentDidMount",value:function(){var t=this;d.default.get(this.props.user.api.avatar).then(function(e){t.setState({component:l.default,options:e,error:null})},function(e){t.showError(e)})}},{key:"getBody",value:function(){return this.state?this.state.error?r.default.createElement(O,{message:this.state.error.detail,reason:this.state.error.reason}):r.default.createElement(this.state.component,{options:this.state.options,user:this.props.user,onComplete:this.completeFlow,showError:this.showError,showIndex:this.showIndex,showCrop:this.showCrop,showUpload:this.showUpload,showGallery:this.showGallery}):r.default.createElement(c.default,null)}},{key:"getClassName",value:function(){return this.state&&this.state.error?"modal-dialog modal-message modal-change-avatar":"modal-dialog modal-change-avatar"}},{key:"render",value:function(){return r.default.createElement("div",{className:this.getClassName(),role:"document"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},r.default.createElement("span",{"aria-hidden":"true"},"×")),r.default.createElement("h4",{className:"modal-title"},gettext("Change your avatar"))),this.getBody()))}}]),o}();n.default=k},{"../../reducers/users":358,"../../services/ajax":359,"../../services/store":372,"../modal-loader":55,"./crop":24,"./gallery":25,"./index":26,"./upload":28,react:"react"}],28:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("react")),l=a(e("./crop")),i=a(e("../button")),s=a(e("../../services/ajax")),u=a(e("../../services/snackbar")),c=a(e("../../utils/file-size"));function a(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?h(n):r}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,r.default.Component);var e,t,n,a=m(o);function o(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),b(h(r=a.call(this,e)),"pickFile",function(){document.getElementById("avatar-hidden-upload").click()}),b(h(r),"uploadFile",function(){var e,t,n=document.getElementById("avatar-hidden-upload").files[0];n&&((e=r.validateFile(n))?u.default.error(e):(r.setState({image:n,preview:URL.createObjectURL(n),progress:0}),(t=new FormData).append("avatar","upload"),t.append("image",n),s.default.upload(r.props.user.api.avatar,t,function(e){r.setState({progress:e})}).then(function(e){r.setState({options:e,uploaded:e.detail}),u.default.info(gettext("Your image has been uploaded and you may now crop it."))},function(e){400===e.status||413===e.status?(u.default.error(e.detail),r.setState({isLoading:!1,image:null,progress:0})):r.props.showError(e)})))}),r.state={image:null,preview:null,progress:0,uploaded:null,dataUrl:null},r}return e=o,(t=[{key:"validateFile",value:function(e){if(e.size>this.props.options.upload.limit)return interpolate(gettext("Selected file is too big. (%(filesize)s)"),{filesize:(0,c.default)(e.size)},!0);var t=gettext("Selected file type is not supported.");if(-1===this.props.options.upload.allowed_mime_types.indexOf(e.type))return t;var n=!1,r=e.name.toLowerCase();return this.props.options.upload.allowed_extensions.map(function(e){r.substr(-1*e.length)===e&&(n=!0)}),!n&&t}},{key:"getUploadRequirements",value:function(e){var t=e.allowed_extensions.map(function(e){return e.substr(1)});return interpolate(gettext("%(files)s files smaller than %(limit)s"),{files:t.join(", "),limit:(0,c.default)(e.limit)},!0)}},{key:"getUploadButton",value:function(){return r.default.createElement("div",{className:"modal-body modal-avatar-upload"},r.default.createElement(i.default,{className:"btn-pick-file",onClick:this.pickFile},r.default.createElement("div",{className:"material-icon"},"input"),gettext("Select file")),r.default.createElement("p",{className:"text-muted"},this.getUploadRequirements(this.props.options.upload)))}},{key:"getUploadProgressLabel",value:function(){return interpolate(gettext("%(progress)s % complete"),{progress:this.state.progress},!0)}},{key:"getUploadProgress",value:function(){return r.default.createElement("div",{className:"modal-body modal-avatar-upload"},r.default.createElement("div",{className:"upload-progress"},r.default.createElement("img",{src:this.state.preview}),r.default.createElement("div",{className:"progress"},r.default.createElement("div",{className:"progress-bar",role:"progressbar","aria-valuenow":"{this.state.progress}","aria-valuemin":"0","aria-valuemax":"100",style:{width:this.state.progress+"%"}},r.default.createElement("span",{className:"sr-only"},this.getUploadProgressLabel())))))}},{key:"renderUpload",value:function(){return r.default.createElement("div",null,r.default.createElement("input",{type:"file",id:"avatar-hidden-upload",className:"hidden-file-upload",onChange:this.uploadFile}),this.state.image?this.getUploadProgress():this.getUploadButton(),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("div",{className:"col-md-6 col-md-offset-3"},r.default.createElement(i.default,{onClick:this.props.showIndex,disabled:!!this.state.image,className:"btn-default btn-block"},gettext("Cancel")))))}},{key:"renderCrop",value:function(){return r.default.createElement(l.default,{options:this.state.options,user:this.props.user,upload:this.state.uploaded,dataUrl:this.state.preview,onComplete:this.props.onComplete,showError:this.props.showError,showIndex:this.props.showIndex})}},{key:"render",value:function(){return this.state.uploaded?this.renderCrop():this.renderUpload()}}])&&d(e.prototype,t),n&&d(e,n),o}();n.default=o},{"../../services/ajax":359,"../../services/snackbar":371,"../../utils/file-size":379,"../button":10,"./crop":24,react:"react"}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,n,r=u(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getClassName",value:function(){return this.props.dropdown?"btn btn-default btn-aligned btn-icon btn-dropdown-toggle open hidden-md hidden-lg":"btn btn-default btn-aligned btn-icon btn-dropdown-toggle hidden-md hidden-lg"}},{key:"render",value:function(){return o.default.createElement("button",{className:this.getClassName(),type:"button",onClick:this.props.toggleNav,"aria-haspopup":"true","aria-expanded":this.props.dropdown?"true":"false"},o.default.createElement("i",{className:"material-icon"},"menu"))}}])&&l(e.prototype,t),n&&l(e,n),a}();n.default=a},{react:"react"}],30:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.display?r.default.createElement(a.default,{helpText:gettext("No profile details are editable at this time."),message:gettext("This option is currently unavailable.")}):null};var r=o(e("react")),a=o(e("../panel-message"));function o(e){return e&&e.__esModule?e:{default:e}}},{"../panel-message":88,react:"react"}],31:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../select"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=s(o);return t=l?(e=s(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?f(n):r}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(s,o.default.Component);var e,t,n,i=c(s);function s(){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e,t,n,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return r=i.call.apply(i,[this].concat(o)),e=f(r),n=function(e){var t=r.props,n=t.field;(0,t.onChange)(n.fieldname,e.target.value)},(t="onChange")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,r}return e=s,(t=[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.field,r=e.value,a=n.input;return"select"===a.type?o.default.createElement(l.default,{choices:a.choices,disabled:t,id:"id_"+n.fieldname,onChange:this.onChange,value:r}):"textarea"===a.type?o.default.createElement("textarea",{className:"form-control",disabled:t,id:"id_"+n.fieldname,onChange:this.onChange,rows:"4",type:"text",value:r}):"text"===a.type?o.default.createElement("input",{className:"form-control",disabled:t,id:"id_"+n.fieldname,onChange:this.onChange,type:"text",value:r}):null}}])&&a(e.prototype,t),n&&a(e,n),s}();n.default=d},{"../select":204,react:"react"}],32:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.disabled,n=e.errors,r=e.fields,a=e.name,o=e.onChange,l=e.value;return i.default.createElement("fieldset",null,i.default.createElement("legend",null,a),r.map(function(e){return i.default.createElement(u.default,{for:"id_"+e.fieldname,helpText:e.help_text,key:e.fieldname,label:e.label,validation:n[e.fieldname]},i.default.createElement(s.default,{disabled:t,field:e,onChange:o,value:l[e.fieldname]}))}))};var i=r(e("react")),s=r(e("./field-input")),u=r(e("../form-group"));function r(e){return e&&e.__esModule?e:{default:e}}},{"../form-group":49,"./field-input":31,react:"react"}],33:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CancelButton=v,n.default=void 0;var r=u(e("react")),a=u(e("./fieldset")),o=u(e("../button")),l=u(e("../form")),i=u(e("../../services/ajax")),s=u(e("../../services/snackbar"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==c(r)&&"function"!=typeof r?m(n):r}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(c,l.default);var e,t,n,u=p(c);function c(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),y(m(n=u.call(this,e)),"onChange",function(e,t){n.setState(y({},e,t))}),n.state={isLoading:!1,errors:{}};for(var t=e.groups.length,r=0;r<t;r++)for(var a=e.groups[r],o=a.fields.length,l=0;l<o;l++){var i=a.fields[l].fieldname,s=a.fields[l].initial;n.state[i]=s}return n}return e=c,(t=[{key:"send",value:function(){var e=Object.assign({},this.state,{errors:null,isLoading:null});return i.default.post(this.props.api,e)}},{key:"handleSuccess",value:function(e){this.props.onSuccess(e)}},{key:"handleError",value:function(e){400===e.status?(s.default.error(gettext("Form contains errors.")),this.setState({errors:e})):s.default.apiError(e)}},{key:"render",value:function(){var n=this;return r.default.createElement("form",{onSubmit:this.handleSubmit},r.default.createElement("div",{className:"panel-body"},this.props.groups.map(function(e,t){return r.default.createElement(a.default,{disabled:n.state.isLoading,errors:n.state.errors,fields:e.fields,name:e.name,key:t,onChange:n.onChange,value:n.state})})),r.default.createElement("div",{className:"panel-footer text-right"},r.default.createElement(v,{disabled:this.state.isLoading,onCancel:this.props.onCancel})," ",r.default.createElement(o.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Save changes"))))}}])&&f(e.prototype,t),n&&f(e,n),c}();function v(e){var t=e.onCancel,n=e.disabled;return t?r.default.createElement("button",{className:"btn btn-default",disabled:n,onClick:t,type:"button"},gettext("Cancel")):null}n.default=b},{"../../services/ajax":359,"../../services/snackbar":371,"../button":10,"../form":50,"./fieldset":32,react:"react"}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FormDisplay=y,n.default=void 0;var l=r(e("react")),o=r(e("./blankslate")),i=r(e("./loader")),s=r(e("./form")),u=r(e("../../services/ajax")),c=r(e("../../services/snackbar"));function r(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,l.default.Component);var e,t,n,r=m(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={loading:!0,groups:null},t}return e=a,(t=[{key:"componentDidMount",value:function(){var t=this;u.default.get(this.props.api).then(function(e){t.setState({loading:!1,groups:e})},function(e){c.default.apiError(e),t.props.cancel&&t.props.cancel()})}},{key:"render",value:function(){var e=this.state,t=e.groups,n=e.loading;return l.default.createElement("div",{className:"panel panel-default panel-form"},l.default.createElement("div",{className:"panel-heading"},l.default.createElement("h3",{className:"panel-title"},gettext("Edit details"))),l.default.createElement(i.default,{display:n}),l.default.createElement(o.default,{display:!n&&!t.length}),l.default.createElement(y,{api:this.props.api,display:!n&&t.length,groups:t,onCancel:this.props.onCancel,onSuccess:this.props.onSuccess}))}}])&&d(e.prototype,t),n&&d(e,n),a}();function y(e){var t=e.api,n=e.display,r=e.groups,a=e.onCancel,o=e.onSuccess;return n?l.default.createElement(s.default,{api:t,groups:r,onCancel:a,onSuccess:o}):null}n.default=a},{"../../services/ajax":359,"../../services/snackbar":371,"./blankslate":30,"./form":33,"./loader":35,react:"react"}],35:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.display?r.default.createElement("div",{className:"panel-body"},r.default.createElement(a.default,null)):null};var r=o(e("react")),a=o(e("../loader"));function o(e){return e&&e.__esModule?e:{default:e}}},{"../loader":52,react:"react"}],36:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Preview=g,n.Image=_,n.Icon=E,n.Filename=w,n.Details=O,n.Actions=k,n.Insert=x,n.Remove=P,n.Undo=j,n.default=void 0;var l=r(e("react")),a=(r(e("../../../..")),r(e("../../../../utils/escape-html"))),o=r(e("../../../../utils/file-size"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?d(n):r}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h='<abbr title="%(absolute)s">%(relative)s</abbr>',y='<span class="item-title">%(user)s</span>',b='<a href="%(url)s" class="item-title">%(user)s</a>',v=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,l.default.Component);var e,t,n,a=f(o);function o(){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m(d(r=a.call.apply(a,[this].concat(t))),"onInsert",function(){r.props.replaceSelection(r.insertAttachment)}),m(d(r),"insertAttachment",function(e,t){var n=r.props.item;n.is_image?n.url.thumb?t("[!["+n.filename+"]("+n.url.thumb+")]("+n.url.index+")"):t("[!["+n.filename+"]("+n.url.index+")]("+n.url.index+")"):t("["+n.filename+"]("+n.url.index+")")}),m(d(r),"onRemove",function(){r.updateItem({isRemoved:!0})}),m(d(r),"onUndo",function(){r.updateItem({isRemoved:!1})}),m(d(r),"updateItem",function(t){var e=r.props.attachments.map(function(e){return e.id===r.props.item.id?Object.assign({},e,t):e});r.props.onAttachmentsChange(e)}),r}return e=o,(t=[{key:"render",value:function(){return l.default.createElement("li",{className:"editor-attachment-complete"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-12 col-sm-8 col-md-9"},l.default.createElement(g,this.props),l.default.createElement("div",{className:"editor-attachment-details"},l.default.createElement(w,this.props),l.default.createElement(O,this.props))),l.default.createElement("div",{className:"col-xs-12 col-sm-4 col-md-3 xs-margin-top-half"},l.default.createElement(k,s({onInsert:this.onInsert,onRemove:this.onRemove,onUndo:this.onUndo},this.props)))))}}])&&u(e.prototype,t),n&&u(e,n),o}();function g(e){return e.item.is_image?l.default.createElement(_,e):l.default.createElement(E,e)}function _(e){var t=e.item.url.thumb||e.item.url.index;return l.default.createElement("div",{className:"editor-attachment-image"},l.default.createElement("a",{href:e.item.url.index+"?shva=1",style:{backgroundImage:"url('"+t+"?shva=1')"},target:"_blank"}))}function E(e){return l.default.createElement("div",{className:"editor-attachment-icon"},l.default.createElement("span",{className:"material-icon"},"insert_drive_file"))}function w(e){return l.default.createElement("h4",null,l.default.createElement("a",{className:"item-title",href:e.item.url.index+"?shva=1",target:"_blank"},e.item.filename))}function O(e){var t=null,t=e.item.url.uploader?interpolate(b,{url:(0,a.default)(e.item.url.uploader),user:(0,a.default)(e.item.uploader_name)},!0):interpolate(y,{user:(0,a.default)(e.item.uploader_name)},!0),n=interpolate(h,{absolute:(0,a.default)(e.item.uploaded_on.format("LLL")),relative:(0,a.default)(e.item.uploaded_on.fromNow())},!0),r=interpolate((0,a.default)(gettext("%(filetype)s, %(size)s, uploaded by %(uploader)s %(uploaded_on)s.")),{filetype:e.item.filetype,size:(0,o.default)(e.item.size),uploader:t,uploaded_on:n},!0);return l.default.createElement("p",{dangerouslySetInnerHTML:{__html:r}})}function k(e){return l.default.createElement("div",{className:"editor-attachment-actions"},l.default.createElement("div",{className:"row"},l.default.createElement(x,e),l.default.createElement(P,e),l.default.createElement(j,e)))}function x(e){return e.item.isRemoved?null:l.default.createElement("div",{className:"col-xs-6"},l.default.createElement("button",{className:"btn btn-default btn-sm btn-block",onClick:e.onInsert,type:"button"},gettext("Insert")))}function P(e){return e.item.isRemoved&&e.item.acl.can_delete?null:l.default.createElement("div",{className:"col-xs-6"},l.default.createElement("button",{className:"btn btn-default btn-sm btn-block",onClick:e.onRemove,type:"button"},gettext("Remove")))}function j(e){return e.item.isRemoved?l.default.createElement("div",{className:"col-xs-12"},l.default.createElement("button",{className:"btn btn-default btn-sm btn-block",onClick:e.onUndo,type:"button"},gettext("Undo removal"))):null}n.default=v},{"../../../..":296,"../../../../utils/escape-html":378,"../../../../utils/file-size":379,react:"react"}],37:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("react")),a=o(e("../../../../utils/escape-html"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=s(o);return t=l?(e=s(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?f(n):r}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(s,r.default.Component);var e,t,n,i=c(s);function s(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return t=i.call.apply(i,[this].concat(o)),e=f(t),r=function(){var e=t.props.attachments.filter(function(e){return e.key!==t.props.item.key});t.props.onAttachmentsChange(e)},(n="onClick")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,t}return e=s,(t=[{key:"render",value:function(){var e=interpolate("<strong>%(name)s</strong>",{name:(0,a.default)(this.props.item.filename)},!0),t=interpolate(gettext("Error uploading %(filename)s"),{filename:e,progress:this.props.item.progress+"%"},!0);return r.default.createElement("li",{className:"editor-attachment-error"},r.default.createElement("div",{className:"editor-attachment-error-icon"},r.default.createElement("span",{className:"material-icon"},"warning")),r.default.createElement("div",{className:"editor-attachment-error-message"},r.default.createElement("h4",{dangerouslySetInnerHTML:{__html:t+":"}}),r.default.createElement("p",null,this.props.item.error),r.default.createElement("button",{className:"btn btn-default btn-sm",onClick:this.onClick,type:"button"},gettext("Dismiss"))))}}])&&l(e.prototype,t),n&&l(e,n),s}();n.default=d},{"../../../../utils/escape-html":378,react:"react"}],38:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(e.item.id)return r.default.createElement(a.default,e);if(e.item.error)return r.default.createElement(o.default,e);return r.default.createElement(l.default,e)};var r=i(e("react")),a=i(e("./complete")),o=i(e("./error")),l=i(e("./upload"));i(e("../../../..")),i(e("../../../../utils/escape-html"));function i(e){return e&&e.__esModule?e:{default:e}}},{"../../../..":296,"../../../../utils/escape-html":378,"./complete":36,"./error":37,"./upload":39,react:"react"}],39:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=interpolate(l,{name:(0,a.default)(e.item.filename)},!0),n=interpolate(gettext("Uploading %(filename)s... %(progress)s"),{filename:t,progress:e.item.progress+"%"},!0);return r.default.createElement("li",{className:"editor-attachment-upload"},r.default.createElement("div",{className:"editor-attachment-progress-bar"},r.default.createElement("div",{className:"editor-attachment-progress",style:{width:e.item.progress+"%"}})),r.default.createElement("p",{className:"editor-attachment-upload-message",dangerouslySetInnerHTML:{__html:n}}))};var r=o(e("react")),a=o(e("../../../../utils/escape-html"));function o(e){return e&&e.__esModule?e:{default:e}}var l="<strong>%(name)s</strong>"},{"../../../../utils/escape-html":378,react:"react"}],40:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return l.default.get("user").acl.max_attachment_size?r.default.createElement("div",{className:"editor-attachments"},r.default.createElement(a.default,e),r.default.createElement(o.default,e)):null};var r=i(e("react")),a=i(e("./list")),o=i(e("./uploader")),l=i(e("../../.."));function i(e){return e&&e.__esModule?e:{default:e}}},{"../../..":296,"./list":41,"./uploader":43,react:"react"}],41:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return r.default.createElement("ul",{className:"list-unstyled editor-attachments-list",style:{overflowY:"scroll",maxHeight:"75px",overflowX:"hidden"}},t.attachments.map(function(e){return r.default.createElement(a.default,l({item:e,key:e.id||e.key},t))}))};var r=o(e("react")),a=o(e("./attachment"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},{"./attachment":38,react:"react"}],42:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("react")),a=o(e("../../.."));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=s(o);return t=l?(e=s(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?f(n):r}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(s,r.default.Component);var e,t,n,i=c(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=i.call.apply(i,[this].concat(o)),t=f(e),r=function(){document.getElementById("editor-upload-field").click()},(n="onClick")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return e=s,(t=[{key:"render",value:function(){return a.default.get("user").acl.max_attachment_size?r.default.createElement("li",{className:this.props.className,disabled:this.props.disabled,onClick:this.onClick,title:gettext("Upload file"),type:"button"},r.default.createElement("span",{className:"material-icon"},"file_upload")," Upload file"):null}}])&&l(e.prototype,t),n&&l(e,n),s}();n.default=d},{"../../..":296,react:"react"}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getRandomKey=y,n.default=void 0;var r=a(e("react")),u=a(e("moment")),c=a(e("../../..")),f=a(e("../../../services/ajax")),d=a(e("../../../services/snackbar"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=s(o);return t=l?(e=s(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?m(n):r}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,r.default.Component);var e,t,n,i=p(s);function s(){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e,t,n,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return a=i.call.apply(i,[this].concat(o)),e=m(a),n=function(e){var t,n,r=e.target.files[0];r&&(t={id:null,key:y(),progress:0,error:null,filename:r.name},a.props.onAttachmentsChange([t].concat(a.props.attachments)),(n=new FormData).append("upload",r),f.default.upload(c.default.get("ATTACHMENTS_API"),n,function(e){t.progress=e,a.props.onAttachmentsChange(a.props.attachments.concat())}).then(function(e){e.uploaded_on=(0,u.default)(e.uploaded_on),Object.assign(t,e),a.props.onAttachmentsChange(a.props.attachments.concat())},function(e){400===e.status||413===e.status?(t.error=e.detail,a.props.onAttachmentsChange(a.props.attachments.concat())):d.default.apiError(e)}))},(t="onChange")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,a}return e=s,(t=[{key:"render",value:function(){return r.default.createElement("input",{id:"editor-upload-field",onChange:this.onChange,type:"file"})}}])&&o(e.prototype,t),n&&o(e,n),s}();function y(){return"upld-"+Math.round((new Date).getTime())}n.default=h},{"../../..":296,"../../../services/ajax":359,"../../../services/snackbar":371,moment:"moment",react:"react"}],44:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var d=r(e("react")),p=r(e("classnames")),m=r(e("../attachments/upload-button"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=u(o);return t=l?(e=u(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(a,d.default.Component);var e,t,n,r=s(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={imgHidden:!0,imgList:[],paraHidden:!0,titleHidden:!0,moreHidden:!0,listHidden:!0},t}return e=a,(t=[{key:"onClickLeft",value:function(e){this.props.onClickLeft(e)}},{key:"onClickRight",value:function(e){this.props.onClickRight(e)}},{key:"listMouseOver",value:function(){window.clearTimeout(this.listTimer),this.setState({listHidden:!1})}},{key:"listMouseOut",value:function(){var e=this;this.listTimer=window.setTimeout(function(){e.setState({listHidden:!0})},150)}},{key:"paraMouseOver",value:function(){window.clearTimeout(this.paraTimer),this.setState({paraHidden:!1})}},{key:"paraMouseOut",value:function(){var e=this;this.paraTimer=window.setTimeout(function(){e.setState({paraHidden:!0})},150)}},{key:"titleMouseOver",value:function(){window.clearTimeout(this.titleTimer),this.setState({titleHidden:!1})}},{key:"titleMouseOut",value:function(){var e=this;this.titleTimer=window.setTimeout(function(){e.setState({titleHidden:!0})},150)}},{key:"moreMouseOver",value:function(){window.clearTimeout(this.moreTimer),this.setState({moreHidden:!1})}},{key:"moreMouseOut",value:function(){var e=this;this.moreTimer=window.setTimeout(function(){e.setState({moreHidden:!0})},150)}},{key:"imgClick",value:function(){this.setState({imgHidden:!this.state.imgHidden})}},{key:"imgMouseOver",value:function(){window.clearTimeout(this.timer),this.setState({imgHidden:!1})}},{key:"imgMouseOut",value:function(){var e=this;this.timer=window.setTimeout(function(){e.setState({imgHidden:!0})},150)}},{key:"addImgUrl",value:function(){this.props.onClickLeft("img")}},{key:"addImgFile",value:function(e){var t=this.state.imgList,n=t.length;t.push(e.target.files[0]),this.setState({imgList:t}),this.props.addImg(e.target.files[0],n),e.target.value=""}},{key:"render",value:function(){var e=this,t=this.state,n=t.imgHidden,r=t.paraHidden,a=t.titleHidden,o=(t.moreHidden,t.listHidden,this.props),l=o.preview,i=o.expand,s=o.subfield,u=(0,p.default)({"k-active":l}),c=(0,p.default)({"k-active":i}),f=(0,p.default)({"k-active":s});return d.default.createElement("div",{className:"k-wrapper"},d.default.createElement("div",{className:"k-pc"},d.default.createElement("ul",null,d.default.createElement("li",{onClick:function(){return e.onClickLeft("undo")},title:"undo (ctrl+z)"},d.default.createElement("span",{className:"material-icon"},"undo")),d.default.createElement("li",{onClick:function(){return e.onClickLeft("redo")},title:"redo (ctrl+y)"},d.default.createElement("span",{className:"material-icon"},"redo")),d.default.createElement("li",{className:"k-toolbar-title",onMouseOver:function(){return e.titleMouseOver()},onMouseOut:function(){return e.titleMouseOut()},onClick:function(){return e.titleMouseOut()}},d.default.createElement("span",{className:"material-icon"},"title"),d.default.createElement("ul",{style:a?{display:"none"}:{}},d.default.createElement("li",{onClick:function(){return e.onClickLeft("h1")},title:"Header 1"},"Header 1"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("h2")},title:"Header 2"},"Header 2"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("h3")},title:"Header 3"},"Header 3"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("h4")},title:"Header 4"},"Header 4"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("h5")},title:"Header 5"},"Header 5"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("h6")},title:"Header 6"},"Header 6"))),d.default.createElement("li",{className:"k-toolbar-para",onMouseOver:function(){return e.paraMouseOver()},onMouseOut:function(){return e.paraMouseOut()},onClick:function(){return e.paraMouseOut()}},d.default.createElement("span",{className:"material-icon"},"text_fields"),d.default.createElement("ul",{style:r?{display:"none"}:{}},d.default.createElement("li",{onClick:function(){return e.onClickLeft("italic")},title:"italic"},"italic"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("bold")},title:"bold"},"bold"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("bolditalic")},title:"bolditalic"},"bolditalic"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("delline")},title:"strike through"},"strike through"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("underline")},title:"underline"},"underline"))),d.default.createElement("li",{className:"k-toolbar-img",onMouseOver:function(){return e.imgMouseOver()},onMouseOut:function(){return e.imgMouseOut()},onClick:function(){return e.imgMouseOut()}},d.default.createElement("span",{className:"material-icon"},"perm_media"),d.default.createElement("ul",{style:n?{display:"none"}:{}},d.default.createElement("li",{onClick:function(){return e.addImgUrl()}},"Insert image link"),d.default.createElement(m.default,{disable:this.props.loading}))),d.default.createElement("li",{onClick:function(){return e.onClickLeft("quote")},title:"quote"},d.default.createElement("span",{className:"material-icon"},"format_quote")),d.default.createElement("li",{onClick:function(){return e.onClickLeft("link")},title:"link"},d.default.createElement("span",{className:"material-icon"},"link")),d.default.createElement("li",{onClick:function(){return e.onClickLeft("code")},title:"code"},d.default.createElement("span",{className:"material-icon"},"code")),d.default.createElement("li",{onClick:function(){return e.onClickLeft("spoiler")},title:"spoiler"},d.default.createElement("span",{className:"material-icon"},"priority_high")))),d.default.createElement("div",{className:"k-mobile"},d.default.createElement("ul",null,d.default.createElement("li",{onClick:function(){return e.onClickLeft("undo")},title:"undo (ctrl+z)"},d.default.createElement("span",{className:"material-icon"},"undo")),d.default.createElement("li",{onClick:function(){return e.onClickLeft("redo")},title:"redo (ctrl+y)"},d.default.createElement("span",{className:"material-icon"},"redo")),d.default.createElement("li",{className:"k-toolbar-title",onMouseOver:function(){return e.titleMouseOver()},onMouseOut:function(){return e.titleMouseOut()},onClick:function(){return e.titleMouseOut()}},d.default.createElement("span",{className:"material-icon"},"title"),d.default.createElement("ul",{style:a?{display:"none"}:{}},d.default.createElement("li",{onClick:function(){return e.onClickLeft("h1")},title:"Header 1"},"Header 1"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("h2")},title:"Header 2"},"Header 2"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("h3")},title:"Header 3"},"Header 3"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("h4")},title:"Header 4"},"Header 4"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("h5")},title:"Header 5"},"Header 5"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("h6")},title:"Header 6"},"Header 6"))),d.default.createElement("li",{className:"k-toolbar-para",onMouseOver:function(){return e.paraMouseOver()},onMouseOut:function(){return e.paraMouseOut()},onClick:function(){return e.paraMouseOut()}},d.default.createElement("span",{className:"material-icon"},"text_fields"),d.default.createElement("ul",{style:r?{display:"none"}:{}},d.default.createElement("li",{onClick:function(){return e.onClickLeft("italic")},title:"italic"},"italic"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("bold")},title:"bold"},"bold"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("bolditalic")},title:"bolditalic"},"bolditalic"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("delline")},title:"strike through"},"strike through"),d.default.createElement("li",{onClick:function(){return e.onClickLeft("underline")},title:"underline"},"underline"))),d.default.createElement("li",{className:"k-toolbar-img",onMouseOver:function(){return e.imgMouseOver()},onMouseOut:function(){return e.imgMouseOut()},onClick:function(){return e.imgMouseOut()}},d.default.createElement("span",{className:"material-icon"},"perm_media"),d.default.createElement("ul",{style:n?{display:"none"}:{}},d.default.createElement("li",{onClick:function(){return e.addImgUrl()}},"Insert image link"),d.default.createElement(m.default,{disable:this.props.loading}))),d.default.createElement("li",{onClick:function(){return e.onClickLeft("quote")},title:"quote"},d.default.createElement("span",{className:"material-icon"},"format_quote")),d.default.createElement("li",{onClick:function(){return e.onClickLeft("link")},title:"link"},d.default.createElement("span",{className:"material-icon"},"link")),d.default.createElement("li",{onClick:function(){return e.onClickLeft("code")},title:"code"},d.default.createElement("span",{className:"material-icon"},"code")),d.default.createElement("li",{onClick:function(){return e.onClickLeft("spoiler")},title:"spoiler"},d.default.createElement("span",{className:"material-icon"},"priority_high")))),d.default.createElement("div",{className:"k-right-pc"},d.default.createElement("ul",null,d.default.createElement("li",{className:c,onClick:function(){return e.onClickRight("expand")},title:c},c?d.default.createElement("span",{className:"material-icon"},"fullscreen_exit"):d.default.createElement("span",{className:"material-icon"},"fullscreen")),d.default.createElement("li",{className:u,onClick:function(){return e.onClickRight("preview")},title:"preview"},u?d.default.createElement("span",{className:"material-icon"},"visibility"):d.default.createElement("span",{className:"material-icon"},"visibility_off")),d.default.createElement("li",{className:f,onClick:function(){return e.onClickRight("subfield")},title:f?"Split preview":"Merge split"},d.default.createElement("span",{className:"material-icon"},"chrome_reader_mode")))),d.default.createElement("div",{className:"k-right-mobile"},d.default.createElement("ul",null,d.default.createElement("li",{className:c,onClick:function(){return e.onClickRight("expand")},title:c},c?d.default.createElement("span",{className:"material-icon"},"fullscreen_exit"):d.default.createElement("span",{className:"material-icon"},"fullscreen")),d.default.createElement("li",{className:u,onClick:function(){return e.onClickRight("preview")},title:"preview"},u?d.default.createElement("span",{className:"material-icon"},"visibility"):d.default.createElement("span",{className:"material-icon"},"visibility_off")))))}}])&&o(e.prototype,t),n&&o(e,n),a}();n.default=a},{"../attachments/upload-button":42,classnames:1,react:"react"}],45:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Protect=O,n.default=void 0;var p=r(e("react")),m=r(e("./attachments")),l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("./textutils")),h=r(e("../button")),a=r(e("../..")),y=r(e("classnames")),b=r(e("../../services/marked")),v=r(e("./components/toolbar")),i=e("./utils/helper/text"),s=r(e("./utils/helper/keyboard"));function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=E(o);return t=l?(e=E(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==c(r)&&"function"!=typeof r?_(n):r}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,p.default.Component);var e,t,n,r=g(o);function o(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),w(_(a=r.call(this,e)),"_areYouSure",function(e){var t=a.state,n=t.areYouReallySure,r=t.historyIndex;if(console.log(e),0!=r&&!n)return a.setState({areYouReallySure:!0}),"Are you sure you want leave ? The changes will not be saved."}),w(_(a),"onKeyDown",function(e){(0,s.default)(e,function(e){a.leftToolBarClick(e)})}),w(_(a),"replaceSelection",function(e){e(l.getSelectionText(),a._replaceSelection)}),w(_(a),"_replaceSelection",function(e){a.props.onChange(l.replace(e))}),w(_(a),"resize",function(){window.matchMedia("(min-width: 768px)").matches?a.setState({preview:!0,subfield:!0,expand:a.props.expand}):a.setState({preview:!1,subfield:!1})}),w(_(a),"focusText",function(){a.textarea.focus(),a.textarea.scrollTop=a.textarea.scrollHeight,a.textarea.setSelectionRange(a.textarea.value.length,a.textarea.value.length)}),w(_(a),"reHeight",function(){a.textarea.style.height="",a.textarea.style.height=a.textarea.scrollHeight+"px"}),w(_(a),"saveHistory",function(e){var t=a.state,n=t.history,r=t.historyIndex;n.splice(r+1,n.length),20<=n.length&&n.shift(),r=n.length,n.push(e),a.setState({history:n,historyIndex:r})}),w(_(a),"undo",function(){var e=a.state,t=e.history,n=e.historyIndex;--n<0||(a.props.onChange(t[n]),a.setState({historyIndex:n}))}),w(_(a),"redo",function(){var e=a.state,t=e.history,n=e.historyIndex;(n+=1)>=t.length||(a.props.onChange(t[n]),a.setState({historyIndex:n}))}),w(_(a),"leftToolBarClick",function(e){var t,n={h1:{prefix:"# ",subfix:"",str:"Header 1"},h2:{prefix:"## ",subfix:"",str:"Header 2"},h3:{prefix:"### ",subfix:"",str:"Header 3"},h4:{prefix:"#### ",subfix:"",str:"Header 4"},h5:{prefix:"##### ",subfix:"",str:"Header 5"},h6:{prefix:"###### ",subfix:"",str:"Header 6"},quote:{prefix:"[quote= @",subfix:"]\n[/quote]",str:"username"},italic:{prefix:"_",subfix:"_",str:"italic"},bold:{prefix:"**",subfix:"**",str:"bold"},bolditalic:{prefix:"***",subfix:"***",str:"bold italic"},delline:{prefix:"~~",subfix:"~~",str:"delete line"},underline:{prefix:"<u>",subfix:"</u>",str:"underline"},superscript:{prefix:"x<sup>",subfix:"</sup>",str:"y"},subscript:{prefix:"a<sub>",subfix:"</sub>",str:""},table:{prefix:"",subfix:"",str:"| title      | description     |\n| ---------- | --------------- |\n| for-editor | markdown editor |\n"},img:{prefix:"![alt](",subfix:")",str:"url"},link:{prefix:"[title](",subfix:")",str:"url"},orderlist:{prefix:"\n1. ",subfix:"",str:"item"},disorderlist:{prefix:"\n- ",subfix:"",str:"item"},checklist:{prefix:"\n- [x] ",subfix:"",str:"item"},inlinecode:{prefix:"`",subfix:"`",str:"inlinecode"},code:{prefix:"```",subfix:"\n\n```",str:"language"},tab:{prefix:"  ",subfix:"",str:""},spoiler:{prefix:"[spoiler]\n",subfix:"\n[/spoiler]",str:""}};n.hasOwnProperty(e)&&(t=(0,i.insertText)(n[e]),a.props.onChange(t));var r={undo:a.undo,redo:a.redo,esc:a.exitFullScreen};r.hasOwnProperty(e)&&r[e]()}),w(_(a),"exitFullScreen",function(){a.setState({expand:!1})}),w(_(a),"rightToolbarClick",function(e){var t={preview:function(){a.setState({preview:!a.state.preview})},expand:function(){a.setState({expand:!a.state.expand})},subfield:function(){var e=a.state,t=e.preview,n=e.subfield;n&&a.reHeight(),t?n?a.setState({subfield:!1,preview:!1}):a.setState({subfield:!0}):n?a.setState({subfield:!1}):a.setState({preview:!0,subfield:!0})}};t.hasOwnProperty(e)&&t[e]()}),w(_(a),"handleChange",function(e){var t=e.target.value;a.props.onChange(t)}),a.state={lineIndex:1,preview:!1,expand:e.expand,subfield:!1,history:[],historyIndex:0,mobile:!1,allowPrompt:!0,areYouReallySure:!1},a}return e=o,(t=[{key:"componentDidMount",value:function(){var r=this;this.textarea=document.getElementById("editor-textarea"),this.blockEdit=document.getElementById("blockEdit"),this.reHeight(),this.focusText(),$("#editor-textarea").atwho({at:"@",displayTpl:'<li><img src="${avatar}" alt="">${username}</li>',insertTpl:"@${username}",searchKey:"username",callbacks:{remoteFilter:function(e,t){$.getJSON(a.default.get("MENTION_API"),{q:e},t)}}}),$("#editor-textarea").on("inserted.atwho",function(e,t,n){r.props.onChange(e.target.value)}),this.resize(),window.addEventListener("resize",function(){r.resize()}),$(window).on("beforeunload",function(e){return r._areYouSure(e)}),$(document).on("submit","form",function(e){console.log(e),$(window).off("beforeunload")})}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.state,r=n.historyIndex,a=n.history,o=this.props.value;o!==e.value&&this.reHeight(),o!==a[r]&&(window.clearTimeout(this.currentTimeout),this.currentTimeout=window.setTimeout(function(){t.saveHistory(o)},500))}},{key:"render",value:function(){var t=this,e=this.state,n=e.preview,r=e.expand,a=e.subfield,o=this.props,l=o.value,i=o.loading,s=o.height,u=o.fontSize,c=(0,y.default)({"k-container":!0,"k-fullscreen":r}),f=(0,y.default)({"k-editor-edit":!0,"k-panel":!0,"k-active":n&&a,"k-edit-preview":n&&!a}),d=(0,y.default)({"k-panel":!0,"k-editor-preview":!0,"k-active":n&&a});return p.default.createElement("div",{className:c,style:{height:s}},p.default.createElement(v.default,{expand:r,subfield:a,preview:n,onClickLeft:this.leftToolBarClick,onClickRight:this.rightToolbarClick,loading:i}),p.default.createElement("div",{className:"k-editor",style:{fontSize:u}},p.default.createElement("div",{className:f,id:"blockEdit",onClick:this.focusText},p.default.createElement("div",{className:"k-editor-block"},p.default.createElement("div",{className:"k-editor-content"},p.default.createElement("pre",{id:"true-value"},l),p.default.createElement("textarea",{value:l,disabled:i,id:"editor-textarea",onChange:function(e){return t.handleChange(e)},onKeyDown:this.onKeyDown,placeholder:"Write Something"})))),p.default.createElement("div",{className:d},p.default.createElement("div",{id:"k-preview",className:"k-preview k-markdown-preview",dangerouslySetInnerHTML:{__html:(0,b.default)(l)}}))),p.default.createElement("div",{className:"editor-footer",style:{overflow:"hidden",padding:"10px"}},p.default.createElement(h.default,{className:"btn-primary btn-sm pull-right",loading:this.props.loading},this.props.submitLabel||gettext("Post")),p.default.createElement("button",{className:"btn btn-default btn-sm pull-right",disabled:this.props.loading,onClick:this.props.onCancel,type:"button"},gettext("Cancel")),p.default.createElement("div",{className:"clearfix visible-xs-block"}),p.default.createElement(O,{canProtect:this.props.canProtect,disabled:this.props.loading,onProtect:this.props.onProtect,onUnprotect:this.props.onUnprotect,protect:this.props.protect})),p.default.createElement(m.default,{attachments:this.props.attachments,onAttachmentsChange:this.props.onAttachmentsChange,placeholder:this.props.placeholder,replaceSelection:this.replaceSelection}))}}])&&f(e.prototype,t),n&&f(e,n),o}();function O(e){if(!e.canProtect)return null;var t=e.protect?gettext("Protected"):gettext("Protect");return p.default.createElement("button",{className:"btn btn-icon btn-default btn-protect btn-sm pull-right",disabled:e.disabled,onClick:e.protect?e.onUnprotect:e.onProtect,title:t,type:"button"},p.default.createElement("span",{className:"material-icon"},e.protect?"lock":"lock_outline"),p.default.createElement("span",{className:"btn-text hidden-md hidden-lg"},t))}w(n.default=o,"defaultProps",{fontSize:"18px",expand:!0})},{"../..":296,"../../services/marked":364,"../button":10,"./attachments":40,"./components/toolbar":44,"./textutils":46,"./utils/helper/keyboard":47,"./utils/helper/text":48,classnames:1,react:"react"}],46:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getTextarea=o,n.getValue=a,n.getSelectionRange=l,n.getSelection=i,n.getSelectionText=function(){var e=i();return $.trim(a().substring(e.start,e.end))},n.setSelection=s,n._replace=u,n.replace=function(e){return u(i(),e)},n.textareaId=void 0;var r="editor-textarea";function o(){return document.getElementById(r)}function a(){return document.getElementById(r).value}function l(e,t){return{start:e,end:t}}function i(){var e=o();if(document.selection){e.focus();var t=document.selection.createRange(),n=t.text.length;return t.moveStart("character",-e.value.length),l(t.text.length-n,t.text.length)}if(e.selectionStart||"0"==e.selectionStart)return l(e.selectionStart,e.selectionEnd)}function s(e){var t,n=o();n.setSelectionRange?(n.focus(),n.setSelectionRange(e.start,e.end)):n.createTextRange&&((t=n.createTextRange()).collapse(!0),t.moveStart("character",e.start),t.moveEnd("character",e.end),t.select())}function u(e,t){var n=o(),r=n.value,a=r.substring(0,e.start);return n.value=r.substring(0,e.start)+t+r.substring(e.end),s(l(a.length+t.length,a.length+t.length)),n.value}n.textareaId=r},{}],47:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=27,a=66,o=73,l=85,i=90,s=89,u=9;n.default=function(e,t){if(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey){if((e.ctrlKey||e.metaKey)&&!e.altKey&&!e.shiftKey)switch(e.keyCode){case i:e.preventDefault(),t("undo");break;case s:e.preventDefault(),t("redo");break;case a:e.preventDefault(),t("bold");break;case o:e.preventDefault(),t("italic");break;case l:e.preventDefault(),t("underline");break;default:return}}else switch(e.keyCode){case u:e.preventDefault(),t("tab");break;case r:e.preventDefault(),t("esc");break;default:return}}},{}],48:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.insertText=function(e){var t=document.getElementById("editor-textarea"),n=e.prefix,r=e.str,a=void 0===r?"":r,o=e.subfix,l=void 0===o?"":o,i=t.value;{var s,u,c;!t.selectionStart&&0!==t.selectionStart||(s=t.selectionStart,u=t.selectionEnd,c=t.scrollTop,s===u?(t.value=i.substring(0,s)+n+a+l+i.substring(u,i.length),t.selectionStart=s+n.length,t.selectionEnd=u+n.length+a.length):(t.value=i.substring(0,s)+n+i.substring(s,u)+l+i.substring(u,i.length),t.selectionStart=s+n.length,t.selectionEnd=u+n.length),t.focus(),0<=c&&(t.scrollTop=c))}return t.value}},{}],49:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,n,r=u(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"isValidated",value:function(){return void 0!==this.props.validation}},{key:"getClassName",value:function(){var e="form-group";return this.isValidated()&&(e+=" has-feedback",null===this.props.validation?e+=" has-success":e+=" has-error"),e}},{key:"getFeedback",value:function(){var n=this;return this.props.validation?o.default.createElement("div",{className:"help-block errors"},this.props.validation.map(function(e,t){return o.default.createElement("p",{key:n.props.for+"FeedbackItem"+t},e)})):null}},{key:"getFeedbackDescription",value:function(){return this.isValidated()?o.default.createElement("span",{id:this.props.for+"_status",className:"sr-only"},this.props.validation?gettext("(error)"):gettext("(success)")):null}},{key:"getHelpText",value:function(){return this.props.helpText?o.default.createElement("p",{className:"help-block"},this.props.helpText):null}},{key:"render",value:function(){return o.default.createElement("div",{className:this.getClassName()},o.default.createElement("label",{className:"control-label "+(this.props.labelClass||""),htmlFor:this.props.for||""},this.props.label+":"),o.default.createElement("div",{className:this.props.controlClass||""},this.props.children,this.getFeedbackDescription(),this.getFeedback(),this.getHelpText(),this.props.extra||null))}}])&&l(e.prototype,t),n&&l(e,n),a}();n.default=a},{react:"react"}],50:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=o(e("react")),r=e("../utils/validators"),l=o(e("../services/snackbar"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=d(o);return t=l?(e=d(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?f(n):r}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=(0,r.required)(),h=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,a.default.Component);var e,t,n,r=c(o);function o(){var a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p(f(a=r.call.apply(r,[this].concat(t))),"bindInput",function(t){return function(e){a.changeValue(t,e.target.value)}}),p(f(a),"changeValue",function(e,t){var n=p({},e,t),r=a.state.errors||{};r[e]=a.validateField(e,n[e]),n.errors=r,a.setState(n)}),p(f(a),"handleSubmit",function(e){var t;e&&e.preventDefault(),a.state.isLoading||a.clean()&&(a.setState({isLoading:!0}),(t=a.send())?t.then(function(e){a.setState({isLoading:!1}),a.handleSuccess(e)},function(e){a.setState({isLoading:!1}),a.handleError(e)}):a.setState({isLoading:!1}))}),a}return e=o,(t=[{key:"validate",value:function(){var e={};if(!this.state.validators)return e;var t={required:this.state.validators.required||this.state.validators,optional:this.state.validators.optional||{}},n=[];for(var r in t.required)t.required.hasOwnProperty(r)&&t.required[r]&&n.push(r);for(var a in t.optional)t.optional.hasOwnProperty(a)&&t.optional[a]&&n.push(a);for(var o in n){var l=n[o],i=this.validateField(l,this.state[l]);null===i?e[l]=null:i&&(e[l]=i)}return e}},{key:"isValid",value:function(){var e=this.validate();for(var t in e)if(e.hasOwnProperty(t)&&null!==e[t])return!1;return!0}},{key:"validateField",value:function(e,t){var n=[];if(!this.state.validators)return n;var r={required:(this.state.validators.required||this.state.validators)[e],optional:(this.state.validators.optional||{})[e]},a=m(t)||!1;if(r.required){if(a)n=[a];else for(var o in r.required){var l=r.required[o](t);l&&n.push(l)}return n.length?n:null}if(!1===a&&r.optional){for(var i in r.optional){var s=r.optional[i](t);s&&n.push(s)}return n.length?n:null}return!1}},{key:"clean",value:function(){return!0}},{key:"send",value:function(){return null}},{key:"handleSuccess",value:function(){}},{key:"handleError",value:function(e){l.default.apiError(e)}}])&&s(e.prototype,t),n&&s(e,n),o}();n.default=h},{"../services/snackbar":371,"../utils/validators":387,react:"react"}],51:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,n,r=u(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"isActive",value:function(){return this.props.isControlled?this.props.isActive:!!this.props.path&&0===document.location.pathname.indexOf(this.props.path)}},{key:"getClassName",value:function(){return this.isActive()?(this.props.className||"")+" "+(this.props.activeClassName||"active"):this.props.className||""}},{key:"render",value:function(){return o.default.createElement("li",{className:this.getClassName()},this.props.children)}}])&&l(e.prototype,t),n&&l(e,n),a}();n.default=a},{react:"react"}],52:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement("div",{className:e.className||"loader"},a.default.createElement("div",{className:"loader-spinning-wheel"}))};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],53:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.BestAnswerSelect=v,n.PollSelect=g,n.default=void 0;var o=r(e("react")),l=r(e("./button")),i=r(e("./form")),a=r(e("./form-group")),s=r(e("../services/ajax")),u=r(e("../services/modal"));function r(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==c(r)&&"function"!=typeof r?m(n):r}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,i.default);var e,t,n,r=p(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),y(m(t=r.call(this,e)),"handleSuccess",function(e){t.props.onSuccess(e),u.default.hide()}),y(m(t),"handleError",function(e){t.props.onError(e)}),y(m(t),"onBestAnswerChange",function(e){t.changeValue("bestAnswer",e.target.value)}),y(m(t),"onPollChange",function(e){t.changeValue("poll",e.target.value)}),t.state={isLoading:!1,bestAnswer:"0",poll:"0"},t}return e=a,(t=[{key:"clean",value:function(){return!this.props.polls||"0"!==this.state.poll||confirm(gettext("Are you sure you want to delete all polls?"))}},{key:"send",value:function(){var e=Object.assign({},this.props.data,{best_answer:this.state.bestAnswer,poll:this.state.poll});return s.default.post(this.props.api,e)}},{key:"render",value:function(){return o.default.createElement("div",{className:"modal-dialog",role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Merge threads"))),o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"modal-body"},o.default.createElement(v,{choices:this.props.bestAnswers,onChange:this.onBestAnswerChange,value:this.state.bestAnswer}),o.default.createElement(g,{choices:this.props.polls,onChange:this.onPollChange,value:this.state.poll})),o.default.createElement("div",{className:"modal-footer"},o.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),o.default.createElement(l.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Merge threads"))))))}}])&&f(e.prototype,t),n&&f(e,n),a}();function v(e){var t=e.choices,n=e.onChange,r=e.value;return t?o.default.createElement(a.default,{label:gettext("Best answer"),helpText:gettext("Please select the best answer for your newly merged thread. No posts will be deleted during the merge."),for:"id_best_answer"},o.default.createElement("select",{className:"form-control",id:"id_best_answer",onChange:n,value:r},t.map(function(e){return o.default.createElement("option",{value:e[0],key:e[0]},e[1])}))):null}function g(e){var t=e.choices,n=e.onChange,r=e.value;return t?o.default.createElement(a.default,{label:gettext("Poll"),helpText:gettext("Please select the poll for your newly merged thread. Rejected polls will be permanently deleted and cannot be recovered."),for:"id_poll"},o.default.createElement("select",{className:"form-control",id:"id_poll",onChange:n,value:r},t.map(function(e){return o.default.createElement("option",{value:e[0],key:e[0]},e[1])}))):null}n.default=b},{"../services/ajax":359,"../services/modal":366,"./button":10,"./form":50,"./form-group":49,react:"react"}],54:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../services/one-box"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"componentDidMount",value:function(){l.default.render(this.documentNode),$(this.documentNode).find(".spoiler-reveal").click(d)}},{key:"componentDidUpdate",value:function(){l.default.render(this.documentNode),$(this.documentNode).find(".spoiler-reveal").click(d)}},{key:"shouldComponentUpdate",value:function(e){return e.markup!==this.props.markup}},{key:"render",value:function(){var t=this;return o.default.createElement("article",{className:"misago-markup",dangerouslySetInnerHTML:{__html:this.props.markup},ref:function(e){t.documentNode=e}})}}])&&s(e.prototype,t),n&&s(e,n),a}();function d(e){var t=e.target;$(t).parent().parent().addClass("revealed")}n.default=a},{"../services/one-box":367,react:"react"}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("./loader"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",{className:"modal-body modal-loader"},o.default.createElement(l.default,null))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"./loader":52,react:"react"}],56:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("./panel-message"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,l.default);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getHelpText",value:function(){return this.props.helpText?o.default.createElement("p",{className:"help-block"},this.props.helpText):null}},{key:"render",value:function(){return o.default.createElement("div",{className:"modal-body"},o.default.createElement("div",{className:"message-icon"},o.default.createElement("span",{className:"material-icon"},this.props.icon||"info_outline")),o.default.createElement("div",{className:"message-body"},o.default.createElement("p",{className:"lead"},this.props.message),this.getHelpText(),o.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},gettext("Ok"))))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"./panel-message":88,react:"react"}],57:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.filter(function(e){return 0<e.results.count}).map(function(e){return Object.assign({},e,{count:e.results.count,results:e.results.results.slice(0,r)})})};var r=5},{}],58:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FOOTER=n.RESULT=n.HEADER=void 0;n.HEADER="HEADER";n.RESULT="RESULT";n.FOOTER="FOOTER"},{}],59:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.children,n=e.onChange,r=e.query;return a.default.createElement("ul",{className:"dropdown-menu dropdown-search-results",role:"menu"},a.default.createElement("li",{className:"form-group"},a.default.createElement(o.default,{value:r,onChange:n})),t)};var a=r(e("react")),o=r(e("./input"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./input":63,react:"react"}],60:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return a.default.createElement("li",{className:"dropdown-search-message"},gettext("Search returned no results."))};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],61:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=[];return function(e,t){for(var n=e.length,r=0;r<n;r++){var a=e[r];t.push({provider:a,type:o.HEADER}),function(e,t){for(var n=e.results.length,r=0;r<n;r++){var a=e.results[r];t.push({provider:e,result:a,type:o.RESULT})}t.push({provider:e,type:o.FOOTER})}(a,t)}}(e,t),t};var o=e("./constants")},{"./constants":58}],62:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.isLoading,n=e.onChange,r=e.results,a=e.query;if(!a.trim().length)return l.default.createElement(s.default,{onChange:n,query:a});{if(r.length){var o=(0,d.default)(r);return l.default.createElement(s.default,{onChange:n,query:a},o.map(function(e){var t=e.type,n=e.provider,r=e.result;return t===i.RESULT?l.default.createElement(f.default,p({key:[n.id,t,r.id].join("_")},e)):l.default.createElement(f.default,p({key:[n.id,t].join("_"),query:a},e))}))}if(t)return l.default.createElement(s.default,{onChange:n,query:a},l.default.createElement(c.default,null))}return l.default.createElement(s.default,{onChange:n,query:a},l.default.createElement(u.default,null))};var l=r(e("react")),i=e("./constants"),s=r(e("./dropdown-menu")),u=r(e("./empty")),c=r(e("./loader")),f=r(e("./result")),d=r(e("./flatten-results"));function r(e){return e&&e.__esModule?e:{default:e}}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},{"./constants":58,"./dropdown-menu":59,"./empty":60,"./flatten-results":61,"./loader":64,"./result":67,react:"react"}],63:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.value,n=e.onChange;return a.default.createElement("input",{"aria-haspopup":"true","aria-expanded":"false","aria-controls":"dropdown-menu dropdown-search-results",autoComplete:"off",className:"form-control",value:t,onChange:n,placeholder:gettext("Search"),role:"combobox",type:"text"})};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],64:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){e.message;return r.default.createElement("li",{className:"dropdown-search-loader"},r.default.createElement(a.default,null))};var r=o(e("react")),a=o(e("../../loader"));function o(e){return e&&e.__esModule?e:{default:e}}},{"../../loader":52,react:"react"}],65:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.provider,n=e.query,r=t.url+"?q="+encodeURI(n),a=ngettext('See full "%(provider)s" results page with %(count)s result.','See full "%(provider)s" results page with %(count)s results.',t.count);return o.default.createElement("li",{className:"dropdown-search-footer"},o.default.createElement("a",{href:r},interpolate(a,{count:t.count,provider:t.name},!0)))};var r,o=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],66:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.provider;return a.default.createElement("li",{className:"dropdown-search-header"},t.name)};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],67:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.provider,n=e.result,r=e.type,a=e.query;{if(r===l.HEADER)return o.default.createElement(s.default,{provider:t});if(r===l.FOOTER)return o.default.createElement(i.default,{provider:t,query:a})}return o.default.createElement(u.default,{provider:t,result:n})};var o=r(e("react")),l=e("../constants"),i=r(e("./footer")),s=r(e("./header")),u=r(e("./result"));function r(e){return e&&e.__esModule?e:{default:e}}},{"../constants":58,"./footer":65,"./header":66,"./result":68,react:"react"}],68:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.provider,n=e.result;return"threads"!==t.id?r.default.createElement(o.default,{result:n}):r.default.createElement(a.default,{result:n})};var r=l(e("react")),a=l(e("./thread")),o=l(e("./user"));function l(e){return e&&e.__esModule?e:{default:e}}},{"./thread":69,"./user":70,react:"react"}],69:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.result,n=(t.poster,t.thread),r=gettext("Posted by %(poster)s on %(posted_on)s in %(category)s.");return o.default.createElement("li",null,o.default.createElement("a",{href:t.url.index,className:"dropdown-search-thread"},o.default.createElement("h5",null,n.title),o.default.createElement("small",{className:"dropdown-search-post-content"},$(t.content).text()),o.default.createElement("small",{className:"dropdown-search-post-footer"},interpolate(r,{category:t.category.name,posted_on:(0,a.default)(t.posted_on).format("LL"),poster:t.poster_name},!0))))};var a=r(e("moment")),o=r(e("react"));function r(e){return e&&e.__esModule?e:{default:e}}},{moment:"moment",react:"react"}],70:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.result,n=t.rank,r=gettext("%(title)s, joined on %(joined_on)s"),a=t.title||n.title||n.name;return l.default.createElement("li",null,l.default.createElement("a",{href:t.url,className:"dropdown-search-user"},l.default.createElement("div",{className:"media"},l.default.createElement("div",{className:"media-left"},l.default.createElement(i.default,{size:38,user:t})),l.default.createElement("div",{className:"media-body"},l.default.createElement("h5",{className:"media-heading"},t.username),l.default.createElement("small",null,interpolate(r,{title:a,joined_on:(0,o.default)(t.joined_on).format("LL")},!0))))))};var o=r(e("moment")),l=r(e("react")),i=r(e("../../../avatar"));function r(e){return e&&e.__esModule?e:{default:e}}},{"../../../avatar":8,moment:"moment",react:"react"}],71:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("react")),l=a(e("../../services/ajax")),i=a(e("../../services/snackbar")),s=a(e("../..")),u=a(e("./clean-results")),c=a(e("./dropdown"));function a(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?h(n):r}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,r.default.Component);var e,t,n,a=m(o);function o(){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),b(h(r=a.call(this)),"onToggle",function(e){r.setState(function(e,t){return e.isOpen||window.setTimeout(function(){r.container.querySelector("input").focus()},100),{isOpen:!e.isOpen}})}),b(h(r),"onDocumentMouseDown",function(e){for(var t=!0,n=e.target;null!==n&&n!==document;){if(n===r.container)return void(t=!1);n=n.parentNode}t&&r.setState({isOpen:!1})}),b(h(r),"onEscape",function(e){"Escape"===e.key&&r.setState({isOpen:!1})}),b(h(r),"onChange",function(e){var t=e.target.value;r.setState({query:t}),r.loadResults(t.trim())}),r.state={isLoading:!1,isOpen:!1,query:"",results:[]},r.intervalId=null,r}return e=o,(t=[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.onDocumentMouseDown),document.addEventListener("keydown",this.onEscape)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.onDocumentMouseDown),document.removeEventListener("keydown",this.onEscape)}},{key:"loadResults",value:function(e){var t,n=this;e.length&&(t=300+300*Math.random(),this.intervalId&&window.clearTimeout(this.intervalId),this.setState({isLoading:!0}),this.intervalId=window.setTimeout(function(){l.default.get(s.default.get("SEARCH_API"),{q:e}).then(function(e){n.setState({intervalId:null,isLoading:!1,results:(0,u.default)(e)})},function(e){i.default.apiError(e),n.setState({intervalId:null,isLoading:!1,results:[]})})},t))}},{key:"render",value:function(){var t=this,e="navbar-search dropdown";return this.state.isOpen&&(e+=" open"),r.default.createElement("div",{className:e,ref:function(e){return t.container=e}},r.default.createElement("a",{"aria-haspopup":"true","aria-expanded":"false",className:"navbar-icon","data-toggle":"dropdown",href:s.default.get("SEARCH_URL"),onClick:this.onToggle},r.default.createElement("i",{className:"material-icon"},"search")),r.default.createElement(c.default,{isLoading:this.state.isLoading,onChange:this.onChange,results:this.state.results,query:this.state.query}))}}])&&d(e.prototype,t),n&&d(e,n),o}();n.default=o},{"../..":296,"../../services/ajax":359,"../../services/snackbar":371,"./clean-results":57,"./dropdown":62,react:"react"}],72:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return r.default.createElement("div",{className:"panel panel-default panel-form"},r.default.createElement("div",{className:"panel-heading"},r.default.createElement("h3",{className:"panel-title"},gettext("Change username"))),r.default.createElement(a.default,null))};var r=o(e("react")),a=o(e("../../panel-loader"));function o(e){return e&&e.__esModule?e:{default:e}}},{"../../panel-loader":87,react:"react"}],73:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../../panel-message"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getHelpText",value:function(){return this.props.options.next_on?interpolate(gettext("You will be able to change your username %(next_change)s."),{next_change:this.props.options.next_on.fromNow()},!0):gettext("You have used up available name changes.")}},{key:"render",value:function(){return o.default.createElement("div",{className:"panel panel-default panel-form"},o.default.createElement("div",{className:"panel-heading"},o.default.createElement("h3",{className:"panel-title"},gettext("Change username"))),o.default.createElement(l.default,{helpText:this.getHelpText(),message:gettext("You can't change your username at the moment.")}))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"../../panel-message":88,react:"react"}],74:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../../button")),i=r(e("../../form")),s=r(e("../../form-group")),u=r(e("../../../services/ajax")),c=r(e("../../../services/snackbar")),f=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../utils/validators"));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=b(o);return t=l?(e=b(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==p(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,i.default);var e,t,n,r=y(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={username:"",validators:{username:[f.usernameContent(),f.usernameMinLength(e.options.length_min),f.usernameMaxLength(e.options.length_max)]},isLoading:!1},t}return e=a,(t=[{key:"getHelpText",value:function(){var e,t,n=[];return 0<this.props.options.changes_left&&(e=ngettext("You can change your username %(changes_left)s more time.","You can change your username %(changes_left)s more times.",this.props.options.changes_left),n.push(interpolate(e,{changes_left:this.props.options.changes_left},!0))),0<this.props.user.acl.name_changes_expire&&(t=ngettext("Used changes become available again after %(name_changes_expire)s day.","Used changes become available again after %(name_changes_expire)s days.",this.props.user.acl.name_changes_expire),n.push(interpolate(t,{name_changes_expire:this.props.user.acl.name_changes_expire},!0))),n.length?n.join(" "):null}},{key:"clean",value:function(){var e=this.validate();return e.username?(c.default.error(e.username[0]),!1):this.state.username.trim()!==this.props.user.username||(c.default.info(gettext("Your new username is same as current one.")),!1)}},{key:"send",value:function(){return u.default.post(this.props.user.api.username,{username:this.state.username})}},{key:"handleSuccess",value:function(e){this.setState({username:""}),this.props.complete(e.username,e.slug,e.options)}},{key:"handleError",value:function(e){c.default.apiError(e)}},{key:"render",value:function(){return o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"panel panel-default panel-form"},o.default.createElement("div",{className:"panel-heading"},o.default.createElement("h3",{className:"panel-title"},gettext("Change username"))),o.default.createElement("div",{className:"panel-body"},o.default.createElement(s.default,{label:gettext("New username"),for:"id_username",helpText:this.getHelpText()},o.default.createElement("input",{type:"text",id:"id_username",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("username"),value:this.state.username}))),o.default.createElement("div",{className:"panel-footer"},o.default.createElement(l.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Change username")))))}}])&&m(e.prototype,t),n&&m(e,n),a}();n.default=a},{"../../../services/ajax":359,"../../../services/snackbar":371,"../../../utils/validators":387,"../../button":10,"../../form":50,"../../form-group":49,react:"react"}],75:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("moment")),a=o(e("react")),i=o(e("./form-loading")),s=o(e("./form-locked")),u=o(e("./form")),c=o(e("../../username-history/root")),f=o(e("../../..")),d=e("../../../reducers/username-history"),p=e("../../../reducers/users"),m=o(e("../../../services/ajax")),h=o(e("../../../services/page-title")),y=o(e("../../../services/snackbar")),b=o(e("../../../services/store"));function o(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=O(o);return t=l?(e=O(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==v(r)&&"function"!=typeof r?w(n):r}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(l,a.default.Component);var e,t,n,o=E(l);function l(e){var r,t,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),r=o.call(this,e),t=w(r),a=function(e,t,n){r.setState({options:n}),b.default.dispatch((0,d.addNameChange)({username:e,slug:t},r.props.user,r.props.user)),b.default.dispatch((0,p.updateUsername)(r.props.user,e,t)),y.default.success(gettext("Your username has been changed successfully."))},(n="onComplete")in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,r.state={isLoaded:!1,options:null},r}return e=l,(t=[{key:"componentDidMount",value:function(){var t=this;h.default.set({title:gettext("Change username"),parent:gettext("Change your options")}),Promise.all([m.default.get(this.props.user.api.username),m.default.get(f.default.get("USERNAME_CHANGES_API"),{user:this.props.user.id})]).then(function(e){b.default.dispatch((0,d.hydrate)(e[1].results)),t.setState({isLoaded:!0,options:{changes_left:e[0].changes_left,length_min:e[0].length_min,length_max:e[0].length_max,next_on:e[0].next_on?(0,r.default)(e[0].next_on):null}})})}},{key:"getChangeForm",value:function(){return this.state.isLoaded?0===this.state.options.changes_left?a.default.createElement(s.default,{options:this.state.options}):a.default.createElement(u.default,{complete:this.onComplete,options:this.state.options,user:this.props.user}):a.default.createElement(i.default,null)}},{key:"render",value:function(){return a.default.createElement("div",null,this.getChangeForm(),a.default.createElement(c.default,{changes:this.props["username-history"],isLoaded:this.state.isLoaded}))}}])&&g(e.prototype,t),n&&g(e,n),l}();n.default=l},{"../../..":296,"../../../reducers/username-history":357,"../../../reducers/users":358,"../../../services/ajax":359,"../../../services/page-title":368,"../../../services/snackbar":371,"../../../services/store":372,"../../username-history/root":274,"./form":74,"./form-loading":72,"./form-locked":73,moment:"moment",react:"react"}],76:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../button")),i=r(e("../../services/ajax")),s=r(e("../../services/page-title")),u=r(e("../../services/snackbar")),c=(r(e("../../services/store")),r(e("../..")));function r(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?h(n):r}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,o.default.Component);var e,t,n,r=m(a);function a(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),b(h(o=r.call(this,e)),"onPasswordChange",function(e){o.setState({password:e.target.value})}),b(h(o),"handleSubmit",function(e){e.preventDefault();var t=o.state,n=t.isLoading,r=t.password,a=o.props.user;return 0==r.length?(u.default.error(gettext("Enter your password to confirm account deletion.")),!1):!n&&(o.setState({isLoading:!0}),void i.default.post(a.api.delete,{password:r}).then(function(e){window.location.href=c.default.get("MISAGO_PATH")},function(e){o.setState({isLoading:!1}),e.password?u.default.error(e.password[0]):u.default.apiError(e)}))}),o.state={isLoading:!1,password:""},o}return e=a,(t=[{key:"componentDidMount",value:function(){s.default.set({title:gettext("Delete account"),parent:gettext("Change your options")})}},{key:"render",value:function(){return o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"panel panel-danger panel-form"},o.default.createElement("div",{className:"panel-heading"},o.default.createElement("h3",{className:"panel-title"},gettext("Delete account"))),o.default.createElement("div",{className:"panel-body"},o.default.createElement("p",{className:"lead"},gettext("You are going to delete your account. This action is nonreversible, and will result in following data being deleted:")),o.default.createElement("p",null,"-"," ",gettext("Stored IP addresses associated with content that you have posted will be deleted.")),o.default.createElement("p",null,"-"," ",gettext("Your username will become available for other user to rename to or for new user to register their account with.")),o.default.createElement("p",null,"-"," ",gettext("Your e-mail will become available for use in new account registration.")),o.default.createElement("hr",null),o.default.createElement("p",null,gettext("All your posted content will NOT be deleted, but username associated with it will be changed to one shared by all deleted accounts."))),o.default.createElement("div",{className:"panel-footer"},o.default.createElement("div",{className:"input-group"},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,name:"password-confirmation",type:"password",placeholder:gettext("Enter your password to confirm account deletion."),value:this.state.password,onChange:this.onPasswordChange}),o.default.createElement("span",{className:"input-group-btn"},o.default.createElement(l.default,{className:"btn-danger",loading:this.state.isLoading},gettext("Delete my account")))))))}}])&&d(e.prototype,t),n&&d(e,n),a}();n.default=a},{"../..":296,"../../services/ajax":359,"../../services/page-title":368,"../../services/snackbar":371,"../../services/store":372,"../button":10,react:"react"}],77:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("moment")),i=r(e("../button")),s=r(e("../../services/ajax")),u=r(e("../../services/page-title")),c=r(e("../../services/snackbar"));function r(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?h(n):r}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,o.default.Component);var e,t,n,r=m(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),b(h(t=r.call(this,e)),"handleLoadDownloads",function(){s.default.get(t.props.user.api.data_downloads).then(function(e){t.setState({isLoading:!1,downloads:e})},function(e){c.default.apiError(e)})}),b(h(t),"handleRequestDataDownload",function(){t.setState({isSubmiting:!0}),s.default.post(t.props.user.api.request_data_download).then(function(){t.handleLoadDownloads(),c.default.success(gettext("Your request for data download has been registered.")),t.setState({isSubmiting:!1})},function(e){console.log(e),c.default.apiError(e),t.setState({isSubmiting:!1})})}),t.state={isLoading:!1,isSubmiting:!1,downloads:[]},t}return e=a,(t=[{key:"componentDidMount",value:function(){u.default.set({title:gettext("Download your data"),parent:gettext("Change your options")}),this.handleLoadDownloads()}},{key:"render",value:function(){return o.default.createElement("div",null,o.default.createElement("div",{className:"panel panel-default panel-form"},o.default.createElement("div",{className:"panel-heading"},o.default.createElement("h3",{className:"panel-title"},gettext("Download your data"))),o.default.createElement("div",{className:"panel-body"},o.default.createElement("p",null,gettext('To download your data from the site, click the "Request data download" button. Depending on amount of data to be archived and number of users wanting to download their data at same time it may take up to few days for your download to be prepared. An e-mail with notification will be sent to you when your data is ready to be downloaded.')),o.default.createElement("p",null,gettext("The download will only be available for limited amount of time, after which it will be deleted from the site and marked as expired."))),o.default.createElement("table",{className:"table"},o.default.createElement("thead",null,o.default.createElement("tr",null,o.default.createElement("th",null,gettext("Requested on")),o.default.createElement("th",{className:"col-md-4"},gettext("Download")))),o.default.createElement("tbody",null,this.state.downloads.map(function(e){return o.default.createElement("tr",{key:e.id},o.default.createElement("td",{style:v},(0,l.default)(e.requested_on).fromNow()),o.default.createElement("td",null,o.default.createElement(g,{exportFile:e.file,status:e.status})))}),0==this.state.downloads.length?o.default.createElement("tr",null,o.default.createElement("td",{colSpan:"2"},gettext("You have no data downloads."))):null)),o.default.createElement("div",{className:"panel-footer text-right"},o.default.createElement(i.default,{className:"btn-primary",loading:this.state.isSubmiting,type:"button",onClick:this.handleRequestDataDownload},gettext("Request data download")))))}}])&&d(e.prototype,t),n&&d(e,n),a}();n.default=a;var v={verticalAlign:"middle"},g=function(e){var t=e.exportFile,n=e.status;return 0===n||1===n?o.default.createElement(i.default,{className:"btn-info btn-sm btn-block",disabled:!0,type:"button"},gettext("Download is being prepared")):t?o.default.createElement("a",{className:"btn btn-success btn-sm btn-block",href:t},gettext("Download your data")):o.default.createElement(i.default,{className:"btn-default btn-sm btn-block",disabled:!0,type:"button"},gettext("Download is expired"))}},{"../../services/ajax":359,"../../services/page-title":368,"../../services/snackbar":371,"../button":10,moment:"moment",react:"react"}],78:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=l(e("react")),a=l(e("../edit-details")),o=l(e("../../services/page-title")),u=l(e("../../services/snackbar"));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=s(o);return t=l?(e=s(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?p(n):r}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,r.default.Component);var e,t,n,i=d(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=i.call.apply(i,[this].concat(o)),t=p(e),r=function(){u.default.info(gettext("Your details have been updated."))},(n="onSuccess")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return e=s,(t=[{key:"componentDidMount",value:function(){o.default.set({title:gettext("Edit details"),parent:gettext("Change your options")})}},{key:"render",value:function(){return r.default.createElement(a.default,{api:this.props.user.api.edit_details,onSuccess:this.onSuccess})}}])&&c(e.prototype,t),n&&c(e,n),s}();n.default=m},{"../../services/page-title":368,"../../services/snackbar":371,"../edit-details":34,react:"react"}],79:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../button")),i=r(e("../form")),s=r(e("../form-group")),u=r(e("../select")),c=r(e("../yes-no-switch")),f=e("../../reducers/auth"),d=r(e("../../services/ajax")),p=r(e("../../services/page-title")),m=r(e("../../services/snackbar")),h=r(e("../../services/store"));function r(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==y(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,i.default);var e,t,n,r=g(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={isLoading:!1,is_hiding_presence:e.user.is_hiding_presence,limits_private_thread_invites_to:e.user.limits_private_thread_invites_to,subscribe_to_started_threads:e.user.subscribe_to_started_threads,subscribe_to_replied_threads:e.user.subscribe_to_replied_threads,errors:{}},t.privateThreadInvitesChoices=[{value:0,icon:"help_outline",label:gettext("Everybody")},{value:1,icon:"done_all",label:gettext("Users I follow")},{value:2,icon:"highlight_off",label:gettext("Nobody")}],t.subscribeToChoices=[{value:0,icon:"star_border",label:gettext("No")},{value:1,icon:"star_half",label:gettext("Notify")},{value:2,icon:"star",label:gettext("Notify with e-mail")}],t}return e=a,(t=[{key:"send",value:function(){return d.default.post(this.props.user.api.options,{is_hiding_presence:this.state.is_hiding_presence,limits_private_thread_invites_to:this.state.limits_private_thread_invites_to,subscribe_to_started_threads:this.state.subscribe_to_started_threads,subscribe_to_replied_threads:this.state.subscribe_to_replied_threads})}},{key:"handleSuccess",value:function(){h.default.dispatch((0,f.patch)({is_hiding_presence:this.state.is_hiding_presence,limits_private_thread_invites_to:this.state.limits_private_thread_invites_to,subscribe_to_started_threads:this.state.subscribe_to_started_threads,subscribe_to_replied_threads:this.state.subscribe_to_replied_threads})),m.default.success(gettext("Your forum options have been changed."))}},{key:"handleError",value:function(e){400===e.status?m.default.error(gettext("Please reload page and try again.")):m.default.apiError(e)}},{key:"componentDidMount",value:function(){p.default.set({title:gettext("Forum options"),parent:gettext("Change your options")})}},{key:"render",value:function(){return o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"panel panel-default panel-form"},o.default.createElement("div",{className:"panel-heading"},o.default.createElement("h3",{className:"panel-title"},gettext("Change forum options"))),o.default.createElement("div",{className:"panel-body"},o.default.createElement("fieldset",null,o.default.createElement("legend",null,gettext("Privacy settings")),o.default.createElement(s.default,{label:gettext("Hide my presence"),helpText:gettext("If you hide your presence, only members with permission to see hidden users will see when you are online."),for:"id_is_hiding_presence"},o.default.createElement(c.default,{id:"id_is_hiding_presence",disabled:this.state.isLoading,iconOn:"visibility_off",iconOff:"visibility",labelOn:gettext("Hide my presence from other users"),labelOff:gettext("Show my presence to other users"),onChange:this.bindInput("is_hiding_presence"),value:this.state.is_hiding_presence})),o.default.createElement(s.default,{label:gettext("Private thread invitations"),for:"id_limits_private_thread_invites_to"},o.default.createElement(u.default,{id:"id_limits_private_thread_invites_to",disabled:this.state.isLoading,onChange:this.bindInput("limits_private_thread_invites_to"),value:this.state.limits_private_thread_invites_to,choices:this.privateThreadInvitesChoices}))),o.default.createElement("fieldset",null,o.default.createElement("legend",null,gettext("Automatic subscriptions")),o.default.createElement(s.default,{label:gettext("Threads I start"),for:"id_subscribe_to_started_threads"},o.default.createElement(u.default,{id:"id_subscribe_to_started_threads",disabled:this.state.isLoading,onChange:this.bindInput("subscribe_to_started_threads"),value:this.state.subscribe_to_started_threads,choices:this.subscribeToChoices})),o.default.createElement(s.default,{label:gettext("Threads I reply to"),for:"id_subscribe_to_replied_threads"},o.default.createElement(u.default,{id:"id_subscribe_to_replied_threads",disabled:this.state.isLoading,onChange:this.bindInput("subscribe_to_replied_threads"),value:this.state.subscribe_to_replied_threads,choices:this.subscribeToChoices})))),o.default.createElement("div",{className:"panel-footer"},o.default.createElement(l.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Save changes")))))}}])&&b(e.prototype,t),n&&b(e,n),a}();n.default=a},{"../../reducers/auth":344,"../../services/ajax":359,"../../services/page-title":368,"../../services/snackbar":371,"../../services/store":372,"../button":10,"../form":50,"../form-group":49,"../select":204,"../yes-no-switch":294,react:"react"}],80:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.SideNav=function(t){return r.default.createElement("div",{className:"list-group nav-side"},t.options.map(function(e){return r.default.createElement(a.Link,{to:t.baseUrl+e.component+"/",className:"list-group-item",activeClassName:"active",key:e.component},r.default.createElement("span",{className:"material-icon"},e.icon),e.name)}))},n.CompactNav=function(t){return r.default.createElement("ul",{className:t.className||"dropdown-menu stick-to-bottom",role:"menu"},t.options.map(function(e){return r.default.createElement(o.default,{path:t.baseUrl+e.component+"/",key:e.component},r.default.createElement(a.Link,{to:t.baseUrl+e.component+"/",onClick:t.hideNav},r.default.createElement("span",{className:"material-icon hidden-sm"},e.icon),e.name))}))};var r=l(e("react")),a=e("react-router"),o=l(e("../li"));l(e("../.."));function l(e){return e&&e.__esModule?e:{default:e}}},{"../..":296,"../li":51,react:"react","react-router":"react-router"}],81:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.select=E,n.paths=function(){var e=p.default.get("SETTINGS").enable_sso,t=[{path:p.default.get("USERCP_URL")+"forum-options/",component:(0,r.connect)(E)(u.default)},{path:p.default.get("USERCP_URL")+"edit-details/",component:(0,r.connect)(E)(i.default)}];e||(t.push({path:p.default.get("USERCP_URL")+"change-username/",component:(0,r.connect)(E)(c.default)}),t.push({path:p.default.get("USERCP_URL")+"sign-in-credentials/",component:(0,r.connect)(E)(f.default)}));p.default.get("ENABLE_DOWNLOAD_OWN_DATA")&&t.push({path:p.default.get("USERCP_URL")+"download-data/",component:(0,r.connect)(E)(s.default)});!e&&p.default.get("ENABLE_DELETE_OWN_ACCOUNT")&&t.push({path:p.default.get("USERCP_URL")+"delete-account/",component:(0,r.connect)(E)(a.default)});return t},n.default=void 0;var o=m(e("react")),r=e("react-redux"),l=(m(e("../dropdown-toggle")),e("./navs")),a=m(e("./delete-account")),i=m(e("./edit-details")),s=m(e("./download-data")),u=m(e("./forum-options")),c=m(e("./change-username/root")),f=m(e("./sign-in-credentials/root")),d=m(e("../with-dropdown")),p=m(e("../.."));function m(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=g(o);return t=l?(e=g(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==h(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,d.default);var e,t,n,r=v(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",{className:"page page-options"},o.default.createElement("div",{className:"page-header-bg"},o.default.createElement("div",{className:"page-header"},o.default.createElement("div",{className:"container"},o.default.createElement("h1",null,gettext("Change your options"))),o.default.createElement("div",{className:"page-tabs visible-xs-block visible-sm-block"},o.default.createElement("div",{className:"container"},o.default.createElement(l.CompactNav,{className:"nav nav-pills",baseUrl:p.default.get("USERCP_URL"),options:p.default.get("USER_OPTIONS")}))))),o.default.createElement("div",{className:"container"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-md-3 hidden-xs hidden-sm"},o.default.createElement(l.SideNav,{baseUrl:p.default.get("USERCP_URL"),options:p.default.get("USER_OPTIONS")})),o.default.createElement("div",{className:"col-md-9"},this.props.children))))}}])&&y(e.prototype,t),n&&y(e,n),a}();function E(e){return{tick:e.tick.tick,user:e.auth.user,"username-history":e["username-history"]}}n.default=_},{"../..":296,"../dropdown-toggle":29,"../with-dropdown":293,"./change-username/root":75,"./delete-account":76,"./download-data":77,"./edit-details":78,"./forum-options":79,"./navs":80,"./sign-in-credentials/root":85,react:"react","react-redux":"react-redux"}],82:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("react")),a=o(e("../../.."));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return r.default.createElement("div",{className:"panel panel-default panel-form"},r.default.createElement("div",{className:"panel-heading"},r.default.createElement("h3",{className:"panel-title"},gettext("Change email or password"))),r.default.createElement("div",{className:"panel-body panel-message-body"},r.default.createElement("div",{className:"message-icon"},r.default.createElement("span",{className:"material-icon"},"info_outline")),r.default.createElement("div",{className:"message-body"},r.default.createElement("p",{className:"lead"},gettext("You need to set a password for your account to be able to change your username or email.")),r.default.createElement("p",{className:"help-block"},r.default.createElement("a",{className:"btn btn-primary",href:a.default.get("FORGOTTEN_PASSWORD_URL")},gettext("Set password"))))))}n.default=l},{"../../..":296,react:"react"}],83:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../../button")),i=r(e("../../form")),s=r(e("../../form-group")),u=r(e("../../../services/ajax")),c=r(e("../../../services/snackbar")),f=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../utils/validators"));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=b(o);return t=l?(e=b(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==p(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,i.default);var e,t,n,r=y(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={new_email:"",password:"",validators:{new_email:[f.email()],password:[]},isLoading:!1},t}return e=a,(t=[{key:"clean",value:function(){var e=this.validate();return-1!==[this.state.new_email.trim().length,this.state.password.trim().length].indexOf(0)?(c.default.error(gettext("Fill out all fields.")),!1):!e.new_email||(c.default.error(e.new_email[0]),!1)}},{key:"send",value:function(){return u.default.post(this.props.user.api.change_email,{new_email:this.state.new_email,password:this.state.password})}},{key:"handleSuccess",value:function(e){this.setState({new_email:"",password:""}),c.default.success(e.detail)}},{key:"handleError",value:function(e){400===e.status?e.new_email?c.default.error(e.new_email):c.default.error(e.password):c.default.apiError(e)}},{key:"render",value:function(){return o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("input",{type:"type",style:{display:"none"}}),o.default.createElement("input",{type:"password",style:{display:"none"}}),o.default.createElement("div",{className:"panel panel-default panel-form"},o.default.createElement("div",{className:"panel-heading"},o.default.createElement("h3",{className:"panel-title"},gettext("Change e-mail address"))),o.default.createElement("div",{className:"panel-body"},o.default.createElement(s.default,{label:gettext("New e-mail"),for:"id_new_email"},o.default.createElement("input",{type:"text",id:"id_new_email",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("new_email"),value:this.state.new_email})),o.default.createElement("hr",null),o.default.createElement(s.default,{label:gettext("Your current password"),for:"id_confirm_email"},o.default.createElement("input",{type:"password",id:"id_confirm_email",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("password"),value:this.state.password}))),o.default.createElement("div",{className:"panel-footer"},o.default.createElement(l.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Change e-mail")))))}}])&&m(e.prototype,t),n&&m(e,n),a}();n.default=a},{"../../../services/ajax":359,"../../../services/snackbar":371,"../../../utils/validators":387,"../../button":10,"../../form":50,"../../form-group":49,react:"react"}],84:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../../button")),i=r(e("../../form")),s=r(e("../../form-group")),u=r(e("../../../services/ajax")),c=r(e("../../../services/snackbar"));function r(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,i.default);var e,t,n,r=m(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={new_password:"",repeat_password:"",password:"",validators:{new_password:[],repeat_password:[],password:[]},isLoading:!1},t}return e=a,(t=[{key:"clean",value:function(){var e=this.validate();return-1!==[this.state.new_password.trim().length,this.state.repeat_password.trim().length,this.state.password.trim().length].indexOf(0)?(c.default.error(gettext("Fill out all fields.")),!1):e.new_password?(c.default.error(e.new_password[0]),!1):this.state.new_password===this.state.repeat_password||(c.default.error(gettext("New passwords are different.")),!1)}},{key:"send",value:function(){return u.default.post(this.props.user.api.change_password,{new_password:this.state.new_password,password:this.state.password})}},{key:"handleSuccess",value:function(e){this.setState({new_password:"",repeat_password:"",password:""}),c.default.success(e.detail)}},{key:"handleError",value:function(e){400===e.status?e.new_password?c.default.error(e.new_password):c.default.error(e.password):c.default.apiError(e)}},{key:"render",value:function(){return o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("input",{type:"type",style:{display:"none"}}),o.default.createElement("input",{type:"password",style:{display:"none"}}),o.default.createElement("div",{className:"panel panel-default panel-form"},o.default.createElement("div",{className:"panel-heading"},o.default.createElement("h3",{className:"panel-title"},gettext("Change password"))),o.default.createElement("div",{className:"panel-body"},o.default.createElement(s.default,{label:gettext("New password"),for:"id_new_password"},o.default.createElement("input",{type:"password",id:"id_new_password",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("new_password"),value:this.state.new_password})),o.default.createElement(s.default,{label:gettext("Repeat password"),for:"id_repeat_password"},o.default.createElement("input",{type:"password",id:"id_repeat_password",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("repeat_password"),value:this.state.repeat_password})),o.default.createElement("hr",null),o.default.createElement(s.default,{label:gettext("Your current password"),for:"id_confirm_password"},o.default.createElement("input",{type:"password",id:"id_confirm_password",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("password"),value:this.state.password}))),o.default.createElement("div",{className:"panel-footer"},o.default.createElement(l.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Change password")))))}}])&&d(e.prototype,t),n&&d(e,n),a}();n.default=a},{"../../../services/ajax":359,"../../../services/snackbar":371,"../../button":10,"../../form":50,"../../form-group":49,react:"react"}],85:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("./change-email")),i=r(e("./change-password")),s=r(e("../../..")),u=r(e("../../../services/page-title")),c=r(e("./UnusablePasswordMessage"));function r(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,o.default.Component);var e,t,n,r=m(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"componentDidMount",value:function(){u.default.set({title:gettext("Change email or password"),parent:gettext("Change your options")})}},{key:"render",value:function(){return this.props.user.has_usable_password?o.default.createElement("div",null,o.default.createElement(l.default,{user:this.props.user}),o.default.createElement(i.default,{user:this.props.user}),o.default.createElement("p",{className:"message-line"},o.default.createElement("span",{className:"material-icon"},"warning"),o.default.createElement("a",{href:s.default.get("FORGOTTEN_PASSWORD_URL")},gettext("Change forgotten password")))):o.default.createElement(c.default,null)}}])&&d(e.prototype,t),n&&d(e,n),a}();n.default=a},{"../../..":296,"../../../services/page-title":368,"./UnusablePasswordMessage":82,"./change-email":83,"./change-password":84,react:"react"}],86:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../utils/string-count"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getClassName",value:function(){return this.props.copy&&this.props.copy.length&&1===(0,l.default)(this.props.copy,"<p")&&-1===this.props.copy.indexOf("<br")?"page-lead lead":"page-lead"}},{key:"render",value:function(){return this.props.copy&&this.props.copy.length?o.default.createElement("div",{className:this.getClassName(),dangerouslySetInnerHTML:{__html:this.props.copy}}):null}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"../utils/string-count":386,react:"react"}],87:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("./loader"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",{className:"panel-body panel-body-loading"},o.default.createElement(l.default,{className:"loader loader-spaced"}))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"./loader":52,react:"react"}],88:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,n,r=u(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getHelpText",value:function(){return this.props.helpText?o.default.createElement("p",{className:"help-block"},this.props.helpText):null}},{key:"render",value:function(){return o.default.createElement("div",{className:"panel-body panel-message-body"},o.default.createElement("div",{className:"message-icon"},o.default.createElement("span",{className:"material-icon"},this.props.icon||"info_outline")),o.default.createElement("div",{className:"message-body"},o.default.createElement("p",{className:"lead"},this.props.message),this.getHelpText()))}}])&&l(e.prototype,t),n&&l(e,n),a}();n.default=a},{react:"react"}],89:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=r(e("react")),c=r(e("../add-participant")),f=r(e("../../services/modal"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=s(o);return t=l?(e=s(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?d(n):r}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(s,u.default.Component);var e,t,n,i=l(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=i.call.apply(i,[this].concat(o)),t=d(e),r=function(){f.default.show(u.default.createElement(c.default,{thread:e.props.thread}))},(n="onClick")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return e=s,(t=[{key:"render",value:function(){return this.props.thread.acl.can_add_participants?u.default.createElement("div",{className:"col-xs-12 col-sm-3"},u.default.createElement("button",{className:"btn btn-default btn-block",onClick:this.onClick,type:"button"},u.default.createElement("span",{className:"material-icon"},"person_add"),gettext("Add participant"))):null}}])&&a(e.prototype,t),n&&a(e,n),s}();n.default=p},{"../../services/modal":366,"../add-participant":6,react:"react"}],90:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.leave=function(e,t){i.default.patch(e.api.index,[{op:"remove",path:"participants",value:t.id}]).then(function(){s.default.success(gettext("You have left this thread.")),window.setTimeout(function(){window.location=o.default.get("PRIVATE_THREADS_URL")},3e3)},function(e){s.default.apiError(e)})},n.remove=function(e,n){i.default.patch(e.api.index,[{op:"remove",path:"participants",value:n.id},{op:"add",path:"acl",value:1}]).then(function(e){u.default.dispatch((0,a.updateAcl)(e)),u.default.dispatch(r.replace(e.participants));var t=gettext("%(user)s has been removed from this thread.");s.default.success(interpolate(t,{user:n.username},!0))},function(e){s.default.apiError(e)})},n.changeOwner=function(e,n){i.default.patch(e.api.index,[{op:"replace",path:"owner",value:n.id},{op:"add",path:"acl",value:1}]).then(function(e){u.default.dispatch((0,a.updateAcl)(e)),u.default.dispatch(r.replace(e.participants));var t=gettext("%(user)s has been made new thread owner.");s.default.success(interpolate(t,{user:n.username},!0))},function(e){s.default.apiError(e)})};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../reducers/participants")),a=e("../../../reducers/thread"),o=c(e("../../..")),i=c(e("../../../services/ajax")),s=c(e("../../../services/snackbar")),u=c(e("../../../services/store"));function c(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}},{"../../..":296,"../../../reducers/participants":345,"../../../reducers/thread":354,"../../../services/ajax":359,"../../../services/snackbar":371,"../../../services/store":372}],91:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.participant,n="btn btn-default";t.is_owner&&(n="btn btn-primary");return n+=" btn-user btn-block",r.default.createElement("div",{className:"col-xs-12 col-sm-3 col-md-2 participant-card"},r.default.createElement("div",{className:"dropdown"},r.default.createElement("button",{"aria-haspopup":"true","aria-expanded":"false",className:n,"data-toggle":"dropdown",type:"button"},r.default.createElement(l.default,{size:"34",user:t}),r.default.createElement("span",{className:"btn-text"},t.username)),r.default.createElement("ul",{className:"dropdown-menu stick-to-bottom"},r.default.createElement(s,{isOwner:t.is_owner}),r.default.createElement("li",{className:"dropdown-header"}),r.default.createElement("li",null,r.default.createElement("a",{href:t.url},gettext("See profile"))),r.default.createElement("li",{role:"separator",className:"divider"}),r.default.createElement(a.default,e),r.default.createElement(o.default,e))))},n.UserStatus=s;var r=i(e("react")),a=i(e("./make-owner")),o=i(e("./remove")),l=i(e("../../avatar"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){return e.isOwner?r.default.createElement("li",{className:"dropdown-header dropdown-header-owner"},r.default.createElement("span",{className:"material-icon"},"start"),r.default.createElement("span",{className:"icon-text"},gettext("Thread owner"))):null}},{"../../avatar":8,"./make-owner":93,"./remove":94,react:"react"}],92:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.participants,n=e.thread,r=e.user,a=e.userIsOwner;return o.default.createElement("div",{className:"participants-cards"},o.default.createElement("div",{className:"row"},t.map(function(e){return o.default.createElement(l.default,{key:e.id,participant:e,thread:n,user:r,userIsOwner:a})})))};var o=r(e("react")),l=r(e("./card"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./card":91,react:"react"}],93:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("react"))&&r.__esModule?r:{default:r},i=e("./actions");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==s(r)&&"function"!=typeof r?d(n):r}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,a.default.Component);var e,t,n,o=f(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=d(t),a=function(){var e;(t.isUser?confirm(gettext("Are you sure you want to take over this thread?")):(e=gettext("Are you sure you want to change thread owner to %(user)s?"),confirm(interpolate(e,{user:t.props.participant.username},!0))))&&(0,i.changeOwner)(t.props.thread,t.props.participant)},(r="onClick")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.isUser=e.participant.id===e.user.id,t}return e=l,(t=[{key:"render",value:function(){return!this.props.participant.is_owner&&this.props.thread.acl.can_change_owner?a.default.createElement("li",null,a.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},gettext("Make owner"))):null}}])&&u(e.prototype,t),n&&u(e,n),l}();n.default=o},{"./actions":90,react:"react"}],94:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("react"))&&r.__esModule?r:{default:r},i=e("./actions");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==s(r)&&"function"!=typeof r?d(n):r}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,a.default.Component);var e,t,n,o=f(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=d(t),a=function(){var e;(t.isUser?confirm(gettext("Are you sure you want to leave this thread?")):(e=gettext("Are you sure you want to remove %(user)s from this thread?"),confirm(interpolate(e,{user:t.props.participant.username},!0))))&&(t.isUser?(0,i.leave):(0,i.remove))(t.props.thread,t.props.participant)},(r="onClick")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.isUser=e.participant.id===e.user.id,t}return e=l,(t=[{key:"render",value:function(){var e=this.props.user.acl.can_moderate_private_threads;return this.props.userIsOwner||this.isUser||e?a.default.createElement("li",null,a.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},this.isUser?gettext("Leave thread"):gettext("Remove"))):null}}])&&u(e.prototype,t),n&&u(e,n),l}();n.default=o},{"./actions":90,react:"react"}],95:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.participants.length?r.default.createElement("div",{className:"panel panel-default panel-participants"},r.default.createElement("div",{className:"panel-body"},r.default.createElement(o.default,c({userIsOwner:f(e.user,e.participants)},e)),r.default.createElement("div",{className:"row"},r.default.createElement(a.default,{thread:e.thread}),r.default.createElement("div",{className:"col-xs-12 col-sm-9"},r.default.createElement("p",null,i.getParticipantsCopy(e.participants)))))):null},n.getUserIsOwner=f;var r=u(e("react")),a=u(e("./add-participant")),o=u(e("./cards-list")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("./utils"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){return t[0].id===e.id}},{"./add-participant":89,"./cards-list":92,"./utils":96,react:"react"}],96:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getParticipantsCopy=function(e){var t=e.length,n=ngettext("This thread has %(users)s participant.","This thread has %(users)s participants.",t);return interpolate(n,{users:t},!0)}},{}],97:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.LABELS=n.STYLES=void 0;var o=r(e("react")),l=r(e("../services/zxcvbn"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=["progress-bar-danger","progress-bar-warning","progress-bar-warning","progress-bar-primary","progress-bar-success"];n.STYLES=d;var p=[gettext("Entered password is very weak."),gettext("Entered password is weak."),gettext("Entered password is average."),gettext("Entered password is strong."),gettext("Entered password is very strong.")];n.LABELS=p;var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e))._score=0,t._password=null,t._inputs=[],t.state={loaded:!1},t}return e=a,(t=[{key:"componentDidMount",value:function(){var e=this;l.default.load().then(function(){e.setState({loaded:!0})})}},{key:"getScore",value:function(e,t){var n=this,r=!1;return e!==this._password&&(r=!0),t.length!==this._inputs.length?r=!0:t.map(function(e,t){e.trim()!==n._inputs[t]&&(r=!0)}),r&&(this._score=l.default.scorePassword(e,t),this._password=e,this._inputs=t.map(function(e){return e.trim()})),this._score}},{key:"render",value:function(){if(!this.state.loaded)return null;var e=this.getScore(this.props.password,this.props.inputs);return o.default.createElement("div",{className:"help-block password-strength"},o.default.createElement("div",{className:"progress"},o.default.createElement("div",{className:"progress-bar "+d[e],style:{width:20+20*e+"%"},role:"progress-bar","aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":"4"},o.default.createElement("span",{className:"sr-only"},p[e]))),o.default.createElement("p",{className:"text-small"},p[e]))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"../services/zxcvbn":373,react:"react"}],98:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.generateRandomHash=b,n.PollChoice=n.default=void 0;var r,l=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?d(n):r}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){c(o,l.default.Component);var a=f(o);function o(){var r;s(this,o);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m(d(r=a.call.apply(a,[this].concat(t))),"onAdd",function(){var e=r.props.choices.slice();e.push({hash:b(),label:""}),r.props.setChoices(e)}),m(d(r),"onChange",function(t,n){var e=r.props.choices.map(function(e){return e.hash===t&&(e.label=n),e});r.props.setChoices(e)}),m(d(r),"onDelete",function(t){var e=r.props.choices.filter(function(e){return e.hash!==t});r.props.setChoices(e)}),r}return u(o,[{key:"render",value:function(){var t=this;return l.default.createElement("div",{className:"poll-choices-control"},l.default.createElement("ul",{className:"list-group"},this.props.choices.map(function(e){return l.default.createElement(y,{canDelete:2<t.props.choices.length,choice:e,disabled:t.props.disabled,key:e.hash,onChange:t.onChange,onDelete:t.onDelete})})),l.default.createElement("button",{className:"btn btn-default btn-sm",disabled:this.props.disabled,onClick:this.onAdd,type:"button"},gettext("Add choice")))}}]),o}();n.default=h;var y=function(){c(o,l.default.Component);var a=f(o);function o(){var t;s(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return m(d(t=a.call.apply(a,[this].concat(n))),"onChange",function(e){t.props.onChange(t.props.choice.hash,e.target.value)}),m(d(t),"onDelete",function(){confirm(gettext("Are you sure you want to delete this choice?"))&&t.props.onDelete(t.props.choice.hash)}),t}return u(o,[{key:"render",value:function(){return l.default.createElement("li",{className:"list-group-item"},l.default.createElement("button",{className:"btn",disabled:!this.props.canDelete||this.props.disabled,onClick:this.onDelete,title:gettext("Delete this choice"),type:"button"},l.default.createElement("span",{className:"material-icon"},"close")),l.default.createElement("input",{disabled:this.props.disabled,maxLength:"255",placeholder:gettext("choice label"),type:"text",onChange:this.onChange,value:this.props.choice.label}))}}]),o}();function b(){for(var e="";12!=e.length;)e=Math.random().toString(36).replace(/[^a-zA-Z0-9]+/g,"").substr(1,12);return e}n.PollChoice=y},{react:"react"}],99:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PollPublicSwitch=k,n.default=void 0;var o=r(e("react")),l=r(e("./choices-control")),i=r(e("../../button")),s=r(e("../../form")),u=r(e("../../form-group")),c=r(e("../../yes-no-switch")),f=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==b(e)&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../reducers/poll")),d=r(e("../../../services/ajax")),p=r(e("../../../services/posting")),m=r(e("../../../services/snackbar")),h=r(e("../../../services/store"));function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==b(r)&&"function"!=typeof r?E(n):r}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,s.default);var e,t,n,r=_(a);function a(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),O(E(n=r.call(this,e)),"setChoices",function(e){var t=Object.assign({},t,{choices:null});n.setState({choices:e,errors:t})}),O(E(n),"onCancel",function(){confirm(gettext("Are you sure you want to discard poll?"))&&p.default.close()});var t=e.poll||{question:"",choices:[{hash:"choice-10000",label:""},{hash:"choice-20000",label:""}],length:0,allowed_choices:1,allow_revotes:0,is_public:0};return n.state={isLoading:!1,isEdit:!!t.question,question:t.question,choices:t.choices,length:t.length,allowed_choices:t.allowed_choices,allow_revotes:t.allow_revotes,is_public:t.is_public,validators:{question:[],choices:[],length:[],allowed_choices:[]},errors:{}},n}return e=a,(t=[{key:"send",value:function(){var e={question:this.state.question,choices:this.state.choices,length:this.state.length,allowed_choices:this.state.allowed_choices,allow_revotes:this.state.allow_revotes,is_public:this.state.is_public};return this.state.isEdit?d.default.put(this.props.poll.api.index,e):d.default.post(this.props.thread.api.poll,e)}},{key:"handleSuccess",value:function(e){h.default.dispatch(f.replace(e)),this.state.isEdit?m.default.success(gettext("Poll has been edited.")):m.default.success(gettext("Poll has been posted.")),p.default.close()}},{key:"handleError",value:function(e){400===e.status?(e.non_field_errors&&(e.allowed_choices=e.non_field_errors),this.setState({errors:Object.assign({},e)}),m.default.error(gettext("Form contains errors."))):m.default.apiError(e)}},{key:"render",value:function(){return o.default.createElement("div",{className:"poll-form"},o.default.createElement("div",{className:"container"},o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"panel panel-default panel-form"},o.default.createElement("div",{className:"panel-body"},o.default.createElement("fieldset",null,o.default.createElement("legend",null,gettext("Question and choices")),o.default.createElement(u.default,{label:gettext("Poll question"),for:"id_questions",validation:this.state.errors.question},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_questions",onChange:this.bindInput("question"),type:"text",maxLength:"255",value:this.state.question})),o.default.createElement(u.default,{label:gettext("Available choices"),validation:this.state.errors.choices},o.default.createElement(l.default,{choices:this.state.choices,disabled:this.state.isLoading,setChoices:this.setChoices}))),o.default.createElement("fieldset",null,o.default.createElement("legend",null,gettext("Voting")),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-12 col-sm-6"},o.default.createElement(u.default,{label:gettext("Poll length"),helpText:gettext("Enter number of days for which voting in this poll should be possible or zero to run this poll indefinitely."),for:"id_length",validation:this.state.errors.length},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_length",onChange:this.bindInput("length"),type:"text",value:this.state.length}))),o.default.createElement("div",{className:"col-xs-12 col-sm-6"},o.default.createElement(u.default,{label:gettext("Allowed choices"),for:"id_allowed_choices",validation:this.state.errors.allowed_choices},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_allowed_choices",onChange:this.bindInput("allowed_choices"),type:"text",maxLength:"255",value:this.state.allowed_choices})))),o.default.createElement("div",{className:"row"},o.default.createElement(k,{bindInput:this.bindInput,disabled:this.state.isLoading,isEdit:this.state.isEdit,value:this.state.is_public}),o.default.createElement("div",{className:"col-xs-12 col-sm-6"},o.default.createElement(u.default,{label:gettext("Allow vote changes"),for:"id_allow_revotes"},o.default.createElement(c.default,{id:"id_allow_revotes",disabled:this.state.isLoading,iconOn:"check",iconOff:"close",labelOn:gettext("Allow participants to change their vote"),labelOff:gettext("Don't allow participants to change their vote"),onChange:this.bindInput("allow_revotes"),value:this.state.allow_revotes})))))),o.default.createElement("div",{className:"panel-footer text-right"},o.default.createElement("button",{className:"btn btn-default",disabled:this.state.isLoading,onClick:this.onCancel,type:"button"},gettext("Cancel"))," ",o.default.createElement(i.default,{className:"btn-primary",loading:this.state.isLoading},this.state.isEdit?gettext("Save changes"):gettext("Post poll")))))))}}])&&v(e.prototype,t),n&&v(e,n),a}();function k(e){return e.isEdit?null:o.default.createElement("div",{className:"col-xs-12 col-sm-6"},o.default.createElement(u.default,{label:gettext("Make voting public"),helpText:gettext("Making voting public will allow everyone to access detailed list of votes, showing which users voted for which choices and at which times. This option can't be changed after poll's creation. Moderators may see voting details for all polls."),for:"id_is_public"},o.default.createElement(c.default,{id:"id_is_public",disabled:e.disabled,iconOn:"visibility",iconOff:"visibility_off",labelOn:gettext("Votes are public"),labelOff:gettext("Votes are hidden"),onChange:e.bindInput("is_public"),value:e.value})))}n.default=a},{"../../../reducers/poll":346,"../../../services/ajax":359,"../../../services/posting":370,"../../../services/snackbar":371,"../../../services/store":372,"../../button":10,"../../form":50,"../../form-group":49,"../../yes-no-switch":294,"./choices-control":98,react:"react"}],100:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"Poll",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"PollForm",{enumerable:!0,get:function(){return a.default}});var r=o(e("./poll")),a=o(e("./form"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./form":99,"./poll":102}],101:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.default.createElement("ul",{className:"list-unstyled list-inline poll-details"},r.default.createElement(m,{votes:e.poll.votes}),r.default.createElement(d,{poll:e.poll}),r.default.createElement(h,{poll:e.poll}),r.default.createElement(u,{poll:e.poll}))},n.PollCreation=u,n.getPoster=c,n.getPostedOn=f,n.PollLength=d,n.getEndsOn=p,n.PollVotes=m,n.PollIsPublic=h;var r=o(e("react")),a=o(e("../../utils/escape-html"));function o(e){return e&&e.__esModule?e:{default:e}}var l='<abbr title="%(absolute)s">%(relative)s</abbr>',i='<span class="item-title">%(user)s</span>',s='<a href="%(url)s" class="item-title">%(user)s</a>';function u(e){var t=interpolate((0,a.default)(gettext("Posted by %(poster)s %(posted_on)s.")),{poster:c(e.poll),posted_on:f(e.poll)},!0);return r.default.createElement("li",{className:"poll-info-creation",dangerouslySetInnerHTML:{__html:t}})}function c(e){return e.url.poster?interpolate(s,{url:(0,a.default)(e.url.poster),user:(0,a.default)(e.poster_name)},!0):interpolate(i,{user:(0,a.default)(e.poster_name)},!0)}function f(e){return interpolate(l,{absolute:(0,a.default)(e.posted_on.format("LLL")),relative:(0,a.default)(e.posted_on.fromNow())},!0)}function d(e){if(!e.poll.length)return null;var t=interpolate((0,a.default)(gettext("Voting ends %(ends_on)s.")),{ends_on:p(e.poll)},!0);return r.default.createElement("li",{className:"poll-info-ends-on",dangerouslySetInnerHTML:{__html:t}})}function p(e){return interpolate(l,{absolute:(0,a.default)(e.endsOn.format("LLL")),relative:(0,a.default)(e.endsOn.fromNow())},!0)}function m(e){var t=ngettext("%(votes)s vote.","%(votes)s votes.",e.votes),n=interpolate(t,{votes:e.votes},!0);return r.default.createElement("li",{className:"poll-info-votes"},n)}function h(e){return e.poll.is_public?r.default.createElement("li",{className:"poll-info-public"},gettext("Votes are public.")):null}},{"../../utils/escape-html":378,react:"react"}],102:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getIsPollOver=b,n.default=void 0;var o=a(e("react")),r=a(e("moment")),l=a(e("./results")),i=a(e("./voting"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=m(o);return t=l?(e=m(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==s(r)&&"function"!=typeof r?p(n):r}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,n,r=d(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),h(p(t=r.call(this,e)),"showResults",function(){t.setState({showResults:!0})}),h(p(t),"showVoting",function(){t.setState({showResults:!1})});var n=!0;return e.user.id&&!e.poll.hasSelectedChoices&&(n=!1),t.state={showResults:n},t}return e=a,(t=[{key:"render",value:function(){if(!this.props.thread.poll)return null;var e=b(this.props.poll);return e||!this.props.poll.acl.can_vote||this.state.showResults?o.default.createElement(l.default,u({isPollOver:e,showVoting:this.showVoting},this.props)):o.default.createElement(i.default,u({showResults:this.showResults},this.props))}}])&&c(e.prototype,t),n&&c(e,n),a}();function b(e){return!!e.length&&(0,r.default)().isAfter(e.endsOn)}n.default=y},{"./results":104,"./voting":108,moment:"moment",react:"react"}],103:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return a.default.createElement("div",{className:"poll-choices-bars"},t.poll.choices.map(function(e){return a.default.createElement(o,{choice:e,key:e.hash,poll:t.poll})}))},n.PollChoice=o,n.ChoiceVotes=l,n.getVotesLabel=i,n.UserChoice=s;var r,a=(r=e("react"))&&r.__esModule?r:{default:r};function o(e){var t=0;return e.choice.votes&&e.poll.votes&&(t=Math.ceil(100*e.choice.votes/e.poll.votes)),a.default.createElement("dl",{className:"dl-horizontal"},a.default.createElement("dt",null,e.choice.label),a.default.createElement("dd",null,a.default.createElement("div",{className:"progress"},a.default.createElement("div",{className:"progress-bar",role:"progressbar","aria-valuenow":t,"aria-valuemin":"0","aria-valuemax":"100",style:{width:t+"%"}},a.default.createElement("span",{className:"sr-only"},i(e.votes,e.proc)))),a.default.createElement("ul",{className:"list-unstyled list-inline poll-chart"},a.default.createElement(l,{proc:t,votes:e.choice.votes}),a.default.createElement(s,{selected:e.choice.selected}))))}function l(e){return a.default.createElement("li",{className:"poll-chart-votes"},i(e.votes,e.proc))}function i(e,t){var n=ngettext("%(votes)s vote, %(proc)s% of total.","%(votes)s votes, %(proc)s% of total.",e);return interpolate(n,{votes:e,proc:t},!0)}function s(e){return e.selected?a.default.createElement("li",{className:"poll-chart-selected"},a.default.createElement("span",{className:"material-icon"},"check_box"),gettext("Your choice.")):null}},{react:"react"}],104:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.default.createElement("div",{className:"panel panel-default panel-poll"},r.default.createElement("div",{className:"panel-body"},r.default.createElement("h2",null,e.poll.question),r.default.createElement(l.default,{poll:e.poll}),r.default.createElement(a.default,{poll:e.poll}),r.default.createElement(o.default,{isPollOver:e.isPollOver,poll:e.poll,showVoting:e.showVoting,thread:e.thread})))};var r=i(e("react")),a=i(e("./chart")),o=i(e("./options")),l=i(e("../info"));function i(e){return e&&e.__esModule?e:{default:e}}},{"../info":101,"./chart":103,"./options":106,react:"react"}],105:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ModalBody=y,n.ChoicesList=b,n.ChoiceDetails=v,n.VotesCount=g,n.VotesList=_,n.Voter=E,n.VoteDate=w,n.default=void 0;var o=s(e("react")),l=s(e("moment")),r=s(e("../../modal-message")),a=s(e("../../modal-loader")),i=s(e("../../../services/ajax"));function s(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=m(o);return t=l?(e=m(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==c(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,o.default.Component);var e,t,n,r=p(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={isLoading:!0,error:null,data:[]},t}return e=a,(t=[{key:"componentDidMount",value:function(){var n=this;i.default.get(this.props.poll.api.votes).then(function(e){var t=e.map(function(e){return Object.assign({},e,{voters:e.voters.map(function(e){return Object.assign({},e,{voted_on:(0,l.default)(e.voted_on)})})})});n.setState({isLoading:!1,data:t})},function(e){n.setState({isLoading:!1,error:e.detail})})}},{key:"render",value:function(){return o.default.createElement("div",{className:"modal-dialog"+(this.state.error?" modal-message":" modal-sm"),role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Poll votes"))),o.default.createElement(y,{data:this.state.data,error:this.state.error,isLoading:this.state.isLoading})))}}])&&f(e.prototype,t),n&&f(e,n),a}();function y(e){return e.isLoading?o.default.createElement(a.default,null):e.error?o.default.createElement(r.default,{icon:"error_outline",message:e.error}):o.default.createElement(b,{data:e.data})}function b(e){return o.default.createElement("div",{className:"modal-body modal-poll-votes"},o.default.createElement("ul",{className:"list-unstyled votes-details"},e.data.map(function(e){return o.default.createElement(v,u({key:e.hash},e))})))}function v(e){return o.default.createElement("li",null,o.default.createElement("h4",null,e.label),o.default.createElement(g,{votes:e.votes}),o.default.createElement(_,{voters:e.voters}),o.default.createElement("hr",null))}function g(e){var t=ngettext("%(votes)s user has voted for this choice.","%(votes)s users have voted for this choice.",e.votes),n=interpolate(t,{votes:e.votes},!0);return o.default.createElement("p",null,n)}function _(e){return e.voters.length?o.default.createElement("ul",{className:"list-unstyled"},e.voters.map(function(e){return o.default.createElement(E,u({key:e.username},e))})):null}function E(e){return e.url?o.default.createElement("li",null,o.default.createElement("a",{className:"item-title",href:e.url},e.username)," ",o.default.createElement(w,{voted_on:e.voted_on})):o.default.createElement("li",null,o.default.createElement("strong",null,e.username)," ",o.default.createElement(w,{voted_on:e.voted_on}))}function w(e){return o.default.createElement("abbr",{className:"text-muted",title:e.voted_on.format("LLL")},e.voted_on.fromNow())}n.default=h},{"../../../services/ajax":359,"../../modal-loader":55,"../../modal-message":56,moment:"moment",react:"react"}],106:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.isPollOver,n=e.poll,r=e.showVoting,a=e.thread;if(!x(t,n.acl,n))return null;var o=[],l=n.acl.can_vote,i=!n.hasSelectedChoices||n.allow_revotes;l&&i&&o.push(0);(n.is_public||n.acl.can_see_votes)&&o.push(1);n.acl.can_edit&&o.push(2);n.acl.can_delete&&o.push(3);return s.default.createElement("div",{className:"row poll-options"},s.default.createElement(j,{controls:o,isPollOver:t,poll:n,showVoting:r}),s.default.createElement(S,{controls:o,poll:n}),s.default.createElement(N,{controls:o,poll:n,thread:a}),s.default.createElement(C,{controls:o,poll:n}))},n.isVisible=x,n.getClassName=P,n.ChangeVote=j,n.Delete=n.Edit=n.SeeVotes=void 0;var s=a(e("react")),l=a(e("./modal")),i=r(e("../../../reducers/poll")),u=r(e("../../../reducers/thread")),c=a(e("../../../services/ajax")),f=a(e("../../../services/modal")),d=a(e("../../../services/posting")),p=a(e("../../../services/snackbar")),m=a(e("../../../services/store"));function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!==y(e)&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((n=a?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o])}return r.default=e,t&&t.set(e,r),r}function a(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=O(o);return t=l?(e=O(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==y(r)&&"function"!=typeof r?w(n):r}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t,n){return n.is_public||t.can_delete||t.can_edit||t.can_see_votes||t.can_vote&&!e&&(!n.hasSelectedChoices||n.allow_revotes)}function P(e,t){var n="col-xs-6";return 1===e.length&&(n="col-xs-12"),3===e.length&&e[0]===t&&(n="col-xs-12"),n+" col-sm-3 col-md-2"}function j(e){var t=e.poll.acl.can_vote,n=!e.poll.hasSelectedChoices||e.poll.allow_revotes;return t&&n?s.default.createElement("div",{className:P(e.controls,0)},s.default.createElement("button",{className:"btn btn-default btn-block btn-sm",disabled:e.poll.isBusy,onClick:e.showVoting,type:"button"},gettext("Vote"))):null}var S=function(){g(o,s.default.Component);var a=E(o);function o(){var e;b(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return k(w(e=a.call.apply(a,[this].concat(n))),"onClick",function(){f.default.show(s.default.createElement(l.default,{poll:e.props.poll}))}),e}return v(o,[{key:"render",value:function(){return this.props.poll.is_public||this.props.poll.acl.can_see_votes?s.default.createElement("div",{className:P(this.props.controls,1)},s.default.createElement("button",{className:"btn btn-default btn-block btn-sm",disabled:this.props.poll.isBusy,onClick:this.onClick,type:"button"},gettext("See votes"))):null}}]),o}();n.SeeVotes=S;var N=function(){g(o,s.default.Component);var a=E(o);function o(){var e;b(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return k(w(e=a.call.apply(a,[this].concat(n))),"onClick",function(){d.default.open({submit:e.props.poll.api.index,thread:e.props.thread,poll:e.props.poll,mode:"POLL"})}),e}return v(o,[{key:"render",value:function(){return this.props.poll.acl.can_edit?s.default.createElement("div",{className:P(this.props.controls,2)},s.default.createElement("button",{className:"btn btn-default btn-block btn-sm",disabled:this.props.poll.isBusy,onClick:this.onClick,type:"button"},gettext("Edit"))):null}}]),o}();n.Edit=N;var C=function(){g(o,s.default.Component);var a=E(o);function o(){var e;b(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return k(w(e=a.call.apply(a,[this].concat(n))),"onClick",function(){return!!confirm(gettext("Are you sure you want to delete this poll? This action is not reversible."))&&(m.default.dispatch(i.busy()),void c.default.delete(e.props.poll.api.index).then(e.handleSuccess,e.handleError))}),k(w(e),"handleSuccess",function(e){p.default.success("Poll has been deleted"),m.default.dispatch(i.remove()),m.default.dispatch(u.updateAcl(e))}),k(w(e),"handleError",function(e){p.default.apiError(e),m.default.dispatch(i.release())}),e}return v(o,[{key:"render",value:function(){return this.props.poll.acl.can_delete?s.default.createElement("div",{className:P(this.props.controls,3)},s.default.createElement("button",{className:"btn btn-default btn-block btn-sm",disabled:this.props.poll.isBusy,onClick:this.onClick,type:"button"},gettext("Delete"))):null}}]),o}();n.Delete=C},{"../../../reducers/poll":346,"../../../reducers/thread":354,"../../../services/ajax":359,"../../../services/modal":366,"../../../services/posting":370,"../../../services/snackbar":371,"../../../services/store":372,"./modal":105,react:"react"}],107:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement("ul",{className:"list-unstyled list-inline poll-help"},a.default.createElement(o,{choicesLeft:e.choicesLeft}),a.default.createElement(l,{poll:e.poll}))},n.PollChoicesLeft=o,n.PollAllowRevote=l;var a=r(e("react"));r(e("../../../utils/escape-html"));function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.choicesLeft;if(0===t)return a.default.createElement("li",{className:"poll-help-choices-left"},gettext("You can't select any more choices."));var n=ngettext("You can select %(choices)s more choice.","You can select %(choices)s more choices.",t),r=interpolate(n,{choices:t},!0);return a.default.createElement("li",{className:"poll-help-choices-left"},r)}function l(e){return e.poll.allow_revotes?a.default.createElement("li",{className:"poll-help-allow-revotes"},gettext("You can change your vote later.")):a.default.createElement("li",{className:"poll-help-no-revotes"},gettext("Votes are final."))}},{"../../../utils/escape-html":378,react:"react"}],108:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=r(e("react")),l=r(e("./help")),i=r(e("./select")),s=e("./utils"),u=r(e("../info")),c=e("../results/options"),f=r(e("../../button")),d=r(e("../../form")),p=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../reducers/poll")),m=r(e("../../../services/ajax")),h=r(e("../../../services/snackbar")),y=r(e("../../../services/store"));function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=O(o);return t=l?(e=O(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==v(r)&&"function"!=typeof r?w(n):r}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(o,d.default);var e,t,n,r=E(o);function o(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),k(w(a=r.call(this,e)),"toggleChoice",function(e){var t=(0,s.getChoiceFromHash)(a.state.choices,e),n=null,n=t.selected?a.deselectChoice(t,e):a.selectChoice(t,e);a.setState({choices:n,choicesLeft:(0,s.getChoicesLeft)(a.props.poll,n)})}),k(w(a),"selectChoice",function(e,t){if(!(0,s.getChoicesLeft)(a.props.poll,a.state.choices))for(var n in a.state.choices.slice()){var r=a.state.choices[n];if(r.selected&&r.hash!=t){r.selected=!1;break}}return a.state.choices.map(function(e){return Object.assign({},e,{selected:e.hash==t||e.selected})})}),k(w(a),"deselectChoice",function(e,t){return a.state.choices.map(function(e){return Object.assign({},e,{selected:e.hash!=t&&e.selected})})}),a.state={isLoading:!1,choices:e.poll.choices,choicesLeft:(0,s.getChoicesLeft)(e.poll,e.poll.choices)},a}return e=o,(t=[{key:"clean",value:function(){return this.state.choicesLeft!==this.props.poll.allowed_choices||(h.default.error(gettext("You need to select at least one choice")),!1)}},{key:"send",value:function(){var e=[];for(var t in this.state.choices.slice()){var n=this.state.choices[t];n.selected&&e.push(n.hash)}return m.default.post(this.props.poll.api.votes,e)}},{key:"handleSuccess",value:function(e){y.default.dispatch(p.replace(e)),h.default.success(gettext("Your vote has been saved.")),this.props.showResults()}},{key:"handleError",value:function(e){400===e.status?h.default.error(e.detail):h.default.apiError(e)}},{key:"render",value:function(){var e=[];return this.props.poll.acl.can_vote&&e.push(0),(this.props.poll.is_public||this.props.poll.acl.can_see_votes)&&e.push(1),this.props.poll.acl.can_edit&&e.push(2),this.props.poll.acl.can_delete&&e.push(3),a.default.createElement("div",{className:"panel panel-default panel-poll"},a.default.createElement("form",{onSubmit:this.handleSubmit},a.default.createElement("div",{className:"panel-body"},a.default.createElement("h2",null,this.props.poll.question),a.default.createElement(u.default,{poll:this.props.poll}),a.default.createElement(i.default,{choices:this.state.choices,toggleChoice:this.toggleChoice}),a.default.createElement(l.default,{choicesLeft:this.state.choicesLeft,poll:this.props.poll})),a.default.createElement("div",{className:"panel-footer"},a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:(0,c.getClassName)(e,0)},a.default.createElement(f.default,{className:"btn-primary btn-block btn-sm",loading:this.state.isLoading},gettext("Save your vote"))),a.default.createElement("div",{className:(0,c.getClassName)(e,1)},a.default.createElement("button",{className:"btn btn-default btn-block btn-sm",disabled:this.state.isLoading,onClick:this.props.showResults,type:"button"},gettext("See results"))),a.default.createElement(c.Edit,{controls:e,poll:this.props.poll,thread:this.props.thread}),a.default.createElement(c.Delete,{controls:e,poll:this.props.poll})))))}}])&&g(e.prototype,t),n&&g(e,n),o}();n.default=o},{"../../../reducers/poll":346,"../../../services/ajax":359,"../../../services/snackbar":371,"../../../services/store":372,"../../button":10,"../../form":50,"../info":101,"../results/options":106,"./help":107,"./select":109,"./utils":110,react:"react"}],109:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return a.default.createElement("ul",{className:"list-unstyled poll-select-choices"},t.choices.map(function(e){return a.default.createElement(f,{choice:e,key:e.hash,toggleChoice:t.toggleChoice})}))},n.ChoiceSelect=void 0;var r,a=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=s(o);return t=l?(e=s(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?c(n):r}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,a.default.Component);var e,t,n,i=u(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=i.call.apply(i,[this].concat(o)),t=c(e),r=function(){e.props.toggleChoice(e.props.choice.hash)},(n="onClick")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return e=s,(t=[{key:"render",value:function(){return a.default.createElement("li",{className:"poll-select-choice"},a.default.createElement("button",{className:this.props.choice.selected?"btn btn-selected":"btn",onClick:this.onClick,type:"button"},a.default.createElement("span",{className:"material-icon"},this.props.choice.selected?"check_box":"check_box_outline_blank"),a.default.createElement("strong",null,this.props.choice.label)))}}])&&o(e.prototype,t),n&&o(e,n),s}();n.ChoiceSelect=f},{react:"react"}],110:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getChoiceFromHash=function(e,t){for(var n in e){var r=e[n];if(r.hash===t)return r}return null},n.getChoicesLeft=function(e,t){var n=[];for(var r in t){var a=t[r];a.selected&&n.push(a)}return e.allowed_choices-n.length}},{}],111:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement("div",{className:"modal-body post-changelog-diff"},a.default.createElement("ul",{className:"list-unstyled"},e.diff.map(function(e,t){return a.default.createElement(o,{item:e,key:t})})))},n.DiffItem=o,n.getItemClassName=l,n.cleanItem=i;var r,a=(r=e("react"))&&r.__esModule?r:{default:r};function o(e){return"?"===e.item[0]?null:a.default.createElement("li",{className:l(e.item)},i(e.item))}function l(e){var t="diff-item";return"-"===e[0]?t+=" diff-item-sub":"+"===e[0]&&(t+=" diff-item-add"),t}function i(e){return e.substr(2)}},{react:"react"}],112:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("react")),a=o(e("../button"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=s(o);return t=l?(e=s(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?f(n):r}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(s,r.default.Component);var e,t,n,i=c(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=i.call.apply(i,[this].concat(o)),t=f(e),r=function(){e.props.revertEdit(e.props.edit.id)},(n="onClick")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return e=s,(t=[{key:"render",value:function(){return this.props.canRevert?r.default.createElement("div",{className:"modal-footer visible-xs-block"},r.default.createElement(a.default,{className:"btn-default btn-sm btn-block",disabled:this.props.disabled,onClick:this.onClick,title:gettext("Revert post to state from before this edit.")},gettext("Revert"))):null}}])&&l(e.prototype,t),n&&l(e,n),s}();n.default=d},{"../button":10,react:"react"}],113:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ModalDialog=x,n.default=void 0;var o=r(e("react")),l=r(e("./diff")),i=r(e("./footer")),s=r(e("./toolbar")),u=e("./utils"),c=r(e("../modal-message")),f=r(e("../modal-loader")),d=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../reducers/post")),p=r(e("../../services/ajax")),m=r(e("../../services/modal")),h=r(e("../../services/snackbar")),y=r(e("../../services/store"));function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=O(o);return t=l?(e=O(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==v(r)&&"function"!=typeof r?w(n):r}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(a,o.default.Component);var e,t,n,r=E(a);function a(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),k(w(n=r.call(this,e)),"goToEdit",function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;n.setState({isBusy:!0});var t=n.props.post.api.edits;null!==e&&(t+="?edit="+e),p.default.get(t).then(function(e){n.setState({isReady:!0,isBusy:!1,edit:(0,u.hydrateEdit)(e)})},function(e){n.setState({isReady:!0,isBusy:!1,error:e.detail})})}),k(w(n),"revertEdit",function(e){var t;n.state.isBusy||confirm(gettext("Are you sure you with to revert this post to the state from before this edit?"))&&(n.setState({isBusy:!0}),t=n.props.post.api.edits+"?edit="+e,p.default.post(t).then(function(e){var t=d.hydrate(e);y.default.dispatch(d.patch(e,t)),h.default.success(gettext("Post has been reverted to previous state.")),m.default.hide()},function(e){h.default.apiError(e),n.setState({isBusy:!1})}))}),n.state={isReady:!1,isBusy:!0,canRevert:e.post.acl.can_edit,error:null,edit:null},n}return e=a,(t=[{key:"componentDidMount",value:function(){this.goToEdit()}},{key:"render",value:function(){return this.state.error?o.default.createElement(x,{className:"modal-dialog modal-message"},o.default.createElement(c.default,{message:this.state.error})):this.state.isReady?o.default.createElement(x,null,o.default.createElement(s.default,{canRevert:this.state.canRevert,disabled:this.state.isBusy,edit:this.state.edit,goToEdit:this.goToEdit,revertEdit:this.revertEdit}),o.default.createElement(l.default,{diff:this.state.edit.diff}),o.default.createElement(i.default,{canRevert:this.state.canRevert,disabled:this.state.isBusy,edit:this.state.edit,revertEdit:this.revertEdit})):o.default.createElement(x,null,o.default.createElement(f.default,null))}}])&&g(e.prototype,t),n&&g(e,n),a}();function x(e){return o.default.createElement("div",{className:e.className||"modal-dialog",role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Post edits history"))),e.children))}n.default=a},{"../../reducers/post":347,"../../services/ajax":359,"../../services/modal":366,"../../services/snackbar":371,"../../services/store":372,"../modal-loader":55,"../modal-message":56,"./diff":111,"./footer":112,"./toolbar":114,"./utils":115,react:"react"}],114:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.GoBackBtn=v,n.GoForwardBtn=g,n.GoLastBtn=_,n.RevertBtn=E,n.Label=w,n.default=void 0;var l=o(e("react")),r=o(e("../button")),a=o(e("../../utils/escape-html"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=d(o);return t=l?(e=d(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?f(n):r}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m='<abbr title="%(absolute)s">%(relative)s</abbr>',h='<span class="item-title">%(user)s</span>',y='<a href="%(url)s" class="item-title">%(user)s</a>',b=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,l.default.Component);var e,t,n,a=c(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(f(e=a.call.apply(a,[this].concat(n))),"goLast",function(){e.props.goToEdit()}),p(f(e),"goForward",function(){e.props.goToEdit(e.props.edit.next)}),p(f(e),"goBack",function(){e.props.goToEdit(e.props.edit.previous)}),p(f(e),"revertEdit",function(){e.props.revertEdit(e.props.edit.id)}),e}return e=o,(t=[{key:"render",value:function(){return l.default.createElement("div",{className:"modal-toolbar post-changelog-toolbar"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-12 col-sm-4"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-xs-4"},l.default.createElement(v,{disabled:this.props.disabled,edit:this.props.edit,onClick:this.goBack})),l.default.createElement("div",{className:"col-xs-4"},l.default.createElement(g,{disabled:this.props.disabled,edit:this.props.edit,onClick:this.goForward})),l.default.createElement("div",{className:"col-xs-4"},l.default.createElement(_,{disabled:this.props.disabled,edit:this.props.edit,onClick:this.goLast})))),l.default.createElement("div",{className:"col-xs-12 col-sm-5 xs-margin-top-half post-change-label"},l.default.createElement(w,{edit:this.props.edit})),l.default.createElement(E,{canRevert:this.props.canRevert,disabled:this.props.disabled,onClick:this.revertEdit})))}}])&&s(e.prototype,t),n&&s(e,n),o}();function v(e){return l.default.createElement(r.default,{className:"btn-default btn-block btn-icon btn-sm",disabled:e.disabled||!e.edit.previous,onClick:e.onClick,title:gettext("See previous change")},l.default.createElement("span",{className:"material-icon"},"chevron_left"))}function g(e){return l.default.createElement(r.default,{className:"btn-default btn-block btn-icon btn-sm",disabled:e.disabled||!e.edit.next,onClick:e.onClick,title:gettext("See next change")},l.default.createElement("span",{className:"material-icon"},"chevron_right"))}function _(e){return l.default.createElement(r.default,{className:"btn-default btn-block btn-icon btn-sm",disabled:e.disabled||!e.edit.next,onClick:e.onClick,title:gettext("See previous change")},l.default.createElement("span",{className:"material-icon"},"last_page"))}function E(e){return e.canRevert?l.default.createElement("div",{className:"col-sm-3 hidden-xs"},l.default.createElement(r.default,{className:"btn-default btn-sm btn-block",disabled:e.disabled,onClick:e.onClick,title:gettext("Revert post to state from before this edit.")},gettext("Revert"))):null}function w(e){var t=null,t=e.edit.url.editor?interpolate(y,{url:(0,a.default)(e.edit.url.editor),user:(0,a.default)(e.edit.editor_name)},!0):interpolate(h,{user:(0,a.default)(e.edit.editor_name)},!0),n=interpolate(m,{absolute:(0,a.default)(e.edit.edited_on.format("LLL")),relative:(0,a.default)(e.edit.edited_on.fromNow())},!0),r=interpolate((0,a.default)(gettext("By %(edited_by)s %(edited_on)s.")),{edited_by:t,edited_on:n},!0);return l.default.createElement("p",{dangerouslySetInnerHTML:{__html:r}})}n.default=b},{"../../utils/escape-html":378,"../button":10,react:"react"}],115:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.hydrateEdit=function(e){return Object.assign({},e,{edited_on:(0,a.default)(e.edited_on)})};var r,a=(r=e("moment"))&&r.__esModule?r:{default:r}},{moment:"moment"}],116:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.isReady,n=e.posts,r=e.poster;return t?a.default.createElement("ul",{className:"posts-list post-feed ui-ready"},n.map(function(e){return a.default.createElement(o.default,{key:e.id,post:e,poster:r})})):a.default.createElement(l.default,null)};var a=r(e("react")),o=r(e("./post")),l=r(e("./preview"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./post":119,"./preview":125,react:"react"}],117:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.post.content?r.default.createElement(l,e):r.default.createElement(i,e)},n.Default=l,n.Invalid=i;var r=o(e("react")),a=o(e("../../misago-markup"));o(e("../../../utils/escape-html"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){return r.default.createElement("div",{className:"post-body"},r.default.createElement(a.default,{markup:e.post.content}))}function i(e){return r.default.createElement("div",{className:"post-body post-body-invalid"},r.default.createElement("p",{className:"lead"},gettext("This post's contents cannot be displayed.")),r.default.createElement("p",{className:"text-muted"},gettext("This error is caused by invalid post content manipulation.")))}},{"../../../utils/escape-html":378,"../../misago-markup":54,react:"react"}],118:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.post,n=t.category,r=t.thread,a=interpolate(gettext("posted %(posted_on)s"),{posted_on:t.posted_on.format("LL, LT")},!0);return o.default.createElement("div",{className:"post-heading"},o.default.createElement("a",{className:"btn btn-link item-title",href:r.url},r.title),o.default.createElement("a",{className:"btn btn-link post-category",href:n.url.index},n.name),o.default.createElement("a",{href:t.url.index,className:"btn btn-link posted-on",title:a},t.posted_on.fromNow()))};var r,o=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],119:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.post,n=e.poster||t.poster,r="post";n&&n.rank.css_class&&(r+=" post-"+n.rank.css_class);return a.default.createElement("li",{className:r,id:"post-"+t.id},a.default.createElement("div",{className:"panel panel-default panel-post"},a.default.createElement("div",{className:"panel-body"},a.default.createElement(i.default,{post:t,poster:n}),a.default.createElement(l.default,{post:t}),a.default.createElement(o.default,{post:t}))))};var a=r(e("react")),o=r(e("./body")),l=r(e("./header")),i=r(e("./post-side"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./body":117,"./header":118,"./post-side":122,react:"react"}],120:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.post;return r.default.createElement("div",{className:"post-side post-side-anonymous"},r.default.createElement(o.default,{post:t}),r.default.createElement("div",{className:"media"},r.default.createElement("div",{className:"media-left"},r.default.createElement("span",null,r.default.createElement(a.default,{className:"poster-avatar",size:50}))),r.default.createElement("div",{className:"media-body"},r.default.createElement("div",{className:"media-heading"},r.default.createElement("span",{className:"item-title"},t.poster_name)),r.default.createElement("span",{className:"user-title user-title-anonymous"},gettext("Removed user")))))};var r=l(e("react")),a=l(e("../../../avatar")),o=l(e("./button"));function l(e){return e&&e.__esModule?e:{default:e}}},{"../../../avatar":8,"./button":121,react:"react"}],121:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.post;return a.default.createElement("a",{className:"btn btn-default btn-icon pull-right",href:t.url.index},a.default.createElement("span",{className:"btn-text-left hidden-xs"},gettext("See post")),a.default.createElement("span",{className:"material-icon"},"chevron_right"))};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],122:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.post,n=e.poster;if(n.id)return r.default.createElement(o.default,{post:t,poster:n});return r.default.createElement(a.default,{post:t})};var r=l(e("react")),a=l(e("./anonymous")),o=l(e("./registered"));function l(e){return e&&e.__esModule?e:{default:e}}},{"./anonymous":120,"./registered":123,react:"react"}],123:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.post,n=e.poster;return r.default.createElement("div",{className:"post-side post-side-registered"},r.default.createElement(o.default,{post:t}),r.default.createElement("div",{className:"media"},r.default.createElement("div",{className:"media-left"},r.default.createElement("a",{href:n.url},r.default.createElement(a.default,{className:"poster-avatar",size:50,user:n}))),r.default.createElement("div",{className:"media-body"},r.default.createElement("div",{className:"media-heading"},r.default.createElement("a",{className:"item-title",href:n.url},n.username)),r.default.createElement(l.default,{title:n.title,rank:n.rank}))))};var r=i(e("react")),a=i(e("../../../avatar")),o=i(e("./button")),l=i(e("./user-title"));function i(e){return e&&e.__esModule?e:{default:e}}},{"../../../avatar":8,"./button":121,"./user-title":124,react:"react"}],124:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.rank,n=e.title||t.title||t.name,r="user-title";t.css_class&&(r+=" user-title-"+t.css_class);if(t.is_tab)return a.default.createElement("a",{className:r,href:t.url},n);return a.default.createElement("span",{className:r},n)};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],125:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return r.default.createElement("ul",{className:"posts-list post-feed ui-preview"},r.default.createElement("li",{className:"post"},r.default.createElement("div",{className:"panel panel-default panel-post"},r.default.createElement("div",{className:"panel-body"},r.default.createElement("div",{className:"post-side post-side-anonymous"},r.default.createElement("div",{className:"media"},r.default.createElement("div",{className:"media-left"},r.default.createElement("span",null,r.default.createElement(a.default,{className:"poster-avatar",size:50}))),r.default.createElement("div",{className:"media-body"},r.default.createElement("div",{className:"media-heading"},r.default.createElement("span",{className:"item-title"},r.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,200)+"px"}}," "))),r.default.createElement("span",{className:"user-title user-title-anonymous"},r.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,200)+"px"}}," "))))),r.default.createElement("div",{className:"post-heading"},r.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,200)+"px"}}," ")),r.default.createElement("div",{className:"post-body"},r.default.createElement("article",{className:"misago-markup"},r.default.createElement("p",null,r.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,200)+"px"}}," ")," ",r.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,200)+"px"}}," ")," ",r.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,200)+"px"}}," "))))))))};var r=s(e("react")),a=s(e("../avatar")),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../utils/random"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}},{"../../utils/random":382,"../avatar":8,react:"react"}],126:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.hydrateLike=b,n.ModalDialog=v,n.LikesList=g,n.LikeDetails=_,n.LikeDate=E,n.default=void 0;var i=u(e("react")),r=u(e("moment")),a=u(e("./avatar")),o=u(e("./modal-message")),l=u(e("./modal-loader")),s=u(e("../services/ajax"));function u(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,i.default.Component);var e,t,n,r=m(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={isReady:!1,error:null,likes:[]},t}return e=a,(t=[{key:"componentDidMount",value:function(){var t=this;s.default.get(this.props.post.api.likes).then(function(e){t.setState({isReady:!0,likes:e.map(b)})},function(e){t.setState({isReady:!0,error:e.detail})})}},{key:"render",value:function(){return this.state.error?i.default.createElement(v,{className:"modal-message"},i.default.createElement(o.default,{message:this.state.error})):this.state.isReady?this.state.likes.length?i.default.createElement(v,{className:"modal-sm",likes:this.state.likes},i.default.createElement(g,{likes:this.state.likes})):i.default.createElement(v,{className:"modal-message"},i.default.createElement(o.default,{message:gettext("No users have liked this post.")})):i.default.createElement(v,{className:"modal-sm"},i.default.createElement(l.default,null))}}])&&d(e.prototype,t),n&&d(e,n),a}();function b(e){return Object.assign({},e,{liked_on:(0,r.default)(e.liked_on)})}function v(e){var t,n,r=e.className,a=e.children,o=e.likes,l=gettext("Post Likes");return o&&(t=o.length,n=ngettext("%(likes)s like","%(likes)s likes",t),l=interpolate(n,{likes:t},!0)),i.default.createElement("div",{className:"modal-dialog "+(r||""),role:"document"},i.default.createElement("div",{className:"modal-content"},i.default.createElement("div",{className:"modal-header"},i.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},i.default.createElement("span",{"aria-hidden":"true"},"×")),i.default.createElement("h4",{className:"modal-title"},l)),a))}function g(e){return i.default.createElement("div",{className:"modal-body modal-post-likers"},i.default.createElement("ul",{className:"media-list"},e.likes.map(function(e){return i.default.createElement(_,c({key:e.id},e))})))}function _(e){if(e.url){var t={id:e.liker_id,avatars:e.avatars};return i.default.createElement("li",{className:"media"},i.default.createElement("div",{className:"media-left"},i.default.createElement("a",{className:"user-avatar",href:e.url},i.default.createElement(a.default,{size:"50",user:t}))),i.default.createElement("div",{className:"media-body"},i.default.createElement("a",{className:"item-title",href:e.url},e.username)," ",i.default.createElement(E,{likedOn:e.liked_on})))}return i.default.createElement("li",{className:"media"},i.default.createElement("div",{className:"media-left"},i.default.createElement("span",{className:"user-avatar"},i.default.createElement(a.default,{size:"50"}))),i.default.createElement("div",{className:"media-body"},i.default.createElement("strong",null,e.username)," ",i.default.createElement(E,{likedOn:e.liked_on})))}function E(e){return i.default.createElement("span",{className:"text-muted",title:e.likedOn.format("LLL")},e.likedOn.fromNow())}n.default=y},{"../services/ajax":359,"./avatar":8,"./modal-loader":55,"./modal-message":56,moment:"moment",react:"react"}],127:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../editor")),i=r(e("../form")),s=r(e("./utils/container")),u=r(e("./utils/loader")),c=r(e("./utils/message")),f=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==b(e)&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("./utils/attachments")),d=e("./utils/validators"),p=r(e("../../services/ajax")),m=r(e("../../services/posting")),h=r(e("../../services/snackbar"));function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==b(r)&&"function"!=typeof r?E(n):r}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,i.default);var e,t,n,r=_(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),O(E(t=r.call(this,e)),"loadSuccess",function(e){t.setState({isReady:!0,post:e.post,attachments:f.hydrate(e.attachments),protect:e.is_protected,canProtect:e.can_protect})}),O(E(t),"loadError",function(e){t.setState({isErrored:e.detail})}),O(E(t),"onCancel",function(){confirm(gettext("Are you sure you want to discard changes?"))&&m.default.close()}),O(E(t),"onProtect",function(){t.setState({protect:!0})}),O(E(t),"onUnprotect",function(){t.setState({protect:!1})}),O(E(t),"onPostChange",function(e){t.changeValue("post",e)}),O(E(t),"onAttachmentsChange",function(e){t.setState({attachments:e})}),t.state={isReady:!1,isLoading:!1,isErrored:!1,post:"",attachments:[],protect:!1,canProtect:!1,validators:{post:(0,d.getPostValidators)()},errors:{}},t}return e=a,(t=[{key:"componentDidMount",value:function(){p.default.get(this.props.config).then(this.loadSuccess,this.loadError)}},{key:"clean",value:function(){if(!this.state.post.trim().length)return h.default.error(gettext("You have to enter a message.")),!1;var e=this.validate();return!e.post||(h.default.error(e.post[0]),!1)}},{key:"send",value:function(){return p.default.put(this.props.submit,{post:this.state.post,attachments:f.clean(this.state.attachments),protect:this.state.protect})}},{key:"handleSuccess",value:function(e){h.default.success(gettext("Reply has been edited.")),window.location=e.url.index,this.setState({isLoading:!0})}},{key:"handleError",value:function(e){var t;400===e.status?(t=[].concat(e.non_field_errors||[],e.category||[],e.title||[],e.post||[],e.attachments||[]),h.default.error(t[0])):h.default.apiError(e)}},{key:"render",value:function(){return this.state.isReady?o.default.createElement(s.default,{className:"posting-form"},o.default.createElement("form",{onSubmit:this.handleSubmit,method:"POST"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-md-12"},o.default.createElement(l.default,{attachments:this.state.attachments,canProtect:this.state.canProtect,loading:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onCancel:this.onCancel,onChange:this.onPostChange,onProtect:this.onProtect,onUnprotect:this.onUnprotect,protect:this.state.protect,submitLabel:gettext("Edit reply"),value:this.state.post}))))):this.state.isErrored?o.default.createElement(c.default,{message:this.state.isErrored}):o.default.createElement(u.default,null)}}])&&v(e.prototype,t),n&&v(e,n),a}();n.default=a},{"../../services/ajax":359,"../../services/posting":370,"../../services/snackbar":371,"../editor":45,"../form":50,"./utils/attachments":132,"./utils/container":133,"./utils/loader":134,"./utils/message":135,"./utils/validators":138,react:"react"}],128:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return"START"===e.mode?r.default.createElement(a.default,e):"START_PRIVATE"===e.mode?r.default.createElement(o.default,e):"REPLY"===e.mode?r.default.createElement(l.default,e):"EDIT"===e.mode?r.default.createElement(i.default,e):null};var r=s(e("react")),a=s(e("./start")),o=s(e("./start-private")),l=s(e("./reply")),i=s(e("./edit"));function s(e){return e&&e.__esModule?e:{default:e}}},{"./edit":127,"./reply":129,"./start":131,"./start-private":130,react:"react"}],129:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../editor")),i=r(e("../form")),s=r(e("./utils/container")),u=r(e("./utils/loader")),c=r(e("./utils/message")),f=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==b(e)&&"function"!=typeof e)return{default:e};var t=y();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("./utils/attachments")),d=e("./utils/validators"),p=r(e("../../services/ajax")),m=r(e("../../services/posting")),h=r(e("../../services/snackbar"));function y(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return y=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==b(r)&&"function"!=typeof r?E(n):r}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,i.default);var e,t,n,r=_(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),O(E(t=r.call(this,e)),"loadSuccess",function(e){t.setState({isReady:!0,post:e.post?'[quote="@'+e.poster+'"]\n'+e.post+"\n[/quote]":""})}),O(E(t),"loadError",function(e){t.setState({isErrored:e.detail})}),O(E(t),"appendData",function(e){var n=e.post?'[quote="@'+e.poster+'"]\n'+e.post+"\n[/quote]\n\n":"";t.setState(function(e,t){return 0<e.post.length?{post:e.post+"\n\n"+n}:{post:n}})}),O(E(t),"onCancel",function(){confirm(gettext("Are you sure you want to discard your reply?"))&&m.default.close()}),O(E(t),"onPostChange",function(e){t.changeValue("post",e)}),O(E(t),"onAttachmentsChange",function(e){t.setState({attachments:e})}),t.state={isReady:!1,isLoading:!1,isErrored:!1,post:"",attachments:[],validators:{post:(0,d.getPostValidators)()},errors:{}},t}return e=a,(t=[{key:"componentDidMount",value:function(){p.default.get(this.props.config,this.props.context||null).then(this.loadSuccess,this.loadError)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.context,n=e.context;t&&n&&t.reply===n.reply||p.default.get(e.config,e.context||null).then(this.appendData,h.default.apiError)}},{key:"clean",value:function(){if(!this.state.post.trim().length)return h.default.error(gettext("You have to enter a message.")),!1;var e=this.validate();return!e.post||(h.default.error(e.post[0]),!1)}},{key:"send",value:function(){return p.default.post(this.props.submit,{post:this.state.post,attachments:f.clean(this.state.attachments)})}},{key:"handleSuccess",value:function(e){h.default.success(gettext("Your reply has been posted.")),window.location=e.url.index,this.setState({isLoading:!0})}},{key:"handleError",value:function(e){var t;400===e.status?(t=[].concat(e.non_field_errors||[],e.post||[],e.attachments||[]),h.default.error(t[0])):h.default.apiError(e)}},{key:"render",value:function(){return this.state.isReady?o.default.createElement(s.default,{className:"posting-form"},o.default.createElement("form",{onSubmit:this.handleSubmit,method:"POST"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-md-12"},o.default.createElement(l.default,{attachments:this.state.attachments,loading:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onCancel:this.onCancel,onChange:this.onPostChange,submitLabel:gettext("Post reply"),value:this.state.post,expand:!1}))))):this.state.isErrored?o.default.createElement(c.default,{message:this.state.isErrored}):o.default.createElement(u.default,null)}}])&&v(e.prototype,t),n&&v(e,n),a}();n.default=a},{"../../services/ajax":359,"../../services/posting":370,"../../services/snackbar":371,"../editor":45,"../form":50,"./utils/attachments":132,"./utils/container":133,"./utils/loader":134,"./utils/message":135,"./utils/validators":138,react:"react"}],130:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../editor")),i=r(e("../form")),s=r(e("./utils/container")),u=(r(e("./utils/message")),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==y(e)&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("./utils/attachments"))),c=r(e("./utils/usernames")),f=e("./utils/validators"),d=r(e("../../services/ajax")),p=r(e("../../services/posting")),m=r(e("../../services/snackbar"));function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=E(o);return t=l?(e=E(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==y(r)&&"function"!=typeof r?_(n):r}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,i.default);var e,t,n,r=g(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),w(_(t=r.call(this,e)),"onCancel",function(){confirm(gettext("Are you sure you want to discard private thread?"))&&p.default.close()}),w(_(t),"onToChange",function(e){t.changeValue("to",e.target.value)}),w(_(t),"onTitleChange",function(e){t.changeValue("title",e.target.value)}),w(_(t),"onPostChange",function(e){t.changeValue("post",e)}),w(_(t),"onAttachmentsChange",function(e){t.setState({attachments:e})});var n=(e.to||[]).map(function(e){return e.username}).join(", ");return t.state={isLoading:!1,to:n,title:"",post:"",attachments:[],validators:{title:(0,f.getTitleValidators)(),post:(0,f.getPostValidators)()},errors:{}},t}return e=a,(t=[{key:"clean",value:function(){if(!(0,c.default)(this.state.to).length)return m.default.error(gettext("You have to enter at least one recipient.")),!1;if(!this.state.title.trim().length)return m.default.error(gettext("You have to enter thread title.")),!1;if(!this.state.post.trim().length)return m.default.error(gettext("You have to enter a message.")),!1;var e=this.validate();return e.title?(m.default.error(e.title[0]),!1):!e.post||(m.default.error(e.post[0]),!1)}},{key:"send",value:function(){return d.default.post(this.props.submit,{to:(0,c.default)(this.state.to),title:this.state.title,post:this.state.post,attachments:u.clean(this.state.attachments)})}},{key:"handleSuccess",value:function(e){m.default.success(gettext("Your thread has been posted.")),window.location=e.url,this.setState({isLoading:!0})}},{key:"handleError",value:function(e){var t;400===e.status?(t=[].concat(e.non_field_errors||[],e.to||[],e.title||[],e.post||[],e.attachments||[]),m.default.error(t[0])):m.default.apiError(e)}},{key:"render",value:function(){return o.default.createElement(s.default,{className:"posting-form",withFirstRow:!0},o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"row first-row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,onChange:this.onToChange,placeholder:gettext("Comma separated list of user names, eg.: Danny, Lisa"),type:"text",value:this.state.to}))),o.default.createElement("div",{className:"row first-row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,onChange:this.onTitleChange,placeholder:gettext("Thread title"),type:"text",value:this.state.title}))),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-12"},o.default.createElement(l.default,{attachments:this.state.attachments,loading:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onCancel:this.onCancel,onChange:this.onPostChange,submitLabel:gettext("Post thread"),value:this.state.post})))))}}])&&b(e.prototype,t),n&&b(e,n),a}();n.default=a},{"../../services/ajax":359,"../../services/posting":370,"../../services/snackbar":371,"../editor":45,"../form":50,"./utils/attachments":132,"./utils/container":133,"./utils/message":135,"./utils/usernames":137,"./utils/validators":138,react:"react"}],131:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../category-select")),i=r(e("../editor")),s=r(e("../form")),u=r(e("./utils/container")),c=r(e("./utils/loader")),f=r(e("./utils/message")),d=r(e("./utils/options")),p=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==g(e)&&"function"!=typeof e)return{default:e};var t=v();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("./utils/attachments")),m=e("./utils/validators"),h=r(e("../../services/ajax")),y=r(e("../../services/posting")),b=r(e("../../services/snackbar"));function v(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return v=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=k(o);return t=l?(e=k(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==g(r)&&"function"!=typeof r?O(n):r}}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(a,s.default);var e,t,n,r=w(a);function a(e){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),x(O(o=r.call(this,e)),"loadSuccess",function(e){var t=null,n=!1,r=null,a=e.map(function(e){return!1===e.post||t&&e.id!=o.state.category||(t=e.id,r=e.post),e.post&&(e.post.close||e.post.hide||e.post.pin)&&(n=!0),Object.assign(e,{disabled:!1===e.post,label:e.name,value:e.id})});o.setState({isReady:!0,showOptions:n,categories:a,category:t,categoryOptions:r})}),x(O(o),"loadError",function(e){o.setState({isErrored:e.detail})}),x(O(o),"onCancel",function(){confirm(gettext("Are you sure you want to discard thread?"))&&y.default.close()}),x(O(o),"onTitleChange",function(e){o.changeValue("title",e.target.value)}),x(O(o),"onCategoryChange",function(t){var e=o.state.categories.find(function(e){return t.target.value==e.value}),n=o.state.pin;e.post.pin&&e.post.pin<n&&(n=e.post.pin),o.setState({category:e.id,categoryOptions:e.post,pin:n})}),x(O(o),"onPostChange",function(e){o.changeValue("post",e)}),x(O(o),"onAttachmentsChange",function(e){o.setState({attachments:e})}),x(O(o),"onClose",function(){o.changeValue("close",!0)}),x(O(o),"onOpen",function(){o.changeValue("close",!1)}),x(O(o),"onPinGlobally",function(){o.changeValue("pin",2)}),x(O(o),"onPinLocally",function(){o.changeValue("pin",1)}),x(O(o),"onUnpin",function(){o.changeValue("pin",0)}),x(O(o),"onHide",function(){o.changeValue("hide",!0)}),x(O(o),"onUnhide",function(){o.changeValue("hide",!1)}),o.state={isReady:!1,isLoading:!1,isErrored:!1,showOptions:!1,categoryOptions:null,title:"",category:e.category||null,categories:[],post:"",attachments:[],close:!1,hide:!1,pin:0,validators:{title:(0,m.getTitleValidators)(),post:(0,m.getPostValidators)()},errors:{}},o}return e=a,(t=[{key:"componentDidMount",value:function(){h.default.get(this.props.config).then(this.loadSuccess,this.loadError)}},{key:"clean",value:function(){if(!this.state.title.trim().length)return b.default.error(gettext("You have to enter thread title.")),!1;if(!this.state.post.trim().length)return b.default.error(gettext("You have to enter a message.")),!1;var e=this.validate();return e.title?(b.default.error(e.title[0]),!1):!e.post||(b.default.error(e.post[0]),!1)}},{key:"send",value:function(){return h.default.post(this.props.submit,{title:this.state.title,category:this.state.category,post:this.state.post,attachments:p.clean(this.state.attachments),close:this.state.close,hide:this.state.hide,pin:this.state.pin})}},{key:"handleSuccess",value:function(e){b.default.success(gettext("Your thread has been posted.")),window.location=e.url,this.setState({isLoading:!0})}},{key:"handleError",value:function(e){var t;400===e.status?(t=[].concat(e.non_field_errors||[],e.category||[],e.title||[],e.post||[],e.attachments||[]),b.default.error(t[0])):b.default.apiError(e)}},{key:"render",value:function(){if(this.state.isErrored)return o.default.createElement(f.default,{message:this.state.isErrored});if(!this.state.isReady)return o.default.createElement(c.default,null);var e=0;this.state.categoryOptions.close&&(e+=1),this.state.categoryOptions.hide&&(e+=1),this.state.categoryOptions.pin&&(e+=1);var t=null,t=1===e?"col-sm-6":"col-sm-8";return t+=3===e?" col-md-6":e?" col-md-7":" col-md-9",o.default.createElement(u.default,{className:"posting-form",withFirstRow:!0},o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"row first-row"},o.default.createElement("div",{className:t},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,onChange:this.onTitleChange,placeholder:gettext("Thread title"),type:"text",value:this.state.title})),o.default.createElement("div",{className:"col-xs-12 col-sm-4 col-md-3 xs-margin-top"},o.default.createElement(l.default,{choices:this.state.categories,disabled:this.state.isLoading,onChange:this.onCategoryChange,value:this.state.category})),o.default.createElement(d.default,{close:this.state.close,columns:e,disabled:this.state.isLoading,hide:this.state.hide,onClose:this.onClose,onHide:this.onHide,onOpen:this.onOpen,onPinGlobally:this.onPinGlobally,onPinLocally:this.onPinLocally,onUnhide:this.onUnhide,onUnpin:this.onUnpin,options:this.state.categoryOptions,pin:this.state.pin,showOptions:this.state.showOptions})),o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-md-12"},o.default.createElement(i.default,{attachments:this.state.attachments,loading:this.state.isLoading,onAttachmentsChange:this.onAttachmentsChange,onCancel:this.onCancel,onChange:this.onPostChange,submitLabel:gettext("Post thread"),value:this.state.post})))))}}])&&_(e.prototype,t),n&&_(e,n),a}();n.default=a},{"../../services/ajax":359,"../../services/posting":370,"../../services/snackbar":371,"../category-select":23,"../editor":45,"../form":50,"./utils/attachments":132,"./utils/container":133,"./utils/loader":134,"./utils/message":135,"./utils/options":136,"./utils/validators":138,react:"react"}],132:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.clean=function(e){return e.filter(function(e){return e.id&&!e.isRemoved}).map(function(e){return e.id})},n.hydrate=function(e){return e.map(function(e){return Object.assign({},e,{uploaded_on:(0,a.default)(e.uploaded_on)})})};var r,a=(r=e("moment"))&&r.__esModule?r:{default:r}},{moment:"moment"}],133:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement("div",{className:e.className},a.default.createElement("div",{className:"container"},e.children))};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],134:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.default.createElement(a.default,{className:"posting-loader"},r.default.createElement(o.default,null))};var r=l(e("react")),a=l(e("./container")),o=l(e("../../loader"));function l(e){return e&&e.__esModule?e:{default:e}}},{"../../loader":52,"./container":133,react:"react"}],135:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.default.createElement(a.default,{className:"posting-message"},r.default.createElement("div",{className:"message-body"},r.default.createElement("p",null,r.default.createElement("span",{className:"material-icon"},"error_outline"),e.message),r.default.createElement("button",{type:"button",className:"btn btn-default",onClick:o.default.close},gettext("Dismiss"))))};var r=l(e("react")),a=l(e("./container")),o=l(e("../../../services/posting"));function l(e){return e&&e.__esModule?e:{default:e}}},{"../../../services/posting":370,"./container":133,react:"react"}],136:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(!e.showOptions)return null;var t=e.columns,n="col-xs-12 xs-margin-top";n+=1===t?" col-sm-2":" sm-margin-top";n+=3===t?" col-md-3":" col-md-2";n+=" posting-options";var r="col-xs-"+12/t,a="btn-text";a+=3===t?" visible-sm-inline-block":2===t?" hidden-md hidden-lg":" hidden-sm";return o.default.createElement("div",{className:n},o.default.createElement("div",{className:"row"},o.default.createElement(s,{className:r,disabled:e.disabled,onPinGlobally:e.onPinGlobally,onPinLocally:e.onPinLocally,onUnpin:e.onUnpin,pin:e.pin,show:e.options.pin,textClassName:a}),o.default.createElement(i,{className:r,disabled:e.disabled,hide:e.hide,onHide:e.onHide,onUnhide:e.onUnhide,show:e.options.hide,textClassName:a}),o.default.createElement(l,{className:r,close:e.close,disabled:e.disabled,onClose:e.onClose,onOpen:e.onOpen,show:e.options.close,textClassName:a})))},n.CloseOptions=l,n.HideOptions=i,n.PinOptions=s;var r,o=(r=e("react"))&&r.__esModule?r:{default:r};function l(e){if(!e.show)return null;var t=e.close?gettext("Closed"):gettext("Open");return o.default.createElement("div",{className:e.className},o.default.createElement("button",{className:"btn btn-default btn-block",disabled:e.disabled,onClick:e.close?e.onOpen:e.onClose,title:t,type:"button"},o.default.createElement("span",{className:"material-icon"},e.close?"lock":"lock_outline"),o.default.createElement("span",{className:e.textClassName},t)))}function i(e){if(!e.show)return null;var t=e.hide?gettext("Hidden"):gettext("Not hidden");return o.default.createElement("div",{className:e.className},o.default.createElement("button",{className:"btn btn-default btn-block",disabled:e.disabled,onClick:e.hide?e.onUnhide:e.onHide,title:t,type:"button"},o.default.createElement("span",{className:"material-icon"},e.hide?"visibility_off":"visibility"),o.default.createElement("span",{className:e.textClassName},t)))}function s(e){if(!e.show)return null;var t=null,n=null,r=null;switch(e.pin){case 0:t="radio_button_unchecked",n=e.onPinLocally,r=gettext("Unpinned");break;case 1:t="bookmark_outline",n=e.onPinGlobally,r=gettext("Pinned locally"),n=2==e.show?e.onPinGlobally:e.onUnpin;break;case 2:t="bookmark",n=e.onUnpin,r=gettext("Pinned globally")}return o.default.createElement("div",{className:e.className},o.default.createElement("button",{className:"btn btn-default btn-block",disabled:e.disabled,onClick:n,title:r,type:"button"},o.default.createElement("span",{className:"material-icon"},t),o.default.createElement("span",{className:e.textClassName},r)))}},{react:"react"}],137:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=e.split(",").map(function(e){return e.trim().toLowerCase()}).filter(function(e){return 0<e.length});return n.filter(function(e,t){return n.indexOf(e)==t})}},{}],138:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getTitleValidators=function(){return[l(),i()]},n.getPostValidators=function(){return o.default.get("SETTINGS").post_length_max?[s(),u()]:[s()]},n.getTitleLengthMin=l,n.getTitleLengthMax=i,n.validatePostLengthMin=s,n.validatePostLengthMax=u;var r,a=e("../../../utils/validators"),o=(r=e("../../.."))&&r.__esModule?r:{default:r};function l(){return(0,a.minLength)(o.default.get("SETTINGS").thread_title_length_min,function(e,t){var n=ngettext("Thread title should be at least %(limit_value)s character long (it has %(show_value)s).","Thread title should be at least %(limit_value)s characters long (it has %(show_value)s).",e);return interpolate(n,{limit_value:e,show_value:t},!0)})}function i(){return(0,a.maxLength)(o.default.get("SETTINGS").thread_title_length_max,function(e,t){var n=ngettext("Thread title cannot be longer than %(limit_value)s character (it has %(show_value)s).","Thread title cannot be longer than %(limit_value)s characters (it has %(show_value)s).",e);return interpolate(n,{limit_value:e,show_value:t},!0)})}function s(){return(0,a.minLength)(o.default.get("SETTINGS").post_length_min,function(e,t){var n=ngettext("Posted message should be at least %(limit_value)s character long (it has %(show_value)s).","Posted message should be at least %(limit_value)s characters long (it has %(show_value)s).",e);return interpolate(n,{limit_value:e,show_value:t},!0)})}function u(){return(0,a.maxLength)(o.default.get("SETTINGS").post_length_max||1e6,function(e,t){var n=ngettext("Posted message cannot be longer than %(limit_value)s character (it has %(show_value)s).","Posted message cannot be longer than %(limit_value)s characters (it has %(show_value)s).",e);return interpolate(n,{limit_value:e,show_value:t},!0)})}},{"../../..":296,"../../../utils/validators":387}],139:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return E(e.post.acl)?r.default.createElement("li",{className:"event-controls"},r.default.createElement(w,e),r.default.createElement(O,e),r.default.createElement(k,e)):null},n.isVisible=E,n.Delete=n.Unhide=n.Hide=void 0;var r=a(e("react")),l=a(e("moment")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../reducers/post")),s=a(e("../../../services/ajax")),u=a(e("../../../services/snackbar")),c=a(e("../../../services/store"));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function a(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=g(o);return t=l?(e=g(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==d(r)&&"function"!=typeof r?v(n):r}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){return e.can_hide}var w=function(){h(o,r.default.Component);var a=b(o);function o(){var t;p(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return _(v(t=a.call.apply(a,[this].concat(n))),"onClick",function(){c.default.dispatch(i.patch(t.props.post,{is_hidden:!0,hidden_on:(0,l.default)(),hidden_by_name:t.props.user.username,url:Object.assign(t.props.post.url,{hidden_by:t.props.user.url})}));s.default.patch(t.props.post.api.index,[{op:"replace",path:"is-hidden",value:!0}]).then(function(e){c.default.dispatch(i.patch(t.props.post,e))},function(e){400===e.status?u.default.error(e.detail[0]):u.default.apiError(e),c.default.dispatch(i.patch(t.props.post,{is_hidden:!1}))})}),t}return m(o,[{key:"render",value:function(){return this.props.post.is_hidden?null:r.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Hide"))}}]),o}();n.Hide=w;var O=function(){h(o,r.default.Component);var a=b(o);function o(){var t;p(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return _(v(t=a.call.apply(a,[this].concat(n))),"onClick",function(){c.default.dispatch(i.patch(t.props.post,{is_hidden:!1}));s.default.patch(t.props.post.api.index,[{op:"replace",path:"is-hidden",value:!1}]).then(function(e){c.default.dispatch(i.patch(t.props.post,e))},function(e){400===e.status?u.default.error(e.detail[0]):u.default.apiError(e),c.default.dispatch(i.patch(t.props.post,{is_hidden:!0}))})}),t}return m(o,[{key:"render",value:function(){return this.props.post.is_hidden?r.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Unhide")):null}}]),o}();n.Unhide=O;var k=function(){h(o,r.default.Component);var a=b(o);function o(){var t;p(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return _(v(t=a.call.apply(a,[this].concat(n))),"onClick",function(){confirm(gettext("Are you sure you wish to delete this event? This action is not reversible!"))&&t.delete()}),_(v(t),"delete",function(){c.default.dispatch(i.patch(t.props.post,{isDeleted:!0})),s.default.delete(t.props.post.api.index).then(function(){u.default.success(gettext("Event has been deleted."))},function(e){400===e.status?u.default.error(e.detail[0]):u.default.apiError(e),c.default.dispatch(i.patch(t.props.post,{isDeleted:!1}))})}),t}return m(o,[{key:"render",value:function(){return r.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},gettext("Delete"))}}]),o}();n.Delete=k},{"../../../reducers/post":347,"../../../services/ajax":359,"../../../services/snackbar":371,"../../../services/store":372,moment:"moment",react:"react"}],140:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement("div",{className:"post-avatar"},a.default.createElement("span",{className:"material-icon"},o[e.post.event_type]))};var r,a=(r=e("react"))&&r.__esModule?r:{default:r};var o={changed_title:"edit",pinned_globally:"bookmark",pinned_locally:"bookmark_border",unpinned:"panorama_fish_eye",moved:"arrow_forward",merged:"call_merge",approved:"done",opened:"lock_open",closed:"lock_outline",unhid:"visibility",hid:"visibility_off",changed_owner:"grade",tookover:"grade",added_participant:"person_add",owner_left:"person_outline",participant_left:"person_outline",removed_participant:"remove_circle_outline"}},{react:"react"}],141:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t="event";e.post.isDeleted?t="hide":e.post.is_hidden&&(t="event post-hidden");return r.default.createElement("li",{id:"post-"+e.post.id,className:t},r.default.createElement(i.default,{post:e.post}),r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-2 col-sm-3 text-right"},r.default.createElement(a.default,e)),r.default.createElement("div",{className:"col-xs-10 col-sm-9 text-left"},r.default.createElement(s.default,{post:e.post},r.default.createElement(l.default,e),r.default.createElement(o.default,e)))))};var r=u(e("react")),a=u(e("./icon")),o=u(e("./info")),l=u(e("./message")),i=u(e("./unread-label")),s=u(e("../waypoint"));function u(e){return e&&e.__esModule?e:{default:e}}},{"../waypoint":167,"./icon":140,"./info":142,"./message":143,"./unread-label":144,react:"react"}],142:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement("ul",{className:"list-inline event-info"},a.default.createElement(f,e),a.default.createElement(d,e),a.default.createElement(r.default,e))},n.Hidden=f,n.Poster=d;var a=l(e("react")),o=l(e("../../../utils/escape-html")),r=l(e("./controls"));function l(e){return e&&e.__esModule?e:{default:e}}var i='<abbr title="%(absolute)s">%(relative)s</abbr>',s='<a href="%(url)s" title="%(absolute)s">%(relative)s</a>',u='<span class="item-title">%(user)s</span>',c='<a href="%(url)s" class="item-title">%(user)s</a>';function f(e){if(e.post.is_hidden){var t=null,t=e.post.url.hidden_by?interpolate(c,{url:(0,o.default)(e.post.url.hidden_by),user:(0,o.default)(e.post.hidden_by_name)},!0):interpolate(u,{user:(0,o.default)(e.post.hidden_by_name)},!0),n=interpolate(i,{absolute:(0,o.default)(e.post.hidden_on.format("LLL")),relative:(0,o.default)(e.post.hidden_on.fromNow())},!0),r=interpolate((0,o.default)(gettext("Hidden by %(event_by)s %(event_on)s.")),{event_by:t,event_on:n},!0);return a.default.createElement("li",{className:"event-hidden-message",dangerouslySetInnerHTML:{__html:r}})}return null}function d(e){var t=null,t=e.post.poster?interpolate(c,{url:(0,o.default)(e.post.poster.url),user:(0,o.default)(e.post.poster_name)},!0):interpolate(u,{user:(0,o.default)(e.post.poster_name)},!0),n=interpolate(s,{url:(0,o.default)(e.post.url.index),absolute:(0,o.default)(e.post.posted_on.format("LLL")),relative:(0,o.default)(e.post.posted_on.fromNow())},!0),r=interpolate((0,o.default)(gettext("By %(event_by)s %(event_on)s.")),{event_by:t,event_on:n},!0);return a.default.createElement("li",{className:"event-posters",dangerouslySetInnerHTML:{__html:r}})}},{"../../../utils/escape-html":378,"./controls":139,react:"react"}],143:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return l[e.post.event_type]?a.default.createElement("p",{className:"event-message"},l[e.post.event_type]):"changed_title"===e.post.event_type?a.default.createElement(u,e):"moved"===e.post.event_type?a.default.createElement(c,e):"merged"===e.post.event_type?a.default.createElement(f,e):"changed_owner"===e.post.event_type?a.default.createElement(d,e):"added_participant"===e.post.event_type?a.default.createElement(p,e):"removed_participant"===e.post.event_type?a.default.createElement(m,e):null},n.ChangedTitle=u,n.Moved=c,n.Merged=f,n.ChangedOwner=d,n.AddedParticipant=p,n.RemovedParticipant=m;var a=r(e("react")),o=r(e("../../../utils/escape-html"));function r(e){return e&&e.__esModule?e:{default:e}}var l={pinned_globally:gettext("Thread has been pinned globally."),pinned_locally:gettext("Thread has been pinned locally."),unpinned:gettext("Thread has been unpinned."),approved:gettext("Thread has been approved."),opened:gettext("Thread has been opened."),closed:gettext("Thread has been closed."),unhid:gettext("Thread has been revealed."),hid:gettext("Thread has been made hidden."),tookover:gettext("Took thread over."),owner_left:gettext("Owner has left thread. This thread is now closed."),participant_left:gettext("Participant has left thread.")},i='<a href="%(url)s" class="item-title">%(name)s</a>',s='<span class="item-title">%(name)s</span>';function u(e){var t=(0,o.default)(gettext("Thread title has been changed from %(old_title)s.")),n=interpolate(s,{name:(0,o.default)(e.post.event_context.old_title)},!0),r=interpolate(t,{old_title:n},!0);return a.default.createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:r}})}function c(e){var t=(0,o.default)(gettext("Thread has been moved from %(from_category)s.")),n=interpolate(i,{url:(0,o.default)(e.post.event_context.from_category.url),name:(0,o.default)(e.post.event_context.from_category.name)},!0),r=interpolate(t,{from_category:n},!0);return a.default.createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:r}})}function f(e){var t=(0,o.default)(gettext("The %(merged_thread)s thread has been merged into this thread.")),n=interpolate(s,{name:(0,o.default)(e.post.event_context.merged_thread)},!0),r=interpolate(t,{merged_thread:n},!0);return a.default.createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:r}})}function d(e){var t=(0,o.default)(gettext("Changed thread owner to %(user)s.")),n=interpolate(i,{url:(0,o.default)(e.post.event_context.user.url),name:(0,o.default)(e.post.event_context.user.username)},!0),r=interpolate(t,{user:n},!0);return a.default.createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:r}})}function p(e){var t=(0,o.default)(gettext("Added %(user)s to thread.")),n=interpolate(i,{url:(0,o.default)(e.post.event_context.user.url),name:(0,o.default)(e.post.event_context.user.username)},!0),r=interpolate(t,{user:n},!0);return a.default.createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:r}})}function m(e){var t=(0,o.default)(gettext("Removed %(user)s from thread.")),n=interpolate(i,{url:(0,o.default)(e.post.event_context.user.url),name:(0,o.default)(e.post.event_context.user.username)},!0),r=interpolate(t,{user:n},!0);return a.default.createElement("p",{className:"event-message",dangerouslySetInnerHTML:{__html:r}})}},{"../../../utils/escape-html":378,react:"react"}],144:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.post.is_read?null:a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"col-xs-10 col-xs-offset-2 col-sm-9 col-sm-offset-3 text-left"},a.default.createElement("div",{className:"event-label"},a.default.createElement("span",{className:"label label-unread"},gettext("New event")))))};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],145:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return t.posts.isLoaded?r.default.createElement("ul",{className:"posts-list ui-ready"},t.posts.results.map(function(e){return r.default.createElement(u,s({key:e.id,post:e},t))})):r.default.createElement("ul",{className:"posts-list ui-preview"},r.default.createElement(l.default,null))},n.ListItem=u;var r=i(e("react")),a=i(e("./event")),o=i(e("./post")),l=i(e("./post/preview"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function u(e){return e.post.is_event?r.default.createElement(a.default,e):r.default.createElement(o.default,e)}},{"./event":141,"./post":157,"./post/preview":165,react:"react"}],146:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement("div",{className:"col-xs-12 col-md-6"},a.default.createElement(c,e),a.default.createElement("div",{className:"post-attachment"},a.default.createElement("a",{href:e.attachment.url.index,className:"attachment-name item-title"},e.attachment.filename),a.default.createElement(p,e)))},n.AttachmentPreview=c,n.AttachmentIcon=f,n.AttachmentThumbnail=d,n.AttachmentDetails=p;var a=r(e("react")),o=(r(e("../../../..")),r(e("../../../../utils/escape-html"))),l=r(e("../../../../utils/file-size"));function r(e){return e&&e.__esModule?e:{default:e}}var i='<abbr title="%(absolute)s">%(relative)s</abbr>',s='<span class="item-title">%(user)s</span>',u='<a href="%(url)s" class="item-title">%(user)s</a>';function c(e){return e.attachment.is_image?a.default.createElement("div",{className:"post-attachment-preview"},a.default.createElement(d,e)):a.default.createElement("div",{className:"post-attachment-preview"},a.default.createElement(f,e))}function f(e){return a.default.createElement("a",{href:e.attachment.url.index,className:"material-icon"},"insert_drive_file")}function d(e){var t=e.attachment.url.thumb||e.attachment.url.index;return a.default.createElement("a",{className:"post-thumbnail",href:e.attachment.url.index,style:{backgroundImage:'url("'+(0,o.default)(t)+'")'}})}function p(e){var t=null,t=e.attachment.url.uploader?interpolate(u,{url:(0,o.default)(e.attachment.url.uploader),user:(0,o.default)(e.attachment.uploader_name)},!0):interpolate(s,{user:(0,o.default)(e.attachment.uploader_name)},!0),n=interpolate(i,{absolute:(0,o.default)(e.attachment.uploaded_on.format("LLL")),relative:(0,o.default)(e.attachment.uploaded_on.fromNow())},!0),r=interpolate((0,o.default)(gettext("%(filetype)s, %(size)s, uploaded by %(uploader)s %(uploaded_on)s.")),{filetype:e.attachment.filetype,size:(0,l.default)(e.attachment.size),uploader:t,uploaded_on:n},!0);return a.default.createElement("p",{className:"post-attachment-description",dangerouslySetInnerHTML:{__html:r}})}},{"../../../..":296,"../../../../utils/escape-html":378,"../../../../utils/file-size":379,react:"react"}],147:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return i(e.post)?r.default.createElement("div",{className:"post-attachments"},(0,a.default)(e.post.attachments,2).map(function(e){var t=e.map(function(e){return e?e.id:0}).join("_");return r.default.createElement(s,{key:t,row:e})})):null},n.isVisible=i,n.Row=s;var r=l(e("react")),a=l(e("../../../../utils/batch")),o=l(e("./attachment"));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){return(!e.is_hidden||e.acl.can_see_hidden)&&e.attachments}function s(e){return r.default.createElement("div",{className:"row"},e.row.map(function(e){return r.default.createElement(o.default,{attachment:e,key:e?e.id:0})}))}},{"../../../../utils/batch":375,"./attachment":146,react:"react"}],148:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.post.is_hidden&&!e.post.acl.can_see_hidden?a.default.createElement(d,e):e.post.content?a.default.createElement(f,e):a.default.createElement(p,e)},n.Default=f,n.Hidden=d,n.Invalid=p;var a=i(e("react")),o=i(e("../waypoint")),r=i(e("../../misago-markup")),l=i(e("../../../utils/escape-html"));function i(e){return e&&e.__esModule?e:{default:e}}var s='<a href="%(url)s" class="item-title">%(user)s</a>',u='<span class="item-title">%(user)s</span>',c='<abbr class="last-title" title="%(absolute)s">%(relative)s</abbr>';function f(e){return a.default.createElement(o.default,{className:"post-body",post:e.post},a.default.createElement(r.default,{markup:e.post.content}))}function d(e){var t=null,t=e.post.hidden_by?interpolate(s,{url:(0,l.default)(e.post.url.hidden_by),user:(0,l.default)(e.post.hidden_by_name)},!0):interpolate(u,{user:(0,l.default)(e.post.hidden_by_name)},!0),n=interpolate(c,{absolute:(0,l.default)(e.post.hidden_on.format("LLL")),relative:(0,l.default)(e.post.hidden_on.fromNow())},!0),r=interpolate((0,l.default)(gettext("Hidden by %(hidden_by)s %(hidden_on)s.")),{hidden_by:t,hidden_on:n},!0);return a.default.createElement(o.default,{className:"post-body post-body-hidden",post:e.post},a.default.createElement("p",{className:"lead"},gettext("This post is hidden. You cannot see its contents.")),a.default.createElement("p",{className:"text-muted",dangerouslySetInnerHTML:{__html:r}}))}function p(e){return a.default.createElement(o.default,{className:"post-body post-body-invalid",post:e.post},a.default.createElement("p",{className:"lead"},gettext("This post's contents cannot be displayed.")),a.default.createElement("p",{className:"text-muted"},gettext("This error is caused by invalid post content manipulation.")))}},{"../../../utils/escape-html":378,"../../misago-markup":54,"../waypoint":167,react:"react"}],149:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.approve=function(e){u.default.dispatch(s.patch(e.post,{is_unapproved:!1}));var t={is_unapproved:e.post.is_unapproved};p(e,[{op:"replace",path:"is-unapproved",value:!1}],t)},n.protect=function(e){u.default.dispatch(s.patch(e.post,{is_protected:!0}));var t={is_protected:e.post.is_protected};p(e,[{op:"replace",path:"is-protected",value:!0}],t)},n.unprotect=function(e){u.default.dispatch(s.patch(e.post,{is_protected:!1}));var t={is_protected:e.post.is_protected};p(e,[{op:"replace",path:"is-protected",value:!1}],t)},n.hide=function(e){u.default.dispatch(s.patch(e.post,{is_hidden:!0,hidden_on:(0,o.default)(),hidden_by_name:e.user.username,url:Object.assign(e.post.url,{hidden_by:e.user.url})}));var t={is_hidden:e.post.is_hidden,hidden_on:e.post.hidden_on,hidden_by_name:e.post.hidden_by_name,url:e.post.url};p(e,[{op:"replace",path:"is-hidden",value:!0}],t)},n.unhide=function(e){u.default.dispatch(s.patch(e.post,{is_hidden:!1}));var t={is_hidden:e.post.is_hidden};p(e,[{op:"replace",path:"is-hidden",value:!1}],t)},n.like=function(e){var t=e.post.last_likes||[],n=[e.user].concat(t),r=3<n.length?n.slice(0,-1):n;u.default.dispatch(s.patch(e.post,{is_liked:!0,likes:e.post.likes+1,last_likes:r}));var a={is_liked:e.post.is_liked,likes:e.post.likes,last_likes:e.post.last_likes};p(e,[{op:"replace",path:"is-liked",value:!0}],a)},n.unlike=function(t){u.default.dispatch(s.patch(t.post,{is_liked:!1,likes:t.post.likes-1,last_likes:t.post.last_likes.filter(function(e){return!e.id||e.id!==t.user.id})}));var e={is_liked:t.post.is_liked,likes:t.post.likes,last_likes:t.post.last_likes};p(t,[{op:"replace",path:"is-liked",value:!1}],e)},n.patch=p,n.remove=function(t){if(!confirm(gettext("Are you sure you want to delete this post? This action is not reversible!")))return;u.default.dispatch(s.patch(t.post,{isDeleted:!0})),r.default.delete(t.post.api.index).then(function(){a.default.success(gettext("Post has been deleted."))},function(e){400===e.status?a.default.error(e.detail):a.default.apiError(e),u.default.dispatch(s.patch(t.post,{isDeleted:!1}))})},n.markAsBestAnswer=function(e){var t=e.post,n=e.user;u.default.dispatch(i.update({best_answer:t.id,best_answer_is_protected:t.is_protected,best_answer_marked_on:(0,o.default)(),best_answer_marked_by:n.id,best_answer_marked_by_name:n.username,best_answer_marked_by_slug:n.slug}));var r=[{op:"replace",path:"best-answer",value:t.id},{op:"add",path:"acl",value:!0}],a={best_answer:e.thread.best_answer,best_answer_is_protected:e.thread.best_answer_is_protected,best_answer_marked_on:e.thread.best_answer_marked_on,best_answer_marked_by:e.thread.best_answer_marked_by,best_answer_marked_by_name:e.thread.best_answer_marked_by_name,best_answer_marked_by_slug:e.thread.best_answer_marked_by_slug};m(e,r,a)},n.unmarkBestAnswer=function(e){var t=e.post;u.default.dispatch(i.update({best_answer:null,best_answer_is_protected:!1,best_answer_marked_on:null,best_answer_marked_by:null,best_answer_marked_by_name:null,best_answer_marked_by_slug:null}));var n=[{op:"remove",path:"best-answer",value:t.id},{op:"add",path:"acl",value:!0}],r={best_answer:e.thread.best_answer,best_answer_is_protected:e.thread.best_answer_is_protected,best_answer_marked_on:e.thread.best_answer_marked_on,best_answer_marked_by:e.thread.best_answer_marked_by,best_answer_marked_by_name:e.thread.best_answer_marked_by_name,best_answer_marked_by_slug:e.thread.best_answer_marked_by_slug};m(e,n,r)},n.patchThread=m;var o=d(e("moment")),i=f(e("../../../../reducers/thread")),s=f(e("../../../../reducers/post")),r=d(e("../../../../services/ajax")),a=d(e("../../../../services/snackbar")),u=d(e("../../../../services/store"));function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((n=a?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o])}return r.default=e,t&&t.set(e,r),r}function d(e){return e&&e.__esModule?e:{default:e}}function p(t,e,n){r.default.patch(t.post.api.index,e).then(function(e){u.default.dispatch(s.patch(t.post,e))},function(e){400===e.status?a.default.error(e.detail[0]):a.default.apiError(e),u.default.dispatch(s.patch(t.post,n))})}function m(e,t,n){r.default.patch(e.thread.api.index,t).then(function(e){e.best_answer_marked_on&&(e.best_answer_marked_on=(0,o.default)(e.best_answer_marked_on)),u.default.dispatch(i.update(e))},function(e){400===e.status?a.default.error(e.detail[0]):a.default.apiError(e),u.default.dispatch(i.update(n))})}},{"../../../../reducers/post":347,"../../../../reducers/thread":354,"../../../../services/ajax":359,"../../../../services/snackbar":371,"../../../../services/store":372,moment:"moment"}],150:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return l.default.createElement("ul",{className:"dropdown-menu dropdown-menu-right stick-to-bottom"},l.default.createElement(w,e),l.default.createElement(O,e),l.default.createElement(k,e),l.default.createElement(x,e),l.default.createElement(P,e),l.default.createElement(j,e),l.default.createElement(S,e),l.default.createElement(N,e),l.default.createElement(C,e),l.default.createElement(R,e),l.default.createElement(M,e),l.default.createElement(T,e),l.default.createElement(D,e))},n.Delete=n.Unhide=n.Hide=n.Unprotect=n.Protect=n.Split=n.Move=n.Approve=n.PostEdits=n.UnmarkMarkBestAnswer=n.MarkAsBestAnswer=n.Edit=n.Permalink=void 0;var l=r(e("react")),i=r(e("../../../../services/modal")),s=r(e("../../../../services/posting")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==m(e)&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("./actions")),c=r(e("./move")),f=r(e("../../../post-changelog")),d=r(e("./split"));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==m(r)&&"function"!=typeof r?g(n):r}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(){b(o,l.default.Component);var a=v(o);function o(){var t;h(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return E(g(t=a.call.apply(a,[this].concat(n))),"onClick",function(){var e=window.location.protocol+"//";e+=window.location.host,e+=t.props.post.url.index,prompt(gettext("Permament link to this post:"),e)}),t}return y(o,[{key:"render",value:function(){return l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"link"),gettext("Permament link")))}}]),o}();n.Permalink=w;var O=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(g(e=a.call.apply(a,[this].concat(n))),"onClick",function(){s.default.open({mode:"EDIT",config:e.props.post.api.editor,submit:e.props.post.api.index})}),e}return y(o,[{key:"render",value:function(){return this.props.post.acl.can_edit?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"edit"),gettext("Edit"))):null}}]),o}();n.Edit=O;var k=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(g(e=a.call.apply(a,[this].concat(n))),"onClick",function(){u.markAsBestAnswer(e.props)}),e}return y(o,[{key:"render",value:function(){var e=this.props,t=e.post,n=e.thread;return!n.acl.can_mark_best_answer||!t.acl.can_mark_as_best_answer||t.id===n.best_answer||n.best_answer&&!n.acl.can_change_best_answer?null:l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"check_box"),gettext("Mark as best answer")))}}]),o}();n.MarkAsBestAnswer=k;var x=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(g(e=a.call.apply(a,[this].concat(n))),"onClick",function(){u.unmarkBestAnswer(e.props)}),e}return y(o,[{key:"render",value:function(){var e=this.props,t=e.post,n=e.thread;return t.id===n.best_answer&&n.acl.can_unmark_best_answer?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"check_box_outline_blank"),gettext("Unmark best answer"))):null}}]),o}();n.UnmarkMarkBestAnswer=x;var P=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(g(e=a.call.apply(a,[this].concat(n))),"onClick",function(){i.default.show(l.default.createElement(f.default,{post:e.props.post}))}),e}return y(o,[{key:"render",value:function(){var e=this.props.post.is_hidden&&!this.props.post.acl.can_see_hidden,t=0===this.props.post.edits;if(e||t)return null;var n=ngettext("This post was edited %(edits)s time.","This post was edited %(edits)s times.",this.props.post.edits);interpolate(n,{edits:this.props.post.edits},!0);return l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"edit"),gettext("Changes history")))}}]),o}();n.PostEdits=P;var j=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(g(e=a.call.apply(a,[this].concat(n))),"onClick",function(){u.approve(e.props)}),e}return y(o,[{key:"render",value:function(){return this.props.post.acl.can_approve&&this.props.post.is_unapproved?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"done"),gettext("Approve"))):null}}]),o}();n.Approve=j;var S=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(g(e=a.call.apply(a,[this].concat(n))),"onClick",function(){i.default.show(l.default.createElement(c.default,e.props))}),e}return y(o,[{key:"render",value:function(){return this.props.post.acl.can_move?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"arrow_forward"),gettext("Move"))):null}}]),o}();n.Move=S;var N=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(g(e=a.call.apply(a,[this].concat(n))),"onClick",function(){i.default.show(l.default.createElement(d.default,e.props))}),e}return y(o,[{key:"render",value:function(){return this.props.post.acl.can_move?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"call_split"),gettext("Split"))):null}}]),o}();n.Split=N;var C=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(g(e=a.call.apply(a,[this].concat(n))),"onClick",function(){u.protect(e.props)}),e}return y(o,[{key:"render",value:function(){return!this.props.post.acl.can_protect||this.props.post.is_protected?null:l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"lock_outline"),gettext("Protect")))}}]),o}();n.Protect=C;var R=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(g(e=a.call.apply(a,[this].concat(n))),"onClick",function(){u.unprotect(e.props)}),e}return y(o,[{key:"render",value:function(){return this.props.post.acl.can_protect&&this.props.post.is_protected?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"lock_open"),gettext("Remove protection"))):null}}]),o}();n.Unprotect=R;var M=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(g(e=a.call.apply(a,[this].concat(n))),"onClick",function(){u.hide(e.props)}),e}return y(o,[{key:"render",value:function(){var e=this.props,t=e.post,n=e.thread;return t.id===n.best_answer||!t.acl.can_hide||t.is_hidden?null:l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"visibility_off"),gettext("Hide")))}}]),o}();n.Hide=M;var T=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(g(e=a.call.apply(a,[this].concat(n))),"onClick",function(){u.unhide(e.props)}),e}return y(o,[{key:"render",value:function(){return this.props.post.acl.can_unhide&&this.props.post.is_hidden?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"visibility"),gettext("Unhide"))):null}}]),o}();n.Unhide=T;var D=function(){b(o,l.default.Component);var a=v(o);function o(){var e;h(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return E(g(e=a.call.apply(a,[this].concat(n))),"onClick",function(){u.remove(e.props)}),e}return y(o,[{key:"render",value:function(){var e=this.props,t=e.post,n=e.thread;return t.id!==n.best_answer&&t.acl.can_delete?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"clear"),gettext("Delete"))):null}}]),o}();n.Delete=D},{"../../../../services/modal":366,"../../../../services/posting":370,"../../../post-changelog":113,"./actions":149,"./move":152,"./split":153,react:"react"}],151:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.default.createElement("div",{className:"pull-right dropdown"},r.default.createElement("button",{"aria-expanded":"true","aria-haspopup":"true",className:"btn btn-default btn-icon dropdown-toggle","data-toggle":"dropdown",type:"button"},r.default.createElement("span",{className:"material-icon"},"expand_more")),r.default.createElement(a.default,e))};var r=o(e("react")),a=o(e("./dropdown"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./dropdown":150,react:"react"}],152:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ModalHeader=_,n.default=void 0;var r=o(e("react")),a=(o(e("../../../button")),o(e("../../../form"))),i=o(e("../../../form-group")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../../reducers/post")),u=o(e("../../../../services/ajax")),c=o(e("../../../../services/modal")),f=o(e("../../../../services/snackbar")),d=o(e("../../../../services/store"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==p(r)&&"function"!=typeof r?b(n):r}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,a.default);var e,t,n,o=y(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=b(t),a=function(e){t.changeValue("url",e.target.value)},(r="onUrlChange")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.state={isLoading:!1,url:"",validators:{url:[]},errors:{}},t}return e=l,(t=[{key:"clean",value:function(){return!!this.state.url.trim().length||(f.default.error(gettext("You have to enter link to the other thread.")),!1)}},{key:"send",value:function(){return u.default.post(this.props.thread.api.posts.move,{new_thread:this.state.url,posts:[this.props.post.id]})}},{key:"handleSuccess",value:function(){d.default.dispatch(s.patch(this.props.post,{isDeleted:!0})),c.default.hide(),f.default.success(gettext("Selected post was moved to the other thread."))}},{key:"handleError",value:function(e){400===e.status?f.default.error(e.detail):f.default.apiError(e)}},{key:"render",value:function(){return r.default.createElement("div",{className:"modal-dialog",role:"document"},r.default.createElement("form",{onSubmit:this.handleSubmit},r.default.createElement("div",{className:"modal-content"},r.default.createElement(_,null),r.default.createElement("div",{className:"modal-body"},r.default.createElement(i.default,{for:"id_url",label:gettext("Link to thread you want to move post to")},r.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_url",onChange:this.onUrlChange,value:this.state.url}))),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-primary",loading:this.state.isLoading},gettext("Move post"))))))}}])&&m(e.prototype,t),n&&m(e,n),l}();function _(e){return r.default.createElement("div",{className:"modal-header"},r.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},r.default.createElement("span",{"aria-hidden":"true"},"×")),r.default.createElement("h4",{className:"modal-title"},gettext("Move post")))}n.default=g},{"../../../../reducers/post":347,"../../../../services/ajax":359,"../../../../services/modal":366,"../../../../services/snackbar":371,"../../../../services/store":372,"../../../button":10,"../../../form":50,"../../../form-group":49,react:"react"}],153:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement(N,S({},e,{Form:C}))},n.Loader=R,n.Error=M,n.Modal=T,n.ModerationForm=n.PostingConfig=void 0;var a=v(e("react")),r=v(e("../../../button")),i=v(e("../../../form")),s=v(e("../../../form-group")),u=v(e("../../../category-select")),o=v(e("../../../modal-loader")),c=v(e("../../../select")),f=b(e("../../../../reducers/post")),d=v(e("../../../../services/ajax")),p=v(e("../../../../services/modal")),m=v(e("../../../../services/snackbar")),h=v(e("../../../../services/store")),y=b(e("../../../../utils/validators"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function b(e){if(e&&e.__esModule)return e;if(null===e||"object"!==g(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((n=a?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o])}return r.default=e,t&&t.set(e,r),r}function v(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=j(o);return t=l?(e=j(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==g(r)&&"function"!=typeof r?P(n):r}}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var N=function(){O(r,a.default.Component);var n=x(r);function r(e){var t;return _(this,r),(t=n.call(this,e)).state={isLoaded:!1,isError:!1,categories:[]},t}return w(r,[{key:"componentDidMount",value:function(){var n=this;d.default.get(misago.get("THREAD_EDITOR_API")).then(function(e){var t=e.map(function(e){return Object.assign(e,{disabled:!1===e.post,label:e.name,value:e.id,post:e.post})});n.setState({isLoaded:!0,categories:t})},function(e){n.setState({isError:e.detail})})}},{key:"render",value:function(){return this.state.isError?a.default.createElement(M,{message:this.state.isError}):this.state.isLoaded?a.default.createElement(C,S({},this.props,{categories:this.state.categories})):a.default.createElement(R,null)}}]),r}();n.PostingConfig=N;var C=function(){O(l,i.default);var o=x(l);function l(e){var r,t,n,a;return _(this,l),r=o.call(this,e),t=P(r),a=function(e){var t=e.target.value,n={category:t};r.acl[t].can_pin_threads<n.weight&&(n.weight=0),r.acl[t].can_hide_threads||(n.is_hidden=0),r.acl[t].can_close_threads||(n.is_closed=!1),r.setState(n)},(n="onCategoryChange")in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,r.state={isLoading:!1,title:"",category:null,categories:e.categories,weight:0,is_hidden:0,is_closed:!1,validators:{title:[y.required()]},errors:{}},r.isHiddenChoices=[{value:0,icon:"visibility",label:gettext("No")},{value:1,icon:"visibility_off",label:gettext("Yes")}],r.isClosedChoices=[{value:!1,icon:"lock_outline",label:gettext("No")},{value:!0,icon:"lock",label:gettext("Yes")}],r.acl={},r.props.categories.forEach(function(e){e.post&&(r.state.category||(r.state.category=e.id),r.acl[e.id]={can_pin_threads:e.post.pin,can_close_threads:e.post.close,can_hide_threads:e.post.hide})}),r}return w(l,[{key:"clean",value:function(){return!!this.isValid()||(m.default.error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return d.default.post(this.props.thread.api.posts.split,{title:this.state.title,category:this.state.category,weight:this.state.weight,is_hidden:this.state.is_hidden,is_closed:this.state.is_closed,posts:[this.props.post.id]})}},{key:"handleSuccess",value:function(){h.default.dispatch(f.patch(this.props.post,{isDeleted:!0})),p.default.hide(),m.default.success(gettext("Selected post was split into new thread."))}},{key:"handleError",value:function(e){400===e.status?(this.setState({errors:Object.assign({},this.state.errors,e)}),m.default.error(gettext("Form contains errors."))):403===e.status&&Array.isArray(e)?p.default.show(a.default.createElement(ErrorsModal,{errors:e})):m.default.apiError(e)}},{key:"getWeightChoices",value:function(){var e=[{value:0,icon:"remove",label:gettext("Not pinned")},{value:1,icon:"bookmark_border",label:gettext("Pinned locally")}];return 2==this.acl[this.state.category].can_pin_threads&&e.push({value:2,icon:"bookmark",label:gettext("Pinned globally")}),e}},{key:"renderWeightField",value:function(){return this.acl[this.state.category].can_pin_threads?a.default.createElement(s.default,{label:gettext("Thread weight"),for:"id_weight",labelClass:"col-sm-4",controlClass:"col-sm-8"},a.default.createElement(c.default,{id:"id_weight",onChange:this.bindInput("weight"),value:this.state.weight,choices:this.getWeightChoices()})):null}},{key:"renderHiddenField",value:function(){return this.acl[this.state.category].can_hide_threads?a.default.createElement(s.default,{label:gettext("Hide thread"),for:"id_is_hidden",labelClass:"col-sm-4",controlClass:"col-sm-8"},a.default.createElement(c.default,{id:"id_is_closed",onChange:this.bindInput("is_hidden"),value:this.state.is_hidden,choices:this.isHiddenChoices})):null}},{key:"renderClosedField",value:function(){return this.acl[this.state.category].can_close_threads?a.default.createElement(s.default,{label:gettext("Close thread"),for:"id_is_closed",labelClass:"col-sm-4",controlClass:"col-sm-8"},a.default.createElement(c.default,{id:"id_is_closed",onChange:this.bindInput("is_closed"),value:this.state.is_closed,choices:this.isClosedChoices})):null}},{key:"render",value:function(){return a.default.createElement(T,{className:"modal-dialog"},a.default.createElement("form",{onSubmit:this.handleSubmit},a.default.createElement("div",{className:"modal-body"},a.default.createElement(s.default,{label:gettext("Thread title"),for:"id_title",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.title},a.default.createElement("input",{id:"id_title",className:"form-control",type:"text",onChange:this.bindInput("title"),value:this.state.title})),a.default.createElement("div",{className:"clearfix"}),a.default.createElement(s.default,{label:gettext("Category"),for:"id_category",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.category},a.default.createElement(u.default,{id:"id_category",onChange:this.onCategoryChange,value:this.state.category,choices:this.state.categories})),a.default.createElement("div",{className:"clearfix"}),this.renderWeightField(),this.renderHiddenField(),this.renderClosedField()),a.default.createElement("div",{className:"modal-footer"},a.default.createElement(r.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Split post")))))}}]),l}();function R(){return a.default.createElement(T,{className:"modal-dialog"},a.default.createElement(o.default,null))}function M(e){return a.default.createElement(T,{className:"modal-dialog modal-message"},a.default.createElement("div",{className:"message-icon"},a.default.createElement("span",{className:"material-icon"},"info_outline")),a.default.createElement("div",{className:"message-body"},a.default.createElement("p",{className:"lead"},gettext("You can't move this post at the moment.")),a.default.createElement("p",null,e.message)))}function T(e){return a.default.createElement("div",{className:e.className,role:"document"},a.default.createElement("div",{className:"modal-content"},a.default.createElement("div",{className:"modal-header"},a.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},a.default.createElement("span",{"aria-hidden":"true"},"×")),a.default.createElement("h4",{className:"modal-title"},gettext("Split post into new thread"))),e.children))}n.ModerationForm=C},{"../../../../reducers/post":347,"../../../../services/ajax":359,"../../../../services/modal":366,"../../../../services/snackbar":371,"../../../../services/store":372,"../../../../utils/validators":387,"../../../button":10,"../../../category-select":23,"../../../form":50,"../../../form-group":49,"../../../modal-loader":55,"../../../select":204,react:"react"}],154:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FlagBestAnswer=function(e){var t=e.post,n=e.thread,r=e.user;if(!l(t)||t.id!==n.best_answer)return null;var a=null;a=r.id&&n.best_answer_marked_by===r.id?interpolate(gettext("Marked as best answer by you %(marked_on)s."),{marked_on:n.best_answer_marked_on.fromNow()},!0):interpolate(gettext("Marked as best answer by %(marked_by)s %(marked_on)s."),{marked_by:n.best_answer_marked_by_name,marked_on:n.best_answer_marked_on.fromNow()},!0);return o.default.createElement("div",{className:"post-status-message post-status-best-answer"},o.default.createElement("span",{className:"material-icon"},"check_box"),o.default.createElement("p",null,a))},n.FlagHidden=function(e){return l(e.post)&&e.post.is_hidden?o.default.createElement("div",{className:"post-status-message post-status-hidden"},o.default.createElement("span",{className:"material-icon"},"visibility_off"),o.default.createElement("p",null,gettext("This post is hidden. Only users with permission may see its contents."))):null},n.FlagUnapproved=function(e){return l(e.post)&&e.post.is_unapproved?o.default.createElement("div",{className:"post-status-message post-status-unapproved"},o.default.createElement("span",{className:"material-icon"},"remove_circle_outline"),o.default.createElement("p",null,gettext("This post is unapproved. Only users with permission to approve posts and its author may see its contents."))):null},n.FlagProtected=function(e){return l(e.post)&&e.post.is_protected?o.default.createElement("div",{className:"post-status-message post-status-protected visible-xs-block"},o.default.createElement("span",{className:"material-icon"},"lock_outline"),o.default.createElement("p",null,gettext("This post is protected. Only moderators may change it."))):null},n.isVisible=l;var r,o=(r=e("react"))&&r.__esModule?r:{default:r};function l(e){return!e.is_hidden||e.acl.can_see_hidden}},{react:"react"}],155:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return E(e.post)?l.default.createElement("div",{className:"post-footer"},l.default.createElement(w,e),l.default.createElement(O,e),l.default.createElement(k,e),l.default.createElement(x,_({lastLikes:e.post.last_likes,likes:e.post.likes},e)),l.default.createElement(P,_({likes:e.post.likes},e)),l.default.createElement(S,e),l.default.createElement(N,e)):null},n.isVisible=E,n.getLikesMessage=j,n.Edit=n.Reply=n.LikesCompact=n.Likes=n.Like=n.MarkAsBestAnswerCompact=n.MarkAsBestAnswer=void 0;var l=r(e("react")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("./controls/actions")),s=r(e("../../post-likes")),u=r(e("../../../services/modal")),c=r(e("../../../services/posting"));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==d(r)&&"function"!=typeof r?b(n):r}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function E(e){return(!e.is_hidden||e.acl.can_see_hidden)&&(e.acl.can_reply||e.acl.can_edit||e.acl.can_see_likes&&(e.last_likes||[]).length||e.acl.can_like)}var w=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){i.markAsBestAnswer(e.props)}),e}return m(o,[{key:"render",value:function(){var e=this.props,t=e.post,n=e.thread;return!n.acl.can_mark_best_answer||!t.acl.can_mark_as_best_answer||n.best_answer&&!n.acl.can_change_best_answer?null:l.default.createElement("button",{className:"hidden-xs btn btn-default btn-sm pull-left",disabled:this.props.post.isBusy||t.id===n.best_answer,onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"check_box"),gettext("Best answer"))}}]),o}();n.MarkAsBestAnswer=w;var O=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){i.markAsBestAnswer(e.props)}),e}return m(o,[{key:"render",value:function(){var e=this.props,t=e.post,n=e.thread;return!n.acl.can_mark_best_answer||!t.acl.can_mark_as_best_answer||n.best_answer&&!n.acl.can_change_best_answer?null:l.default.createElement("button",{className:"visible-xs-inline-block btn btn-default btn-sm pull-left",disabled:this.props.post.isBusy||t.id===n.best_answer,onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"check_box"))}}]),o}();n.MarkAsBestAnswerCompact=O;var k=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){e.props.post.is_liked?i.unlike(e.props):i.like(e.props)}),e}return m(o,[{key:"render",value:function(){if(!this.props.post.acl.can_like)return null;var e="btn btn-default btn-sm pull-left";return this.props.post.is_liked&&(e="btn btn-success btn-sm pull-left"),l.default.createElement("button",{className:e,disabled:this.props.post.isBusy,onClick:this.onClick,type:"button"},this.props.post.is_liked?gettext("Liked"):gettext("Like"))}}]),o}();n.Like=k;var x=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){u.default.show(l.default.createElement(s.default,{post:e.props.post}))}),e}return m(o,[{key:"render",value:function(){var e=0<(this.props.post.last_likes||[]).length;return this.props.post.acl.can_see_likes&&e?2===this.props.post.acl.can_see_likes?l.default.createElement("button",{className:"btn btn-link btn-sm pull-left hidden-xs",onClick:this.onClick,type:"button"},j(this.props.likes,this.props.lastLikes)):l.default.createElement("p",{className:"pull-left hidden-xs"},j(this.props.likes,this.props.lastLikes)):null}}]),o}();n.Likes=x;var P=function(){h(t,x);var e=y(t);function t(){return p(this,t),e.apply(this,arguments)}return m(t,[{key:"render",value:function(){var e=0<(this.props.post.last_likes||[]).length;return this.props.post.acl.can_see_likes&&e?2===this.props.post.acl.can_see_likes?l.default.createElement("button",{className:"btn btn-link btn-sm likes-compact pull-left visible-xs-block",onClick:this.onClick,type:"button"},l.default.createElement("span",{className:"material-icon"},"favorite"),this.props.likes):l.default.createElement("p",{className:"likes-compact pull-left visible-xs-block"},l.default.createElement("span",{className:"material-icon"},"favorite"),this.props.likes):null}}]),t}();function j(e,t){var n=t.slice(0,3).map(function(e){return e.username});if(1==n.length)return interpolate(gettext("%(user)s likes this."),{user:n[0]},!0);var r=e-n.length,a=n.slice(0,-1).join(", "),o=n.slice(-1)[0],l=interpolate(gettext("%(users)s and %(last_user)s"),{users:a,last_user:o},!0);if(0==r)return interpolate(gettext("%(users)s like this."),{users:l},!0);var i=ngettext("%(users)s and %(likes)s other user like this.","%(users)s and %(likes)s other users like this.",r);return interpolate(i,{users:n.join(", "),likes:r},!0)}n.LikesCompact=P;var S=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){c.default.open({mode:"REPLY",config:e.props.thread.api.editor,submit:e.props.thread.api.posts.index,context:{reply:e.props.post.id}})}),e}return m(o,[{key:"render",value:function(){return this.props.post.acl.can_reply?l.default.createElement("button",{className:"btn btn-primary btn-sm pull-right",type:"button",onClick:this.onClick},gettext("Reply")):null}}]),o}();n.Reply=S;var N=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){c.default.open({mode:"EDIT",config:e.props.post.api.editor,submit:e.props.post.api.index})}),e}return m(o,[{key:"render",value:function(){return this.props.post.acl.can_edit?l.default.createElement("button",{className:"hidden-xs btn btn-default btn-sm pull-right",type:"button",onClick:this.onClick},gettext("Edit")):null}}]),o}();n.Edit=N},{"../../../services/modal":366,"../../../services/posting":370,"../../post-likes":126,"./controls/actions":149,react:"react"}],156:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return u.default.createElement("div",{className:"post-heading"},u.default.createElement(v,e),u.default.createElement(g,e),u.default.createElement(_,e),u.default.createElement(E,e),u.default.createElement(w,e),u.default.createElement(O,e),u.default.createElement(k,e),u.default.createElement(a.default,e),u.default.createElement(r.default,e))},n.UnreadLabel=v,n.UnreadCompact=g,n.PostedOn=_,n.PostedOnCompact=E,n.ProtectedLabel=k,n.PostEditsCompacts=n.PostEdits=void 0;var u=o(e("react")),r=o(e("./controls")),a=o(e("./select")),c=(e("../../user-status"),o(e("../../post-changelog"))),f=o(e("../../../services/modal"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=b(o);return t=l?(e=b(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?y(n):r}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){return e.post.is_read?null:u.default.createElement("span",{className:"label label-unread hidden-xs"},gettext("New post"))}function g(e){return e.post.is_read?null:u.default.createElement("span",{className:"label label-unread visible-xs-inline-block"},gettext("New"))}function _(e){var t=interpolate(gettext("posted %(posted_on)s"),{posted_on:e.post.posted_on.format("LL, LT")},!0);return u.default.createElement("a",{href:e.post.url.index,className:"btn btn-link posted-on hidden-xs",title:t},e.post.posted_on.fromNow())}function E(e){return u.default.createElement("a",{href:e.post.url.index,className:"btn btn-link posted-on visible-xs-inline-block"},e.post.posted_on.fromNow(!0))}var w=function(){m(s,u.default.Component);var i=h(s);function s(){var e;d(this,s);for(var t,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=i.call.apply(i,[this].concat(o)),t=y(e),r=function(){f.default.show(u.default.createElement(c.default,{post:e.props.post}))},(n="onClick")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return p(s,[{key:"render",value:function(){var e=this.props.post.is_hidden&&!this.props.post.acl.can_see_hidden,t=0===this.props.post.edits;if(e||t)return null;var n=ngettext("This post was edited %(edits)s time.","This post was edited %(edits)s times.",this.props.post.edits),r=interpolate(n,{edits:this.props.post.edits},!0),a=ngettext("edited %(edits)s time","edited %(edits)s times",this.props.post.edits);return u.default.createElement("button",{className:"btn btn-link btn-see-edits hidden-xs",onClick:this.onClick,title:r,type:"button"},interpolate(a,{edits:this.props.post.edits},!0))}}]),s}();n.PostEdits=w;var O=function(){m(t,w);var e=h(t);function t(){return d(this,t),e.apply(this,arguments)}return p(t,[{key:"render",value:function(){var e=this.props.post.is_hidden&&!this.props.post.acl.can_see_hidden,t=0===this.props.post.edits;if(e||t)return null;var n=ngettext("%(edits)s edit","%(edits)s edits",this.props.post.edits);return u.default.createElement("button",{className:"btn btn-link btn-see-edits visible-xs-inline-block",onClick:this.onClick,type:"button"},interpolate(n,{edits:this.props.post.edits},!0))}}]),t}();function k(e){var t=e.post.poster&&e.post.poster.id===e.user.id,n=e.post.acl.can_protect;return e.user.id&&e.post.is_protected&&(t||n)?u.default.createElement("span",{className:"label label-protected hidden-xs",title:gettext("This post is protected and may not be edited.")},u.default.createElement("span",{className:"material-icon"},"lock_outline"),gettext("protected")):null}n.PostEditsCompacts=O},{"../../../services/modal":366,"../../post-changelog":113,"../../user-status":268,"./controls":151,"./select":166,react:"react"}],157:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t="post";e.post.isDeleted?t="hide":e.post.is_hidden&&!e.post.acl.can_see_hidden&&(t="post post-hidden");e.post.poster&&e.post.poster.rank.css_class&&(t+=" post-"+e.post.poster.rank.css_class);e.post.is_read||(t+=" post-new");return r.default.createElement("li",{id:"post-"+e.post.id,className:t},r.default.createElement("div",{className:"panel panel-default panel-post"},r.default.createElement("div",{className:"panel-body"},r.default.createElement("div",{className:"row"},r.default.createElement(u.default,e),r.default.createElement("div",{className:"col-xs-12 col-md-9"},r.default.createElement(s.default,e),r.default.createElement(l.FlagBestAnswer,e),r.default.createElement(l.FlagUnapproved,e),r.default.createElement(l.FlagProtected,e),r.default.createElement(l.FlagHidden,e),r.default.createElement(o.default,e),r.default.createElement(a.default,e),r.default.createElement(i.default,e))))))};var r=c(e("react")),a=c(e("./attachments")),o=c(e("./body")),l=e("./flags"),i=c(e("./footer")),s=c(e("./header")),u=c(e("./post-side"));function c(e){return e&&e.__esModule?e:{default:e}}},{"./attachments":147,"./body":148,"./flags":154,"./footer":155,"./header":156,"./post-side":160,react:"react"}],158:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.post,n=e.thread;return r.default.createElement("div",{className:"col-xs-12 col-md-3 post-side post-side-anonymous"},r.default.createElement(i.default,{post:t,thread:n}),r.default.createElement(o.default,{post:t,thread:n}),r.default.createElement("div",{className:"media"},r.default.createElement("div",{className:"media-left"},r.default.createElement("span",null,r.default.createElement(a.default,{className:"poster-avatar",size:100}))),r.default.createElement("div",{className:"media-body"},r.default.createElement("span",{className:"media-heading item-title"},t.poster_name),r.default.createElement("span",{className:"user-title user-title-anonymous"},gettext("Removed user")))))};var r=u(e("react")),a=u(e("../../../avatar")),o=u(e("../controls")),i=u(e("../select"));(function(e){if(e&&e.__esModule)return;if(null===e||"object"!==l(e)&&"function"!=typeof e)return;var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n)})(e("../../../user-status")),u(e("./user-postcount")),u(e("./user-title"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}},{"../../../avatar":8,"../../../user-status":268,"../controls":151,"../select":166,"./user-postcount":162,"./user-title":164,react:"react"}],159:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.title,n=e.rank;return n.is_tab||!!t||!!n.title}},{}],160:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(e.post.poster)return r.default.createElement(o.default,e);return r.default.createElement(a.default,e)};var r=l(e("react")),a=l(e("./anonymous")),o=l(e("./registered"));function l(e){return e&&e.__esModule?e:{default:e}}},{"./anonymous":158,"./registered":161,react:"react"}],161:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.post,n=e.thread,r=t.poster;return a.default.createElement("div",{className:"col-xs-12 col-md-3 post-side post-side-registered"},a.default.createElement(s.default,{post:t,thread:n}),a.default.createElement(i.default,{post:t,thread:n}),a.default.createElement("div",{className:"media"},a.default.createElement("div",{className:"media-left"},a.default.createElement("a",{href:r.url},a.default.createElement(o.default,{className:"poster-avatar",size:100,user:r}))),a.default.createElement("div",{className:"media-body"},a.default.createElement("div",{className:"media-heading"},a.default.createElement("a",{className:"item-title",href:r.url},r.username),a.default.createElement(u.default,{status:r.status},a.default.createElement(u.StatusIcon,{status:r.status}))),a.default.createElement(d.default,{rank:r.rank,title:r.title}),a.default.createElement(f.default,{poster:r}),a.default.createElement(c.default,{poster:r}))))};var a=r(e("react")),o=r(e("../../../avatar")),i=r(e("../controls")),s=r(e("../select")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../user-status")),c=r(e("./user-postcount")),f=r(e("./user-status")),d=r(e("./user-title"));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}},{"../../../avatar":8,"../../../user-status":268,"../controls":151,"../select":166,"./user-postcount":162,"./user-status":163,"./user-title":164,react:"react"}],162:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.poster,n=ngettext("%(posts)s post","%(posts)s posts",t.posts),r="user-postcount";(0,o.default)(t)&&(r+=" hidden-xs hidden-sm");return a.default.createElement("span",{className:r},interpolate(n,{posts:t.posts},!0))};var a=r(e("react")),o=r(e("./has-visible-title"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./has-visible-title":159,react:"react"}],163:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.poster,n="hidden-xs";(0,o.default)(t)&&(n+=" hidden-sm");return r.default.createElement("span",{className:n},r.default.createElement(a.default,{status:t.status},r.default.createElement(a.StatusLabel,{status:t.status,user:t})))};var r=s(e("react")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../user-status")),o=s(e("./has-visible-title"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}},{"../../../user-status":268,"./has-visible-title":159,react:"react"}],164:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.rank,n=e.title||t.title;!n&&t.is_tab&&(n=t.name);if(!n)return null;var r="user-title";t.css_class&&(r+=" user-title-"+t.css_class);if(t.is_tab)return a.default.createElement("div",{className:r},a.default.createElement("a",{href:t.url},n));return a.default.createElement("div",{className:r},n)};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],165:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.default.createElement("li",{className:"post"},r.default.createElement("div",{className:"post-border"},r.default.createElement("div",{className:"post-avatar"},r.default.createElement(a.default,{size:"100"})),r.default.createElement("div",{className:"post-body"},r.default.createElement("div",{className:"panel panel-default panel-post"},r.default.createElement("div",{className:"panel-heading post-heading"},r.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,100)+"px"}}," "),r.default.createElement("span",{className:"ui-preview-text",style:{width:o.int(30,100)+"px"}}," ")),r.default.createElement("div",{className:"panel-body"},r.default.createElement("article",{className:"misago-markup"},r.default.createElement("p",{className:"ui-preview-text",style:{width:o.int(50,100)+"%"}}," "),r.default.createElement("p",{className:"ui-preview-text",style:{width:o.int(50,100)+"%"}}," "),r.default.createElement("p",{className:"ui-preview-text",style:{width:o.int(50,100)+"%"}}," ")))))))};var r=s(e("react")),a=s(e("../../avatar")),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../utils/random"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}},{"../../../utils/random":382,"../../avatar":8,react:"react"}],166:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.isVisible=h,n.default=void 0;var r=a(e("react")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==i(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../reducers/posts")),c=a(e("../../../services/store"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=s(o);return t=l?(e=s(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?p(n):r}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,r.default.Component);var e,t,n,i=d(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=i.call.apply(i,[this].concat(o)),t=p(e),r=function(){e.props.post.isSelected?c.default.dispatch(u.deselect(e.props.post)):c.default.dispatch(u.select(e.props.post))},(n="onClick")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return e=s,(t=[{key:"render",value:function(){return this.props.thread.acl.can_merge_posts||h(this.props.post.acl)?r.default.createElement("div",{className:"pull-right hidden-xs"},r.default.createElement("button",{className:"btn btn-default btn-icon",onClick:this.onClick,type:"button"},r.default.createElement("span",{className:"material-icon"},this.props.post.isSelected?"check_box":"check_box_outline_blank"))):null}}])&&o(e.prototype,t),n&&o(e,n),s}();function h(e){return e.can_approve||e.can_hide||e.can_protect||e.can_unhide||e.can_delete||e.can_move}n.default=m},{"../../../reducers/posts":348,"../../../services/store":372,react:"react"}],167:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a(e("react")),l=r(e("../../reducers/post")),i=r(e("../../reducers/thread")),s=a(e("../../services/ajax")),u=a(e("../../services/snackbar")),c=a(e("../../services/store"));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((n=a?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o])}return r.default=e,t&&t.set(e,r),r}function a(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==d(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,o.default.Component);var e,t,n,r=h(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"componentDidMount",value:function(){var r=this;this.props.post.is_read||$(this.documentNode).waypoint({handler:function(e){"down"!==e||r.props.post.is_read||window.setTimeout(function(){var e=r.documentNode.getBoundingClientRect(),t=e.height+e.top,n=document.documentElement.clientHeight;t<5||n<t||(c.default.dispatch(l.patch(r.props.post,{is_read:!0})),s.default.post(r.props.post.api.read).then(function(e){c.default.dispatch(i.update(r.props.thread,{is_read:e.thread_is_read}))},function(e){u.default.apiError(e)}))},1e3)},offset:"bottom-in-view"})}},{key:"render",value:function(){var t=this;return o.default.createElement("div",{className:this.props.className,ref:function(e){t.documentNode=e}},this.props.children)}}])&&p(e.prototype,t),n&&p(e,n),a}();n.default=b},{"../../reducers/post":347,"../../reducers/thread":354,"../../services/ajax":359,"../../services/snackbar":371,"../../services/store":372,react:"react"}],168:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("moment")),l=r(e("react")),i=r(e("../panel-loader")),s=r(e("../panel-message")),u=r(e("../..")),c=r(e("../../services/polls")),f=r(e("../../services/page-title"));function r(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=b(o);return t=l?(e=b(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==d(r)&&"function"!=typeof r?y(n):r}}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,l.default.Component);var e,t,n,r=h(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),v(y(t=r.call(this,e)),"update",function(e){e.expires_on&&(e.expires_on=(0,o.default)(e.expires_on)),t.setState({isLoaded:!0,error:null,ban:e})}),v(y(t),"error",function(e){t.setState({isLoaded:!0,error:e.detail,ban:null})}),u.default.has("PROFILE_BAN")?t.initWithPreloadedData(u.default.pop("PROFILE_BAN")):t.initWithoutPreloadedData(),t.startPolling(e.profile.api.ban),t}return e=a,(t=[{key:"initWithPreloadedData",value:function(e){e.expires_on&&(e.expires_on=(0,o.default)(e.expires_on)),this.state={isLoaded:!0,ban:e}}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1}}},{key:"startPolling",value:function(e){c.default.start({poll:"ban-details",url:e,frequency:9e4,update:this.update,error:this.error})}},{key:"componentDidMount",value:function(){f.default.set({title:gettext("Ban details"),parent:this.props.profile.username})}},{key:"componentWillUnmount",value:function(){c.default.stop("ban-details")}},{key:"getUserMessage",value:function(){return this.state.ban.user_message?l.default.createElement("div",{className:"panel-body ban-message ban-user-message"},l.default.createElement("h4",null,gettext("User-shown ban message")),l.default.createElement("div",{className:"lead",dangerouslySetInnerHTML:{__html:this.state.ban.user_message.html}})):null}},{key:"getStaffMessage",value:function(){return this.state.ban.staff_message?l.default.createElement("div",{className:"panel-body ban-message ban-staff-message"},l.default.createElement("h4",null,gettext("Team-shown ban message")),l.default.createElement("div",{className:"lead",dangerouslySetInnerHTML:{__html:this.state.ban.staff_message.html}})):null}},{key:"getExpirationMessage",value:function(){if(this.state.ban.expires_on){if(this.state.ban.expires_on.isAfter((0,o.default)())){var e=interpolate(gettext("This ban expires on %(expires_on)s."),{expires_on:this.state.ban.expires_on.format("LL, LT")},!0),t=interpolate(gettext("This ban expires %(expires_on)s."),{expires_on:this.state.ban.expires_on.fromNow()},!0);return l.default.createElement("abbr",{title:e},t)}return gettext("This ban has expired.")}return interpolate(gettext("%(username)s's ban is permanent."),{username:this.props.profile.username},!0)}},{key:"getPanelBody",value:function(){return this.state.ban?Object.keys(this.state.ban).length?l.default.createElement("div",null,this.getUserMessage(),this.getStaffMessage(),l.default.createElement("div",{className:"panel-body ban-expires"},l.default.createElement("h4",null,gettext("Ban expiration")),l.default.createElement("p",{className:"lead"},this.getExpirationMessage()))):l.default.createElement("div",null,l.default.createElement(s.default,{message:gettext("No ban is active at the moment.")})):this.state.error?l.default.createElement("div",null,l.default.createElement(s.default,{icon:"error_outline",message:this.state.error})):l.default.createElement("div",null,l.default.createElement(i.default,null))}},{key:"render",value:function(){return l.default.createElement("div",{className:"profile-ban-details"},l.default.createElement("div",{className:"panel panel-default"},l.default.createElement("div",{className:"panel-heading"},l.default.createElement("h3",{className:"panel-title"},gettext("Ban details"))),this.getPanelBody()))}}])&&p(e.prototype,t),n&&p(e,n),a}();n.default=a},{"../..":296,"../../services/page-title":368,"../../services/polls":369,"../panel-loader":87,"../panel-message":88,moment:"moment",react:"react"}],169:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.isAuthenticated,n=e.profile,r=null;r=t?gettext("You are not sharing any details with others."):interpolate(gettext("%(username)s is not sharing any details with others."),{username:n.username},!0);return a.default.createElement("div",{className:"panel panel-default"},a.default.createElement("div",{className:"panel-body text-center lead"},r))};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],170:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.html,n=e.text,r=e.url;if(t)return a.default.createElement("div",{className:"form-control-static col-md-9",dangerouslySetInnerHTML:{__html:t}});return a.default.createElement("div",{className:"form-control-static col-md-9"},a.default.createElement(o,{text:n,url:r}))},n.SafeValue=o;var r,a=(r=e("react"))&&r.__esModule?r:{default:r};function o(e){var t=e.text,n=e.url;return n?a.default.createElement("p",null,a.default.createElement("a",{href:n,target:"_blank",rel:"nofollow"},t||n)):t?a.default.createElement("p",null,t):null}},{react:"react"}],171:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.default.createElement("div",{className:"form-group"},r.default.createElement("strong",{className:"control-label col-md-3"},e.name,":"),r.default.createElement(a.default,e))};var r=o(e("react")),a=o(e("./field-value"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./field-value":170,react:"react"}],172:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.api,n=e.display,r=e.onCancel,a=e.onSuccess;return n?o.default.createElement(l.default,{api:t,onCancel:r,onSuccess:a}):null};var o=r(e("react")),l=r(e("../../edit-details"));function r(e){return e&&e.__esModule?e:{default:e}}},{"../../edit-details":34,react:"react"}],173:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.fields,n=e.name;return l.default.createElement("div",{className:"panel panel-default panel-profile-details-group"},l.default.createElement("div",{className:"panel-heading"},l.default.createElement("h3",{className:"panel-title"},n)),l.default.createElement("div",{className:"panel-body"},l.default.createElement("div",{className:"form-horizontal"},t.map(function(e){var t=e.fieldname,n=e.html,r=e.name,a=e.text,o=e.url;return l.default.createElement(i.default,{key:t,name:r,html:n,text:a,url:o})}))))};var l=r(e("react")),i=r(e("./field"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./field":171,react:"react"}],174:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.display,n=e.groups,r=e.isAuthenticated,a=e.loading,o=e.profile;if(!t)return null;if(a)return l.default.createElement(u.default,null);return n.length?l.default.createElement("div",null,n.map(function(e,t){return l.default.createElement(s.default,{fields:e.fields,key:t,name:e.name})})):l.default.createElement(i.default,{isAuthenticated:r,profile:o})};var l=r(e("react")),i=r(e("./empty-message")),s=r(e("./group")),u=r(e("../../loader"));function r(e){return e&&e.__esModule?e:{default:e}}},{"../../loader":52,"./empty-message":169,"./group":173,react:"react"}],175:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.onEdit,n=e.showEditButton;return a.default.createElement("div",null,a.default.createElement("nav",{className:"toolbar"},a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:"col-sm-8 col-md-10"},a.default.createElement("h3",{className:"md-margin-top-no"},gettext("Details"))),a.default.createElement(o,{onEdit:t,showEditButton:n}))))},n.EditButton=o;var r,a=(r=e("react"))&&r.__esModule?r:{default:r};function o(e){var t=e.onEdit;return e.showEditButton?a.default.createElement("div",{className:"col-sm-4 col-md-2"},a.default.createElement("button",{className:"btn btn-default btn-outline btn-block",onClick:t,type:"button"},gettext("Edit"))):null}},{react:"react"}],176:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=r(e("react")),i=r(e("./form")),s=r(e("./groups-list")),u=r(e("./header")),c=r(e("../../../data/profile-details")),f=e("../../../reducers/profile-details"),o=r(e("../../../services/page-title")),d=r(e("../../../services/snackbar"));function r(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==p(r)&&"function"!=typeof r?b(n):r}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,l.default.Component);var e,t,n,r=y(a);function a(e){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),g(b(l=r.call(this,e)),"onCancel",function(){l.setState({editing:!1})}),g(b(l),"onEdit",function(){l.setState({editing:!0})}),g(b(l),"onSuccess",function(e){var t=l.props,n=t.dispatch,r=t.isAuthenticated,a=t.profile,o=null,o=r?gettext("Your details have been updated."):interpolate(gettext("%(username)s's details have been updated."),{username:a.username},!0);d.default.info(o),n((0,f.load)(e)),l.setState({editing:!1})}),l.state={editing:!1},l}return e=a,(t=[{key:"componentDidMount",value:function(){o.default.set({title:gettext("Details"),parent:this.props.profile.username})}},{key:"render",value:function(){var e=this.props,t=e.dispatch,n=e.isAuthenticated,r=e.profile,a=e.profileDetails,o=a.id!==r.id;return l.default.createElement(c.default,{data:a,dispatch:t,user:r},l.default.createElement("div",{className:"profile-details"},l.default.createElement(u.default,{onEdit:this.onEdit,showEditButton:!!a.edit&&!this.state.editing}),l.default.createElement(s.default,{display:!this.state.editing,groups:a.groups,isAuthenticated:n,loading:o,profile:r}),l.default.createElement(i.default,{api:r.api.edit_details,dispatch:t,display:this.state.editing,onCancel:this.onCancel,onSuccess:this.onSuccess})))}}])&&m(e.prototype,t),n&&m(e,n),a}();n.default=a},{"../../../data/profile-details":295,"../../../reducers/profile-details":349,"../../../services/page-title":368,"../../../services/snackbar":371,"./form":172,"./groups-list":174,"./header":175,react:"react"}],177:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Threads=function(e){var t=null;t=e.user.id===e.profile.id?gettext("You have no started threads."):interpolate(gettext("%(username)s started no threads."),{username:e.profile.username},!0);var n=null;{var r,a;n=e.posts.isLoaded?e.profile.id===e.user.id?(r=ngettext("You have started %(threads)s thread.","You have started %(threads)s threads.",e.profile.threads),interpolate(r,{threads:e.profile.threads},!0)):(a=ngettext("%(username)s has started %(threads)s thread.","%(username)s has started %(threads)s threads.",e.profile.threads),interpolate(a,{username:e.profile.username,threads:e.profile.threads},!0)):gettext("Loading...")}return o.default.createElement(l.default,i({api:e.profile.api.threads,emptyMessage:t,header:n,title:gettext("Threads")},e))},n.Posts=function(e){var t=null;t=e.user.id===e.profile.id?gettext("You have posted no messages."):interpolate(gettext("%(username)s posted no messages."),{username:e.profile.username},!0);var n=null;{var r,a;n=e.posts.isLoaded?e.profile.id===e.user.id?(r=ngettext("You have posted %(posts)s message.","You have posted %(posts)s messages.",e.profile.posts),interpolate(r,{posts:e.profile.posts},!0)):(a=ngettext("%(username)s has posted %(posts)s message.","%(username)s has posted %(posts)s messages.",e.profile.posts),interpolate(a,{username:e.profile.username,posts:e.profile.posts},!0)):gettext("Loading...")}return o.default.createElement(l.default,i({api:e.profile.api.posts,emptyMessage:t,header:n,title:gettext("Posts")},e))};var o=r(e("react")),l=r(e("./route"));function r(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},{"./route":178,react:"react"}],178:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Feed=E,n.LoadMoreButton=w,n.default=void 0;var r=d(e("react")),a=d(e("../../post-feed")),o=d(e("../../button")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../reducers/posts")),s=d(e("../../../services/page-title")),u=d(e("../../../services/ajax")),c=d(e("../../../services/snackbar")),f=d(e("../../../services/store"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=g(o);return t=l?(e=g(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==p(r)&&"function"!=typeof r?v(n):r}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,r.default.Component);var e,t,n,o=b(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=v(t),a=function(){t.setState({isLoading:!0}),t.loadItems(t.props.posts.next)},(r="loadMore")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.state={isLoading:!1},t}return e=l,(t=[{key:"loadItems",value:function(e){var t=this,n=0<arguments.length&&void 0!==e?e:0;u.default.get(this.props.api,{start:n||0}).then(function(e){0===n?f.default.dispatch(i.load(e)):f.default.dispatch(i.append(e)),t.setState({isLoading:!1})},function(e){t.setState({isLoading:!1}),c.default.apiError(e)})}},{key:"componentDidMount",value:function(){s.default.set({title:this.props.title,parent:this.props.profile.username}),this.loadItems()}},{key:"render",value:function(){return r.default.createElement("div",{className:"profile-feed"},r.default.createElement("nav",{className:"toolbar"},r.default.createElement("h3",{className:"toolbar-left"},this.props.header)),r.default.createElement(E,m({isLoading:this.state.isLoading,loadMore:this.loadMore},this.props)))}}])&&h(e.prototype,t),n&&h(e,n),l}();function E(e){return e.posts.results.length?r.default.createElement("div",null,r.default.createElement(a.default,{isReady:e.posts.isLoaded,posts:e.posts.results,poster:e.profile}),r.default.createElement(w,{isLoading:e.isLoading,loadMore:e.loadMore,next:e.posts.next})):r.default.createElement("p",{className:"lead"},e.emptyMessage)}function w(e){return e.next?r.default.createElement("div",{className:"pager-more"},r.default.createElement(o.default,{className:"btn btn-default btn-outline",loading:e.isLoading,onClick:e.loadMore},gettext("Show older activity"))):null}n.default=_},{"../../../reducers/posts":348,"../../../services/ajax":359,"../../../services/page-title":368,"../../../services/snackbar":371,"../../../services/store":372,"../../button":10,"../../post-feed":116,react:"react"}],179:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("react")),a=o(e("../button")),i=e("../../reducers/profile"),s=o(e("../../services/ajax")),u=o(e("../../services/snackbar")),c=o(e("../../services/store"));function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?h(n):r}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,r.default.Component);var e,t,n,o=m(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=h(t),a=function(){t.setState({isLoading:!0}),t.props.profile.is_followed?c.default.dispatch((0,i.patch)({is_followed:!1,followers:t.props.profile.followers-1})):c.default.dispatch((0,i.patch)({is_followed:!0,followers:t.props.profile.followers+1})),s.default.post(t.props.profile.api.follow).then(function(e){t.setState({isLoading:!1}),c.default.dispatch((0,i.patch)(e))},function(e){t.setState({isLoading:!1}),u.default.apiError(e)})},(r="action")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.state={isLoading:!1},t}return e=l,(t=[{key:"getClassName",value:function(){return this.props.profile.is_followed?this.props.className+" btn-default btn-following":this.props.className+" btn-default btn-follow"}},{key:"getIcon",value:function(){return this.props.profile.is_followed?"favorite":"favorite_border"}},{key:"getLabel",value:function(){return this.props.profile.is_followed?gettext("Following"):gettext("Follow")}},{key:"render",value:function(){return r.default.createElement(a.default,{className:this.getClassName(),disabled:this.state.isLoading,onClick:this.action},r.default.createElement("span",{className:"material-icon"},this.getIcon()),this.getLabel())}}])&&d(e.prototype,t),n&&d(e,n),l}();n.default=l},{"../../reducers/profile":350,"../../services/ajax":359,"../../services/snackbar":371,"../../services/store":372,"../button":10,react:"react"}],180:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../button")),i=r(e("../quick-search")),s=r(e("../users-list")),u=r(e("../..")),c=e("../../reducers/users"),f=r(e("../../services/ajax")),d=r(e("../../services/snackbar")),p=r(e("../../services/store")),m=r(e("../../services/page-title"));function r(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==h(r)&&"function"!=typeof r?g(n):r}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,o.default.Component);var e,t,n,r=v(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),E(g(t=r.call(this,e)),"loadMore",function(){t.setState({isBusy:!0}),t.loadUsers(t.state.page+1,t.state.search)}),E(g(t),"search",function(e){t.setState({isLoaded:!1,isBusy:!0,search:e.target.value,count:0,more:0,page:1,pages:1}),t.loadUsers(1,e.target.value)}),t.setSpecialProps(),u.default.has(t.PRELOADED_DATA_KEY)?t.initWithPreloadedData(u.default.pop(t.PRELOADED_DATA_KEY)):t.initWithoutPreloadedData(),t}return e=a,(t=[{key:"setSpecialProps",value:function(){this.PRELOADED_DATA_KEY="PROFILE_FOLLOWERS",this.TITLE=gettext("Followers"),this.API_FILTER="followers"}},{key:"initWithPreloadedData",value:function(e){this.state={isLoaded:!0,isBusy:!1,search:"",count:e.count,more:e.more,page:e.page,pages:e.pages},p.default.dispatch((0,c.hydrate)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1,isBusy:!1,search:"",count:0,more:0,page:1,pages:1},this.loadUsers()}},{key:"loadUsers",value:function(e,t){var n=this,r=0<arguments.length&&void 0!==e?e:1,a=1<arguments.length&&void 0!==t?t:null,o=this.props.profile.api[this.API_FILTER];f.default.get(o,{search:a,page:r||1},"user-"+this.API_FILTER).then(function(e){1===r?p.default.dispatch((0,c.hydrate)(e.results)):p.default.dispatch((0,c.append)(e.results)),n.setState({isLoaded:!0,isBusy:!1,count:e.count,more:e.more,page:e.page,pages:e.pages})},function(e){d.default.apiError(e)})}},{key:"componentDidMount",value:function(){m.default.set({title:this.TITLE,parent:this.props.profile.username})}},{key:"getLabel",value:function(){if(this.state.isLoaded){if(this.state.search){var e=ngettext("Found %(users)s user.","Found %(users)s users.",this.state.count);return interpolate(e,{users:this.state.count},!0)}if(this.props.profile.id===this.props.user.id){var t=ngettext("You have %(users)s follower.","You have %(users)s followers.",this.state.count);return interpolate(t,{users:this.state.count},!0)}var n=ngettext("%(username)s has %(users)s follower.","%(username)s has %(users)s followers.",this.state.count);return interpolate(n,{username:this.props.profile.username,users:this.state.count},!0)}return gettext("Loading...")}},{key:"getEmptyMessage",value:function(){return this.state.search?gettext("Search returned no users matching specified criteria."):this.props.user.id===this.props.profile.id?gettext("You have no followers."):interpolate(gettext("%(username)s has no followers."),{username:this.props.profile.username},!0)}},{key:"getMoreButton",value:function(){return this.state.more?o.default.createElement("div",{className:"pager-more"},o.default.createElement(l.default,{className:"btn btn-default btn-outline",loading:this.state.isBusy,onClick:this.loadMore},interpolate(gettext("Show more (%(more)s)"),{more:this.state.more},!0))):null}},{key:"getListBody",value:function(){return this.state.isLoaded&&0===this.state.count?o.default.createElement("p",{className:"lead"},this.getEmptyMessage()):o.default.createElement("div",null,o.default.createElement(s.default,{cols:3,isReady:this.state.isLoaded,users:this.props.users}),this.getMoreButton())}},{key:"getClassName",value:function(){return"profile-"+this.API_FILTER}},{key:"render",value:function(){return o.default.createElement("div",{className:this.getClassName()},o.default.createElement("nav",{className:"toolbar"},o.default.createElement("h3",{className:"toolbar-left"},this.getLabel()),o.default.createElement(i.default,{className:"toolbar-right",value:this.state.search,onChange:this.search,placeholder:gettext("Search users...")})),this.getListBody())}}])&&y(e.prototype,t),n&&y(e,n),a}();n.default=a},{"../..":296,"../../reducers/users":358,"../../services/ajax":359,"../../services/page-title":368,"../../services/snackbar":371,"../../services/store":372,"../button":10,"../quick-search":191,"../users-list":278,react:"react"}],181:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;r(e("react"));var o=r(e("./followers"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default);var e,t,n,r=u(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"setSpecialProps",value:function(){this.PRELOADED_DATA_KEY="PROFILE_FOLLOWS",this.TITLE=gettext("Follows"),this.API_FILTER="follows"}},{key:"getLabel",value:function(){if(this.state.isLoaded){if(this.state.search){var e=ngettext("Found %(users)s user.","Found %(users)s users.",this.state.count);return interpolate(e,{users:this.state.count},!0)}if(this.props.profile.id===this.props.user.id){var t=ngettext("You are following %(users)s user.","You are following %(users)s users.",this.state.count);return interpolate(t,{users:this.state.count},!0)}var n=ngettext("%(username)s is following %(users)s user.","%(username)s is following %(users)s users.",this.state.count);return interpolate(n,{username:this.props.profile.username,users:this.state.count},!0)}return gettext("Loading...")}},{key:"getEmptyMessage",value:function(){return this.state.search?gettext("Search returned no users matching specified criteria."):this.props.user.id===this.props.profile.id?gettext("You are not following any users."):interpolate(gettext("%(username)s is not following any users."),{username:this.props.profile.username},!0)}}])&&l(e.prototype,t),n&&l(e,n),a}();n.default=a},{"./followers":180,react:"react"}],182:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.IsDisabledMessage=v,n.getColStyle=g,n.default=void 0;var l=r(e("react")),i=r(e("../avatar")),o=(r(e("../dropdown-toggle")),r(e("./follow-button"))),s=r(e("./message-button")),u=r(e("./moderation/nav")),c=e("./navs"),f=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../user-status"));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=b(o);return t=l?(e=b(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==p(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,l.default.Component);var e,t,n,r=y(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getUserStatus",value:function(){return l.default.createElement("li",{className:"user-status-display"},l.default.createElement(f.default,{user:this.props.profile,status:this.props.profile.status},l.default.createElement(f.StatusIcon,{user:this.props.profile,status:this.props.profile.status}),l.default.createElement(f.StatusLabel,{user:this.props.profile,status:this.props.profile.status,className:"status-label"})))}},{key:"getUserRank",value:function(){return this.props.profile.rank.is_tab?l.default.createElement("li",{className:"user-rank"},l.default.createElement("a",{href:this.props.profile.rank.url,className:"item-title"},this.props.profile.rank.name)):l.default.createElement("li",{className:"user-rank"},l.default.createElement("span",{className:"item-title"},this.props.profile.rank.name))}},{key:"getUserTitle",value:function(){return this.props.profile.title?l.default.createElement("li",{className:"user-title"},this.props.profile.title):this.props.profile.rank.title?l.default.createElement("li",{className:"user-title"},this.props.profile.rank.title):null}},{key:"getJoinedOn",value:function(){var e=interpolate(gettext("Joined on %(joined_on)s"),{joined_on:this.props.profile.joined_on.format("LL, LT")},!0),t=interpolate(gettext("Joined %(joined_on)s"),{joined_on:this.props.profile.joined_on.fromNow()},!0);return l.default.createElement("li",{className:"user-joined-on"},l.default.createElement("abbr",{title:e},t))}},{key:"getEmail",value:function(){return this.props.profile.email?l.default.createElement("li",{className:"user-email"},l.default.createElement("a",{href:"mailto:"+this.props.profile.email,className:"item-title"},this.props.profile.email)):null}},{key:"getFollowButton",value:function(){return this.props.profile.acl.can_follow?l.default.createElement(o.default,{className:"btn btn-block btn-outline",profile:this.props.profile}):null}},{key:"getModerationButton",value:function(){return this.props.profile.acl.can_moderate?l.default.createElement("div",{className:"btn-group btn-group-justified"},l.default.createElement("div",{className:"btn-group"},l.default.createElement("button",{className:"btn btn-default btn-moderate btn-outline dropdown-toggle",type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},l.default.createElement("span",{className:"material-icon"},"tonality"),gettext("Moderation")),l.default.createElement(u.default,{profile:this.props.profile}))):null}},{key:"render",value:function(){var e=this.props.profile.acl.can_follow,t=this.props.profile.acl.can_moderate,n=!(this.props.user.id===this.props.profile.id)&&this.props.user.acl.can_start_private_threads,r=0;e&&(r+=1),t&&(r+=1),n&&(r+=1);var a=r?2*r+1:0,o="page-header";return this.props.profile.rank.css_class&&(o+=" page-header-rank-"+this.props.profile.rank.css_class),l.default.createElement("div",{className:"page-header-bg"},l.default.createElement("div",{className:o},l.default.createElement("div",{className:"container"},l.default.createElement(v,{isActive:this.props.profile.is_active,isDeletingAccount:this.props.profile.is_deleting_account}),l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-9 col-md-offset-3"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-sm-"+(12-a)},l.default.createElement(i.default,{className:"user-avatar user-avatar-sm",user:this.props.profile,size:"100",size2x:"200"}),l.default.createElement("h1",null,this.props.profile.username)),!!r&&l.default.createElement("div",{className:"col-sm-"+a},l.default.createElement("div",{className:"row xs-margin-top sm-margin-top"},!!n&&l.default.createElement("div",{className:g(r,0)},l.default.createElement(s.default,{className:"btn btn-default btn-block btn-outline",profile:this.props.profile,user:this.props.user})),!!e&&l.default.createElement("div",{className:g(r,1)},this.getFollowButton()),!!t&&l.default.createElement("div",{className:g(r,2)},this.getModerationButton()))))))),l.default.createElement("div",{className:"header-stats"},l.default.createElement("div",{className:"container"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-9 col-md-offset-3"},l.default.createElement("ul",{className:"list-inline"},this.getUserStatus(),this.getUserRank(),this.getUserTitle(),this.getJoinedOn(),this.getEmail()))))),l.default.createElement(c.CompactNav,{baseUrl:this.props.baseUrl,pages:this.props.pages,profile:this.props.profile})))}}])&&m(e.prototype,t),n&&m(e,n),a}();function v(e){var t=e.isActive,n=e.isDeletingAccount;if(!1!==t&&!0!==n)return null;var r=null,r=n?gettext("This user is deleting their account."):gettext("This user's account has been disabled by administrator.");return l.default.createElement("div",{className:"alert alert-danger"},l.default.createElement("p",null,r))}function g(e,t){var n=2==e?"col-xs-6 col-sm-6":1==e?"col-xs-12":"";return 3==e&&(2==t?n="col-xs-12 col-sm-4 xs-margin-top":n+="col-xs-6 col-sm-4"),n}n.default=a},{"../avatar":8,"../dropdown-toggle":29,"../user-status":268,"./follow-button":179,"./message-button":183,"./moderation/nav":187,"./navs":188,react:"react"}],183:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("react")),u=a(e("../../services/posting")),c=a(e("../.."));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=s(o);return t=l?(e=s(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?d(n):r}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,r.default.Component);var e,t,n,i=f(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=i.call.apply(i,[this].concat(o)),t=d(e),r=function(){u.default.open({mode:"START_PRIVATE",submit:c.default.get("PRIVATE_THREADS_API"),to:[e.props.profile]})},(n="onClick")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return e=s,(t=[{key:"render",value:function(){var e=this.props.user.acl.can_start_private_threads,t=this.props.user.id===this.props.profile.id;return!e||t?null:r.default.createElement("button",{className:this.props.className,onClick:this.onClick,type:"button"},r.default.createElement("span",{className:"material-icon"},"comment"),gettext("Message"))}}])&&o(e.prototype,t),n&&o(e,n),s}();n.default=p},{"../..":296,"../../services/posting":370,react:"react"}],184:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../../button")),i=r(e("../../form")),s=r(e("../../form-group")),u=r(e("../../modal-loader")),c=r(e("../../yes-no-switch")),f=r(e("../../modal-message")),d=e("../../../reducers/users"),p=r(e("../../../services/ajax")),m=r(e("../../../services/snackbar")),h=r(e("../../../services/store"));function r(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==y(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,i.default);var e,t,n,r=g(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={isLoaded:!1,isLoading:!1,error:null,is_avatar_locked:"",avatar_lock_user_message:"",avatar_lock_staff_message:""},t}return e=a,(t=[{key:"componentDidMount",value:function(){var t=this;p.default.get(this.props.profile.api.moderate_avatar).then(function(e){t.setState({isLoaded:!0,is_avatar_locked:e.is_avatar_locked,avatar_lock_user_message:e.avatar_lock_user_message||"",avatar_lock_staff_message:e.avatar_lock_staff_message||""})},function(e){t.setState({isLoaded:!0,error:e.detail})})}},{key:"clean",value:function(){return!!this.isValid()||(m.default.error(this.validate().username[0]),!1)}},{key:"send",value:function(){return p.default.post(this.props.profile.api.moderate_avatar,{is_avatar_locked:this.state.is_avatar_locked,avatar_lock_user_message:this.state.avatar_lock_user_message,avatar_lock_staff_message:this.state.avatar_lock_staff_message})}},{key:"handleSuccess",value:function(e){h.default.dispatch((0,d.updateAvatar)(this.props.profile,e.avatar_hash)),m.default.success(gettext("Avatar controls have been changed."))}},{key:"getFormBody",value:function(){return o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"modal-body"},o.default.createElement(s.default,{label:gettext("Lock avatar"),helpText:gettext("Locking user avatar will prohibit user from changing his avatar and will reset his/her avatar to default one."),for:"id_is_avatar_locked"},o.default.createElement(c.default,{id:"id_is_avatar_locked",disabled:this.state.isLoading,iconOn:"lock_outline",iconOff:"lock_open",labelOn:gettext("Disallow user from changing avatar"),labelOff:gettext("Allow user to change avatar"),onChange:this.bindInput("is_avatar_locked"),value:this.state.is_avatar_locked})),o.default.createElement(s.default,{label:gettext("User message"),helpText:gettext("Optional message for user explaining why he/she is prohibited form changing avatar."),for:"id_avatar_lock_user_message"},o.default.createElement("textarea",{id:"id_avatar_lock_user_message",className:"form-control",rows:"4",disabled:this.state.isLoading,onChange:this.bindInput("avatar_lock_user_message"),value:this.state.avatar_lock_user_message})),o.default.createElement(s.default,{label:gettext("Staff message"),helpText:gettext("Optional message for forum team members explaining why user is prohibited form changing avatar."),for:"id_avatar_lock_staff_message"},o.default.createElement("textarea",{id:"id_avatar_lock_staff_message",className:"form-control",rows:"4",disabled:this.state.isLoading,onChange:this.bindInput("avatar_lock_staff_message"),value:this.state.avatar_lock_staff_message}))),o.default.createElement("div",{className:"modal-footer"},o.default.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},gettext("Close")),o.default.createElement(l.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Save changes"))))}},{key:"getModalBody",value:function(){return this.state.error?o.default.createElement(f.default,{icon:"remove_circle_outline",message:this.state.error}):this.state.isLoaded?this.getFormBody():o.default.createElement(u.default,null)}},{key:"getClassName",value:function(){return this.state.error?"modal-dialog modal-message modal-avatar-controls":"modal-dialog modal-avatar-controls"}},{key:"render",value:function(){return o.default.createElement("div",{className:this.getClassName(),role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Avatar controls"))),this.getModalBody()))}}])&&b(e.prototype,t),n&&b(e,n),a}();n.default=a},{"../../../reducers/users":358,"../../../services/ajax":359,"../../../services/snackbar":371,"../../../services/store":372,"../../button":10,"../../form":50,"../../form-group":49,"../../modal-loader":55,"../../modal-message":56,"../../yes-no-switch":294,react:"react"}],185:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../../button")),i=r(e("../../form")),s=r(e("../../form-group")),u=r(e("../../modal-loader")),c=r(e("../../modal-message")),f=e("../../../reducers/username-history"),d=e("../../../reducers/users"),p=r(e("../../../services/ajax")),m=r(e("../../../services/snackbar")),h=r(e("../../../services/store")),y=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!=typeof e)return{default:e};var t=b();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../utils/validators"));function b(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return b=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==v(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(a,i.default);var e,t,n,r=E(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={isLoaded:!1,isLoading:!1,error:null,username:"",validators:{username:[y.usernameContent()]}},t}return e=a,(t=[{key:"componentDidMount",value:function(){var t=this;p.default.get(this.props.profile.api.moderate_username).then(function(){t.setState({isLoaded:!0})},function(e){t.setState({isLoaded:!0,error:e.detail})})}},{key:"clean",value:function(){return!!this.isValid()||(m.default.error(this.validate().username[0]),!1)}},{key:"send",value:function(){return p.default.post(this.props.profile.api.moderate_username,{username:this.state.username})}},{key:"handleSuccess",value:function(e){this.setState({username:""}),h.default.dispatch((0,f.addNameChange)(e,this.props.profile,this.props.user)),h.default.dispatch((0,d.updateUsername)(this.props.profile,e.username,e.slug)),m.default.success(gettext("Username has been changed."))}},{key:"getFormBody",value:function(){return o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"modal-body"},o.default.createElement(s.default,{label:gettext("New username"),for:"id_username"},o.default.createElement("input",{type:"text",id:"id_username",className:"form-control",disabled:this.state.isLoading,onChange:this.bindInput("username"),value:this.state.username}))),o.default.createElement("div",{className:"modal-footer"},o.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),o.default.createElement(l.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Change username"))))}},{key:"getModalBody",value:function(){return this.state.error?o.default.createElement(c.default,{icon:"remove_circle_outline",message:this.state.error}):this.state.isLoaded?this.getFormBody():o.default.createElement(u.default,null)}},{key:"getClassName",value:function(){return this.state.error?"modal-dialog modal-message modal-rename-user":"modal-dialog modal-rename-user"}},{key:"render",value:function(){return o.default.createElement("div",{className:this.getClassName(),role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Change username"))),this.getModalBody()))}}])&&g(e.prototype,t),n&&g(e,n),a}();n.default=a},{"../../../reducers/username-history":357,"../../../reducers/users":358,"../../../services/ajax":359,"../../../services/snackbar":371,"../../../services/store":372,"../../../utils/validators":387,"../../button":10,"../../form":50,"../../form-group":49,"../../modal-loader":55,"../../modal-message":56,react:"react"}],186:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("react")),a=o(e("../../button")),i=o(e("../../form")),s=o(e("../../form-group")),u=o(e("../../modal-loader")),c=o(e("../../modal-message")),f=o(e("../../yes-no-switch")),d=o(e("../../..")),p=o(e("../../../services/ajax")),m=o(e("../../../services/polls"));function o(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==h(r)&&"function"!=typeof r?g(n):r}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(l,i.default);var e,t,n,o=v(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=g(t),a=function(){window.setTimeout(function(){1<t.state.countdown?(t.setState({countdown:t.state.countdown-1}),t.countdown()):t.state.confirm||t.setState({confirm:!0})},1e3)},(r="countdown")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.state={isLoaded:!1,isLoading:!1,isDeleted:!1,error:null,countdown:5,confirm:!1,with_content:!1},t}return e=l,(t=[{key:"componentDidMount",value:function(){var t=this;p.default.get(this.props.profile.api.delete).then(function(){t.setState({isLoaded:!0}),t.countdown()},function(e){t.setState({isLoaded:!0,error:e.detail})})}},{key:"send",value:function(){return p.default.post(this.props.profile.api.delete,{with_content:this.state.with_content})}},{key:"handleSuccess",value:function(){m.default.stop("user-profile"),this.state.with_content?this.setState({isDeleted:interpolate(gettext("%(username)s's account, threads, posts and other content has been deleted."),{username:this.props.profile.username},!0)}):this.setState({isDeleted:interpolate(gettext("%(username)s's account has been deleted and other content has been hidden."),{username:this.props.profile.username},!0)})}},{key:"getButtonLabel",value:function(){return this.state.confirm?interpolate(gettext("Delete %(username)s"),{username:this.props.profile.username},!0):interpolate(gettext("Please wait... (%(countdown)ss)"),{countdown:this.state.countdown},!0)}},{key:"getForm",value:function(){return r.default.createElement("form",{onSubmit:this.handleSubmit},r.default.createElement("div",{className:"modal-body"},r.default.createElement(s.default,{label:gettext("User content"),for:"id_with_content"},r.default.createElement(f.default,{id:"id_with_content",disabled:this.state.isLoading,labelOn:gettext("Delete together with user's account"),labelOff:gettext("Hide after deleting user's account"),onChange:this.bindInput("with_content"),value:this.state.with_content}))),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{type:"button",className:"btn btn-default","data-dismiss":"modal"},gettext("Cancel")),r.default.createElement(a.default,{className:"btn-danger",loading:this.state.isLoading,disabled:!this.state.confirm},this.getButtonLabel())))}},{key:"getDeletedBody",value:function(){return r.default.createElement("div",{className:"modal-body"},r.default.createElement("div",{className:"message-icon"},r.default.createElement("span",{className:"material-icon"},"info_outline")),r.default.createElement("div",{className:"message-body"},r.default.createElement("p",{className:"lead"},this.state.isDeleted),r.default.createElement("p",null,r.default.createElement("a",{href:d.default.get("USERS_LIST_URL")},gettext("Return to users list")))))}},{key:"getModalBody",value:function(){return this.state.error?r.default.createElement(c.default,{icon:"remove_circle_outline",message:this.state.error}):this.state.isLoaded?this.state.isDeleted?this.getDeletedBody():this.getForm():r.default.createElement(u.default,null)}},{key:"getClassName",value:function(){return this.state.error||this.state.isDeleted?"modal-dialog modal-message modal-delete-account":"modal-dialog modal-delete-account"}},{key:"render",value:function(){return r.default.createElement("div",{className:this.getClassName(),role:"document"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},r.default.createElement("span",{"aria-hidden":"true"},"×")),r.default.createElement("h4",{className:"modal-title"},gettext("Delete user account"))),this.getModalBody()))}}])&&y(e.prototype,t),n&&y(e,n),l}();n.default=l},{"../../..":296,"../../../services/ajax":359,"../../../services/polls":369,"../../button":10,"../../form":50,"../../form-group":49,"../../modal-loader":55,"../../modal-message":56,"../../yes-no-switch":294,react:"react"}],187:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("react")),l=e("react-redux"),i=a(e("./avatar-controls")),s=a(e("./change-username")),u=a(e("./delete-account")),c=a(e("../../../services/modal"));function a(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?h(n):r}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){return{tick:e.tick,user:e.auth,profile:e.profile}},o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,r.default.Component);var e,t,n,a=m(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b(h(e=a.call.apply(a,[this].concat(n))),"showAvatarDialog",function(){c.default.show((0,l.connect)(v)(i.default))}),b(h(e),"showRenameDialog",function(){c.default.show((0,l.connect)(v)(s.default))}),b(h(e),"showDeleteDialog",function(){c.default.show((0,l.connect)(v)(u.default))}),e}return e=o,(t=[{key:"getAvatarButton",value:function(){return this.props.profile.acl.can_moderate_avatar?r.default.createElement("li",null,r.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.showAvatarDialog},r.default.createElement("span",{className:"material-icon"},"portrait"),gettext("Avatar controls"))):null}},{key:"getRenameButton",value:function(){return this.props.profile.acl.can_rename?r.default.createElement("li",null,r.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.showRenameDialog},r.default.createElement("span",{className:"material-icon"},"credit_card"),gettext("Change username"))):null}},{key:"getDeleteButton",value:function(){return this.props.profile.acl.can_delete?r.default.createElement("li",null,r.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.showDeleteDialog},r.default.createElement("span",{className:"material-icon"},"clear"),gettext("Delete account"))):null}},{key:"render",value:function(){return r.default.createElement("ul",{className:"dropdown-menu dropdown-menu-right stick-to-bottom",role:"menu"},this.getAvatarButton(),this.getRenameButton(),this.getDeleteButton())}}])&&d(e.prototype,t),n&&d(e,n),o}();n.default=o},{"../../../services/modal":366,"./avatar-controls":184,"./change-username":185,"./delete-account":186,react:"react","react-redux":"react-redux"}],188:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CompactNav=function(t){return o.default.createElement("div",{className:"page-tabs hidden-md hidden-lg"},o.default.createElement("div",{className:"container"},o.default.createElement("ul",{className:"nav nav-pills",role:"menu"},t.pages.map(function(e){return o.default.createElement(r.default,{path:t.baseUrl+e.component+"/",key:e.component},o.default.createElement(l.Link,{to:t.baseUrl+e.component+"/",onClick:t.hideNav},o.default.createElement("span",{className:"material-icon"},e.icon),e.name))}))))},n.SideNav=void 0;var o=a(e("react")),l=e("react-router"),r=a(e("../li"));a(e("./follow-button")),a(e("../.."));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){var t=this;return o.default.createElement("div",{className:"list-group nav-side"},this.props.pages.map(function(e){return o.default.createElement(l.Link,{to:t.props.baseUrl+e.component+"/",className:"list-group-item",activeClassName:"active",key:e.component},o.default.createElement("span",{className:"material-icon"},e.icon),e.name)}))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.SideNav=d},{"../..":296,"../li":51,"./follow-button":179,react:"react","react-router":"react-router"}],189:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.select=j,n.paths=function(){var t=[];return h.default.get("PROFILE_PAGES").forEach(function(e){t.push(Object.assign({},e,{path:h.default.get("PROFILE").url+e.component+"/",component:(0,a.connect)(j)(S[e.component])}))}),t},n.default=void 0;var r=g(e("react")),a=e("react-redux"),o=g(e("./ban-details")),l=g(e("./details")),i=e("./feed"),s=g(e("./followers")),u=g(e("./follows")),c=g(e("./username-history")),f=g(e("./header")),d=(g(e("./moderation/nav")),e("./navs")),p=g(e("../avatar")),m=g(e("../with-dropdown")),h=g(e("../..")),y=e("../../reducers/profile"),b=g(e("../../services/polls")),v=g(e("../../services/store"));function g(e){return e&&e.__esModule?e:{default:e}}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=x(o);return t=l?(e=x(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==_(r)&&"function"!=typeof r?k(n):r}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(l,m.default);var e,t,n,o=O(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=k(t),a=function(e){v.default.dispatch((0,y.hydrate)(e))},(r="update")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.startPolling(e.profile.api.index),t}return e=l,(t=[{key:"startPolling",value:function(e){b.default.start({poll:"user-profile",url:e,frequency:9e4,update:this.update})}},{key:"render",value:function(){var e=h.default.get("PROFILE").url,t=h.default.get("PROFILE_PAGES");return r.default.createElement("div",{className:"page page-user-profile"},r.default.createElement(f.default,{baseUrl:e,pages:t,profile:this.props.profile,toggleNav:this.toggleNav,toggleModeration:this.toggleModeration,user:this.props.user}),r.default.createElement("div",{className:"container"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-3 hidden-xs hidden-sm"},r.default.createElement("div",{className:"profile-side-avatar"},r.default.createElement(p.default,{user:this.props.profile,size:"400"})),r.default.createElement(d.SideNav,{baseUrl:e,pages:t,profile:this.props.profile})),r.default.createElement("div",{className:"col-md-9"},this.props.children))))}}])&&E(e.prototype,t),n&&E(e,n),l}();function j(e){return{isAuthenticated:e.auth.user.id===e.profile.id,tick:e.tick.tick,user:e.auth.user,users:e.users,posts:e.posts,profile:e.profile,profileDetails:e["profile-details"],"username-history":e["username-history"]}}n.default=P;var S={posts:i.Posts,threads:i.Threads,followers:s.default,follows:u.default,details:l.default,"username-history":c.default,"ban-details":o.default}},{"../..":296,"../../reducers/profile":350,"../../services/polls":369,"../../services/store":372,"../avatar":8,"../with-dropdown":293,"./ban-details":168,"./details":176,"./feed":177,"./followers":180,"./follows":181,"./header":182,"./moderation/nav":187,"./navs":188,"./username-history":190,react:"react","react-redux":"react-redux"}],190:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../button")),i=r(e("../quick-search")),s=r(e("../username-history/root")),u=r(e("../..")),c=e("../../reducers/username-history"),f=r(e("../../services/ajax")),d=r(e("../../services/snackbar")),p=r(e("../../services/store")),m=r(e("../../services/page-title"));function r(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==h(r)&&"function"!=typeof r?g(n):r}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,o.default.Component);var e,t,n,r=v(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),E(g(t=r.call(this,e)),"loadMore",function(){t.setState({isBusy:!0}),t.loadChanges(t.state.page+1,t.state.search)}),E(g(t),"search",function(e){t.setState({isLoaded:!1,isBusy:!0,search:e.target.value,count:0,more:0,page:1,pages:1}),t.loadChanges(1,e.target.value)}),u.default.has("PROFILE_NAME_HISTORY")?t.initWithPreloadedData(u.default.pop("PROFILE_NAME_HISTORY")):t.initWithoutPreloadedData(),t}return e=a,(t=[{key:"initWithPreloadedData",value:function(e){this.state={isLoaded:!0,isBusy:!1,search:"",count:e.count,more:e.more,page:e.page,pages:e.pages},p.default.dispatch((0,c.hydrate)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1,isBusy:!1,search:"",count:0,more:0,page:1,pages:1},this.loadChanges()}},{key:"loadChanges",value:function(e,t){var n=this,r=0<arguments.length&&void 0!==e?e:1,a=1<arguments.length&&void 0!==t?t:null;f.default.get(u.default.get("USERNAME_CHANGES_API"),{user:this.props.profile.id,search:a,page:r||1},"search-username-history").then(function(e){1===r?p.default.dispatch((0,c.hydrate)(e.results)):p.default.dispatch((0,c.append)(e.results)),n.setState({isLoaded:!0,isBusy:!1,count:e.count,more:e.more,page:e.page,pages:e.pages})},function(e){d.default.apiError(e)})}},{key:"componentDidMount",value:function(){m.default.set({title:gettext("Username history"),parent:this.props.profile.username})}},{key:"getLabel",value:function(){if(this.state.isLoaded){if(this.state.search){var e=ngettext("Found %(changes)s username change.","Found %(changes)s username changes.",this.state.count);return interpolate(e,{changes:this.state.count},!0)}if(this.props.profile.id===this.props.user.id){var t=ngettext("Your username was changed %(changes)s time.","Your username was changed %(changes)s times.",this.state.count);return interpolate(t,{changes:this.state.count},!0)}var n=ngettext("%(username)s's username was changed %(changes)s time.","%(username)s's username was changed %(changes)s times.",this.state.count);return interpolate(n,{username:this.props.profile.username,changes:this.state.count},!0)}return gettext("Loading...")}},{key:"getEmptyMessage",value:function(){return this.state.search?gettext("Search returned no username changes matching specified criteria."):this.props.user.id===this.props.profile.id?gettext("No name changes have been recorded for your account."):interpolate(gettext("%(username)s's username was never changed."),{username:this.props.profile.username},!0)}},{key:"getMoreButton",value:function(){return this.state.more?o.default.createElement("div",{className:"pager-more"},o.default.createElement(l.default,{className:"btn btn-default btn-outline",loading:this.state.isBusy,onClick:this.loadMore},interpolate(gettext("Show older (%(more)s)"),{more:this.state.more},!0))):null}},{key:"render",value:function(){return o.default.createElement("div",{className:"profile-username-history"},o.default.createElement("nav",{className:"toolbar"},o.default.createElement("h3",{className:"toolbar-left"},this.getLabel()),o.default.createElement(i.default,{className:"toolbar-right",value:this.state.search,onChange:this.search,placeholder:gettext("Search history...")})),o.default.createElement(s.default,{isLoaded:this.state.isLoaded,emptyMessage:this.getEmptyMessage(),changes:this.props["username-history"]}),this.getMoreButton())}}])&&y(e.prototype,t),n&&y(e,n),a}();n.default=a},{"../..":296,"../../reducers/username-history":357,"../../services/ajax":359,"../../services/page-title":368,"../../services/snackbar":371,"../../services/store":372,"../button":10,"../quick-search":191,"../username-history/root":274,react:"react"}],191:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,n,r=u(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getClassName",value:function(){return this.props.className?"form-search "+this.props.className:"form-search"}},{key:"render",value:function(){return o.default.createElement("div",{className:this.getClassName()},o.default.createElement("input",{type:"text",className:"form-control",value:this.props.value,onChange:this.props.onChange,placeholder:this.props.placeholder||gettext("Search...")}),o.default.createElement("span",{className:"material-icon"},"search"))}}])&&l(e.prototype,t),n&&l(e,n),a}();n.default=a},{react:"react"}],192:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=a(e("react")),r=a(e("./loader")),s=a(e("./register.js")),u=a(e("../services/ajax")),c=a(e("../services/captcha")),f=a(e("../services/modal")),d=a(e("../services/snackbar"));function a(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==p(r)&&"function"!=typeof r?b(n):r}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,i.default.Component);var e,t,n,o=y(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=b(t),a=function(){"closed"===misago.get("SETTINGS").account_activation?d.default.info(gettext("New registrations are currently disabled.")):t.state.isLoaded?f.default.show(i.default.createElement(s.default,{criteria:t.state.criteria})):(t.setState({isLoading:!0}),Promise.all([c.default.load(),u.default.get(misago.get("AUTH_CRITERIA_API"))]).then(function(e){t.setState({isLoading:!1,isLoaded:!0,criteria:e[1]}),f.default.show(i.default.createElement(s.default,{criteria:e[1]}))},function(){t.setState({isLoading:!1}),d.default.error(gettext("Registration is currently unavailable due to an error."))}))},(r="showRegisterForm")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.state={isLoading:!1,isLoaded:!1,criteria:null},t}return e=l,(t=[{key:"getClassName",value:function(){return this.props.className+(this.state.isLoading?" btn-loading":"")}},{key:"render",value:function(){return i.default.createElement("button",{className:"btn "+this.getClassName(),disabled:this.state.isLoading,onClick:this.showRegisterForm,type:"button"},gettext("Make Account"),this.state.isLoading?i.default.createElement(r.default,null):null)}}])&&m(e.prototype,t),n&&m(e,n),l}();n.default=o},{"../services/ajax":359,"../services/captcha":361,"../services/modal":366,"../services/snackbar":371,"./loader":52,"./register.js":193,react:"react"}],193:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.RegisterComplete=n.RegisterForm=void 0;var a=g(e("react")),r=g(e("./button")),o=g(e("./form")),i=g(e("./form-group")),u=g(e("./password-strength")),c=g(e("./RegisterLegalFootnote")),f=g(e("./StartSocialAuth")),d=g(e("./..")),p=g(e("../services/ajax")),l=g(e("../services/auth")),m=g(e("../services/captcha")),h=g(e("../services/modal")),y=g(e("../services/snackbar")),b=g(e("../utils/banned-page")),v=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==_(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../utils/validators"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function g(e){return e&&e.__esModule?e:{default:e}}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach(function(e){M(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),e}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=R(o);return t=l?(e=R(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==_(r)&&"function"!=typeof r?C(n):r}}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(){j(s,o.default);var l=N(s);function s(e){var i;k(this,s),M(C(i=l.call(this,e)),"handlePrivacyPolicyChange",function(e){var t=e.target.value;i.handleToggleAgreement("privacyPolicy",t)}),M(C(i),"handleTermsOfServiceChange",function(e){var t=e.target.value;i.handleToggleAgreement("termsOfService",t)}),M(C(i),"handleToggleAgreement",function(o,l){i.setState(function(e,t){if(null===e[o]){var n=O(O({},e.errors),{},M({},o,null));return M({errors:n},o,l)}var r=i.state.validators[o][0],a=O(O({},e.errors),{},M({},o,[r(null)]));return M({errors:a},o,null)})});var t=i.props.criteria,n=t.username,r=t.password,a=0;r.forEach(function(e){"MinimumLengthValidator"===e.name&&(a=e.min_length)});var o={username:[v.usernameContent(),v.usernameMinLength(n.min_length),v.usernameMaxLength(n.max_length)],email:[v.email()],password:[v.passwordMinLength(a)],captcha:m.default.validator()};return d.default.get("TERMS_OF_SERVICE_ID")&&(o.termsOfService=[v.requiredTermsOfService()]),d.default.get("PRIVACY_POLICY_ID")&&(o.privacyPolicy=[v.requiredPrivacyPolicy()]),i.state={isLoading:!1,username:"",email:"",password:"",captcha:"",termsOfService:null,privacyPolicy:null,validators:o,errors:{}},i}return P(s,[{key:"clean",value:function(){return!!this.isValid()||(y.default.error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return p.default.post(d.default.get("USERS_API"),{username:this.state.username,email:this.state.email,password:this.state.password,captcha:this.state.captcha,terms_of_service:this.state.termsOfService,privacy_policy:this.state.privacyPolicy})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){400===e.status?(this.setState({errors:Object.assign({},this.state.errors,e)}),e.__all__&&0<e.__all__.length?y.default.error(e.__all__[0]):y.default.error(gettext("Form contains errors."))):403===e.status&&e.ban?((0,b.default)(e.ban),h.default.hide()):y.default.apiError(e)}},{key:"render",value:function(){return a.default.createElement("div",{className:"modal-dialog modal-register",role:"document"},a.default.createElement("div",{className:"modal-content"},a.default.createElement("div",{className:"modal-header"},a.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},a.default.createElement("span",{"aria-hidden":"true"},"×")),a.default.createElement("h4",{className:"modal-title"},gettext("Register"))),a.default.createElement("form",{onSubmit:this.handleSubmit},a.default.createElement("input",{type:"type",style:{display:"none"}}),a.default.createElement("input",{type:"password",style:{display:"none"}}),a.default.createElement("div",{className:"modal-body"},a.default.createElement(f.default,{buttonClassName:"col-xs-12 col-sm-6",buttonLabel:gettext("Join with %(site)s"),formLabel:gettext("Or create forum account:")}),a.default.createElement(i.default,{label:gettext("Username"),for:"id_username",validation:this.state.errors.username},a.default.createElement("input",{type:"text",id:"id_username",className:"form-control","aria-describedby":"id_username_status",disabled:this.state.isLoading,onChange:this.bindInput("username"),value:this.state.username})),a.default.createElement(i.default,{label:gettext("E-mail"),for:"id_email",validation:this.state.errors.email},a.default.createElement("input",{type:"text",id:"id_email",className:"form-control","aria-describedby":"id_email_status",disabled:this.state.isLoading,onChange:this.bindInput("email"),value:this.state.email})),a.default.createElement(i.default,{label:gettext("Password"),for:"id_password",validation:this.state.errors.password,extra:a.default.createElement(u.default,{password:this.state.password,inputs:[this.state.username,this.state.email]})},a.default.createElement("input",{type:"password",id:"id_password",className:"form-control","aria-describedby":"id_password_status",disabled:this.state.isLoading,onChange:this.bindInput("password"),value:this.state.password})),m.default.component({form:this}),a.default.createElement(c.default,{errors:this.state.errors,privacyPolicy:this.state.privacyPolicy,termsOfService:this.state.termsOfService,onPrivacyPolicyChange:this.handlePrivacyPolicyChange,onTermsOfServiceChange:this.handleTermsOfServiceChange})),a.default.createElement("div",{className:"modal-footer"},a.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),a.default.createElement(r.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Register account"))))))}}]),s}();n.RegisterForm=T;var D=function(){j(t,a.default.Component);var e=N(t);function t(){return k(this,t),e.apply(this,arguments)}return P(t,[{key:"getLead",value:function(){return"user"===this.props.activation?gettext("%(username)s, your account has been created but you need to activate it before you will be able to sign in."):"admin"===this.props.activation?gettext("%(username)s, your account has been created but board administrator will have to activate it before you will be able to sign in."):void 0}},{key:"getSubscript",value:function(){return"user"===this.props.activation?gettext("We have sent an e-mail to %(email)s with link that you have to click to activate your account."):"admin"===this.props.activation?gettext("We will send an e-mail to %(email)s when this takes place."):void 0}},{key:"render",value:function(){return a.default.createElement("div",{className:"modal-dialog modal-message modal-register",role:"document"},a.default.createElement("div",{className:"modal-content"},a.default.createElement("div",{className:"modal-header"},a.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},a.default.createElement("span",{"aria-hidden":"true"},"×")),a.default.createElement("h4",{className:"modal-title"},gettext("Registration complete"))),a.default.createElement("div",{className:"modal-body"},a.default.createElement("div",{className:"message-icon"},a.default.createElement("span",{className:"material-icon"},"info_outline")),a.default.createElement("div",{className:"message-body"},a.default.createElement("p",{className:"lead"},interpolate(this.getLead(),{username:this.props.username},!0)),a.default.createElement("p",null,interpolate(this.getSubscript(),{email:this.props.email},!0)),a.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},gettext("Ok"))))))}}]),t}();n.RegisterComplete=D;var L=function(){j(r,a.default.Component);var n=N(r);function r(e){var t;return k(this,r),M(C(t=n.call(this,e)),"completeRegistration",function(e){"active"===e.activation?(h.default.hide(),l.default.signIn(e)):t.setState({complete:e})}),t.state={complete:!1},t}return P(r,[{key:"render",value:function(){return this.state.complete?a.default.createElement(D,{activation:this.state.complete.activation,email:this.state.complete.email,username:this.state.complete.username}):a.default.createElement(T,E({callback:this.completeRegistration},this.props))}}]),r}();n.default=L},{"../services/ajax":359,"../services/auth":360,"../services/captcha":361,"../services/modal":366,"../services/snackbar":371,"../utils/banned-page":374,"../utils/validators":387,"./..":296,"./RegisterLegalFootnote":3,"./StartSocialAuth":4,"./button":10,"./form":50,"./form-group":49,"./password-strength":97,react:"react"}],194:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.LinkSent=n.RequestLinkForm=void 0;var a=r(e("react")),o=r(e("./..")),l=r(e("./button")),i=r(e("./form")),s=r(e("../services/ajax")),u=r(e("../services/snackbar")),c=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../utils/validators")),f=r(e("../utils/banned-page"));function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==p(r)&&"function"!=typeof r?E(n):r}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(){v(r,i.default);var n=_(r);function r(e){var t;return h(this,r),(t=n.call(this,e)).state={isLoading:!1,email:"",validators:{email:[c.email()]}},t}return b(r,[{key:"clean",value:function(){return!!this.isValid()||(u.default.error(gettext("Enter a valid email address.")),!1)}},{key:"send",value:function(){return s.default.post(o.default.get("SEND_ACTIVATION_API"),{email:this.state.email})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){-1<["already_active","inactive_admin"].indexOf(e.code)?u.default.info(e.detail):403===e.status&&e.ban?(0,f.default)(e.ban):u.default.apiError(e)}},{key:"render",value:function(){return a.default.createElement("div",{className:"well well-form well-form-request-activation-link"},a.default.createElement("form",{onSubmit:this.handleSubmit},a.default.createElement("div",{className:"form-group"},a.default.createElement("div",{className:"control-input"},a.default.createElement("input",{type:"text",className:"form-control",placeholder:gettext("Your e-mail address"),disabled:this.state.isLoading,onChange:this.bindInput("email"),value:this.state.email}))),a.default.createElement(l.default,{className:"btn-primary btn-block",loading:this.state.isLoading},gettext("Send link"))))}}]),r}();n.RequestLinkForm=O;var k=function(){v(t,a.default.Component);var e=_(t);function t(){return h(this,t),e.apply(this,arguments)}return b(t,[{key:"getMessage",value:function(){return interpolate(gettext("Activation link was sent to %(email)s"),{email:this.props.user.email},!0)}},{key:"render",value:function(){return a.default.createElement("div",{className:"well well-form well-form-request-activation-link well-done"},a.default.createElement("div",{className:"done-message"},a.default.createElement("div",{className:"message-icon"},a.default.createElement("span",{className:"material-icon"},"check")),a.default.createElement("div",{className:"message-body"},a.default.createElement("p",null,this.getMessage())),a.default.createElement("button",{className:"btn btn-primary btn-block",type:"button",onClick:this.props.callback},gettext("Request another link"))))}}]),t}();n.LinkSent=k;var x=function(){v(r,a.default.Component);var n=_(r);function r(e){var t;return h(this,r),m(E(t=n.call(this,e)),"complete",function(e){t.setState({complete:e})}),m(E(t),"reset",function(){t.setState({complete:!1})}),t.state={complete:!1},t}return b(r,[{key:"render",value:function(){return this.state.complete?a.default.createElement(k,{user:this.state.complete,callback:this.reset}):a.default.createElement(O,{callback:this.complete})}}]),r}();n.default=x},{"../services/ajax":359,"../services/snackbar":371,"../utils/banned-page":374,"../utils/validators":387,"./..":296,"./button":10,"./form":50,react:"react"}],195:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.AccountInactivePage=n.LinkSent=n.RequestResetForm=void 0;var a=r(e("react")),o=r(e("react-dom")),l=r(e("./..")),i=r(e("./button")),s=r(e("./form")),u=r(e("../services/ajax")),c=r(e("../services/snackbar")),f=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==m(e)&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../utils/validators")),d=r(e("../utils/banned-page"));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=O(o);return t=l?(e=O(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==m(r)&&"function"!=typeof r?w(n):r}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(){g(r,s.default);var n=E(r);function r(e){var t;return y(this,r),(t=n.call(this,e)).state={isLoading:!1,email:"",validators:{email:[f.email()]}},t}return v(r,[{key:"clean",value:function(){return!!this.isValid()||(c.default.error(gettext("Enter a valid email address.")),!1)}},{key:"send",value:function(){return u.default.post(l.default.get("SEND_PASSWORD_RESET_API"),{email:this.state.email})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){-1<["inactive_user","inactive_admin"].indexOf(e.code)?this.props.showInactivePage(e):403===e.status&&e.ban?(0,d.default)(e.ban):c.default.apiError(e)}},{key:"render",value:function(){return a.default.createElement("div",{className:"well well-form well-form-request-password-reset"},a.default.createElement("form",{onSubmit:this.handleSubmit},a.default.createElement("div",{className:"form-group"},a.default.createElement("div",{className:"control-input"},a.default.createElement("input",{type:"text",className:"form-control",placeholder:gettext("Your e-mail address"),disabled:this.state.isLoading,onChange:this.bindInput("email"),value:this.state.email}))),a.default.createElement(i.default,{className:"btn-primary btn-block",loading:this.state.isLoading},gettext("Send link"))))}}]),r}();n.RequestResetForm=k;var x=function(){g(t,a.default.Component);var e=E(t);function t(){return y(this,t),e.apply(this,arguments)}return v(t,[{key:"getMessage",value:function(){return interpolate(gettext("Reset password link was sent to %(email)s"),{email:this.props.user.email},!0)}},{key:"render",value:function(){return a.default.createElement("div",{className:"well well-form well-form-request-password-reset well-done"},a.default.createElement("div",{className:"done-message"},a.default.createElement("div",{className:"message-icon"},a.default.createElement("span",{className:"material-icon"},"check")),a.default.createElement("div",{className:"message-body"},a.default.createElement("p",null,this.getMessage())),a.default.createElement("button",{type:"button",className:"btn btn-primary btn-block",onClick:this.props.callback},gettext("Request another link"))))}}]),t}();n.LinkSent=x;var P=function(){g(t,a.default.Component);var e=E(t);function t(){return y(this,t),e.apply(this,arguments)}return v(t,[{key:"getActivateButton",value:function(){return"inactive_user"===this.props.activation?a.default.createElement("p",null,a.default.createElement("a",{href:l.default.get("REQUEST_ACTIVATION_URL")},gettext("Activate your account."))):null}},{key:"render",value:function(){return a.default.createElement("div",{className:"page page-message page-message-info page-forgotten-password-inactive"},a.default.createElement("div",{className:"container"},a.default.createElement("div",{className:"message-panel"},a.default.createElement("div",{className:"message-icon"},a.default.createElement("span",{className:"material-icon"},"info_outline")),a.default.createElement("div",{className:"message-body"},a.default.createElement("p",{className:"lead"},gettext("Your account is inactive.")),a.default.createElement("p",null,this.props.message),this.getActivateButton()))))}}]),t}();n.AccountInactivePage=P;var j=function(){g(r,a.default.Component);var n=E(r);function r(e){var t;return y(this,r),h(w(t=n.call(this,e)),"complete",function(e){t.setState({complete:e})}),h(w(t),"reset",function(){t.setState({complete:!1})}),t.state={complete:!1},t}return v(r,[{key:"showInactivePage",value:function(e){o.default.render(a.default.createElement(P,{activation:e.code,message:e.detail}),document.getElementById("page-mount"))}},{key:"render",value:function(){return this.state.complete?a.default.createElement(x,{callback:this.reset,user:this.state.complete}):a.default.createElement(k,{callback:this.complete,showInactivePage:this.showInactivePage})}}]),r}();n.default=j},{"../services/ajax":359,"../services/snackbar":371,"../utils/banned-page":374,"../utils/validators":387,"./..":296,"./button":10,"./form":50,react:"react","react-dom":"react-dom"}],196:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.PasswordChangedPage=n.ResetPasswordForm=void 0;var u=m(e("react")),c=m(e("react-dom")),a=m(e("./..")),o=m(e("./button")),l=m(e("./form")),r=m(e("./sign-in.js")),i=m(e("../services/ajax")),f=m(e("../services/auth")),s=m(e("../services/modal")),d=m(e("../services/snackbar")),p=m(e("../utils/banned-page"));function m(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=O(o);return t=l?(e=O(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==h(r)&&"function"!=typeof r?w(n):r}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(){g(r,l.default);var n=E(r);function r(e){var t;return y(this,r),(t=n.call(this,e)).state={isLoading:!1,password:""},t}return v(r,[{key:"clean",value:function(){return!!this.state.password.trim().length||(d.default.error(gettext("Enter new password.")),!1)}},{key:"send",value:function(){return i.default.post(a.default.get("CHANGE_PASSWORD_API"),{password:this.state.password})}},{key:"handleSuccess",value:function(e){this.props.callback(e)}},{key:"handleError",value:function(e){403===e.status&&e.ban?(0,p.default)(e.ban):d.default.apiError(e)}},{key:"render",value:function(){return u.default.createElement("div",{className:"well well-form well-form-reset-password"},u.default.createElement("form",{onSubmit:this.handleSubmit},u.default.createElement("div",{className:"form-group"},u.default.createElement("div",{className:"control-input"},u.default.createElement("input",{type:"password",className:"form-control",placeholder:gettext("Enter new password"),disabled:this.state.isLoading,onChange:this.bindInput("password"),value:this.state.password}))),u.default.createElement(o.default,{className:"btn-primary btn-block",loading:this.state.isLoading},gettext("Change password"))))}}]),r}();n.ResetPasswordForm=k;var x=function(){g(t,u.default.Component);var e=E(t);function t(){return y(this,t),e.apply(this,arguments)}return v(t,[{key:"getMessage",value:function(){return interpolate(gettext("%(username)s, your password has been changed successfully."),{username:this.props.user.username},!0)}},{key:"showSignIn",value:function(){s.default.show(r.default)}},{key:"render",value:function(){return u.default.createElement("div",{className:"page page-message page-message-success page-forgotten-password-changed"},u.default.createElement("div",{className:"container"},u.default.createElement("div",{className:"message-panel"},u.default.createElement("div",{className:"message-icon"},u.default.createElement("span",{className:"material-icon"},"check")),u.default.createElement("div",{className:"message-body"},u.default.createElement("p",{className:"lead"},this.getMessage()),u.default.createElement("p",null,gettext("You will have to sign in using new password before continuing.")),u.default.createElement("p",null,u.default.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.showSignIn},gettext("Sign in")))))))}}]),t}();n.PasswordChangedPage=x;var P=function(){g(s,u.default.Component);var i=E(s);function s(){var e;y(this,s);for(var t,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=i.call.apply(i,[this].concat(o)),t=w(e),r=function(e){f.default.softSignOut(),$('#hidden-login-form input[name="redirect_to"]').remove(),c.default.render(u.default.createElement(x,{user:e}),document.getElementById("page-mount"))},(n="complete")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return v(s,[{key:"render",value:function(){return u.default.createElement(k,{callback:this.complete})}}]),s}();n.default=P},{"../services/ajax":359,"../services/auth":360,"../services/modal":366,"../services/snackbar":371,"../utils/banned-page":374,"./..":296,"./button":10,"./form":50,"./sign-in.js":205,react:"react","react-dom":"react-dom"}],197:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("react")),a=o(e("../..")),i=o(e("../form")),s=e("../../reducers/posts"),u=e("../../reducers/search"),c=e("../../reducers/users"),f=o(e("../../services/ajax")),d=o(e("../../services/snackbar")),p=o(e("../../services/store"));function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=g(o);return t=l?(e=g(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==m(r)&&"function"!=typeof r?v(n):r}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,i.default);var e,t,n,o=b(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=v(t),a=function(e){t.changeValue("query",e.target.value)},(r="onQueryChange")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.state={isLoading:!1,query:e.search.query},t}return e=l,(t=[{key:"componentDidMount",value:function(){this.state.query.length&&this.handleSubmit()}},{key:"clean",value:function(){return!!this.state.query.trim().length||(d.default.error(gettext("You have to enter search query.")),!1)}},{key:"send",value:function(){return p.default.dispatch((0,u.update)({isLoading:!0})),f.default.get(a.default.get("SEARCH_API"),{q:this.state.query.trim()})}},{key:"handleSuccess",value:function(e){p.default.dispatch((0,u.update)({query:this.state.query.trim(),isLoading:!1,providers:e})),e.forEach(function(e){"users"===e.id?p.default.dispatch((0,c.hydrate)(e.results.results)):"threads"===e.id&&p.default.dispatch((0,s.load)(e.results))})}},{key:"handleError",value:function(e){d.default.apiError(e),p.default.dispatch((0,u.update)({isLoading:!1}))}},{key:"render",value:function(){return r.default.createElement("div",{className:"page-header-bg"},r.default.createElement("div",{className:"page-header page-search-form"},r.default.createElement("form",{onSubmit:this.handleSubmit},r.default.createElement("div",{className:"container"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-xs-12 col-md-3"},r.default.createElement("h1",null,gettext("Search"))),r.default.createElement("div",{className:"col-xs-12 col-md-9"},r.default.createElement("div",{className:"row xs-margin-top sm-margin-top"},r.default.createElement("div",{className:"col-xs-12 col-sm-8 col-md-9"},r.default.createElement("div",{className:"form-group"},r.default.createElement("input",{className:"form-control",disabled:this.props.search.isLoading||this.state.isLoading,onChange:this.onQueryChange,type:"text",value:this.state.query}))),r.default.createElement("div",{className:"col-xs-12 col-sm-4 col-md-3"},r.default.createElement("button",{className:"btn btn-primary btn-block btn-outline",disabled:this.props.search.isLoading||this.state.isLoading},gettext("Search"))))))))))}}])&&h(e.prototype,t),n&&h(e,n),l}();n.default=l},{"../..":296,"../../reducers/posts":348,"../../reducers/search":351,"../../reducers/users":358,"../../services/ajax":359,"../../services/snackbar":371,"../../services/store":372,"../form":50,react:"react"}],198:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.select=s,n.default=function(e){return e.map(function(e){return{path:e.url,component:(0,r.connect)(s)(i[e.id]),provider:e}})};var r=e("react-redux"),a=l(e("./threads")),o=l(e("./users"));function l(e){return e&&e.__esModule?e:{default:e}}var i={threads:a.default,users:o.default};function s(e){return{posts:e.posts,search:e.search,tick:e.tick.tick,user:e.auth.user,users:e.users}}},{"./threads":201,"./users":203,"react-redux":"react-redux"}],199:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.default.createElement("div",{className:"page page-search"},r.default.createElement(a.default,{provider:e.provider,search:e.search}),r.default.createElement("div",{className:"container"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-md-3"},r.default.createElement(o.default,{providers:e.search.providers})),r.default.createElement("div",{className:"col-md-9"},e.children,r.default.createElement(i,{provider:e.provider,search:e.search})))))},n.SearchTime=i;var r=l(e("react")),a=l(e("./form")),o=l(e("./sidenav"));function l(e){return e&&e.__esModule?e:{default:e}}function i(t){var n=null;if(t.search.providers.forEach(function(e){e.id===t.provider.id&&(n=e.time)}),null===n)return null;var e=gettext("Search took %(time)s s to complete");return r.default.createElement("footer",{className:"search-footer"},r.default.createElement("p",null,interpolate(e,{time:n},!0)))}},{"./form":197,"./sidenav":200,react:"react"}],200:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement("div",{className:"list-group nav-side"},e.providers.map(function(e){return a.default.createElement(o.Link,{activeClassName:"active",className:"list-group-item",key:e.id,to:e.url},a.default.createElement("span",{className:"material-icon"},e.icon),e.name,a.default.createElement(l,{results:e.results}))}))},n.Badge=l;var r,a=(r=e("react"))&&r.__esModule?r:{default:r},o=e("react-router");function l(e){if(!e.results)return null;var t=e.results.count;return 1e6<t?t=Math.ceil(t/1e6)+"KK":1e3<t&&(t=Math.ceil(t/1e3)+"K"),a.default.createElement("span",{className:"badge"},t)}},{react:"react","react-router":"react-router"}],201:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.default.createElement(a.default,{provider:e.route.provider,search:e.search},r.default.createElement(s,{query:e.search.query,posts:e.posts},r.default.createElement(o.default,i({provider:e.route.provider,query:e.search.query},e.posts))))},n.Blankslate=s;var r=l(e("react")),a=l(e("../page")),o=l(e("./results"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e){return e.posts&&e.posts.count?e.children:e.query.length?r.default.createElement("p",{className:"lead"},gettext("No threads matching search query have been found.")):r.default.createElement("p",{className:"lead"},gettext("Enter at least two characters to search threads."))}},{"../page":199,"./results":202,react:"react"}],202:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.default.createElement("div",null,r.default.createElement(a.default,{isReady:!0,posts:e.results}),r.default.createElement(v,e))},n.LoadMore=void 0;var r=l(e("react")),a=l(e("../../post-feed")),o=l(e("../../button")),u=(l(e("../../misago-markup")),e("../../../reducers/posts")),c=e("../../../reducers/search"),f=l(e("../../../services/ajax")),d=l(e("../../../services/snackbar")),p=l(e("../../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=s(o);return t=l?(e=s(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?b(n):r}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(s,r.default.Component);var e,t,n,i=y(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=i.call.apply(i,[this].concat(o)),t=b(e),r=function(){p.default.dispatch((0,u.update)({isBusy:!0})),f.default.get(e.props.provider.api,{q:e.props.query,page:e.props.next}).then(function(e){e.forEach(function(e){"threads"===e.id&&(p.default.dispatch((0,u.append)(e.results)),p.default.dispatch((0,c.updateProvider)(e)))}),p.default.dispatch((0,u.update)({isBusy:!1}))},function(e){d.default.apiError(e),p.default.dispatch((0,u.update)({isBusy:!1}))})},(n="onClick")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return e=s,(t=[{key:"render",value:function(){return this.props.more?r.default.createElement("div",{className:"pager-more"},r.default.createElement(o.default,{className:"btn btn-default btn-outline",loading:this.props.isBusy,onClick:this.onClick},gettext("Show more"))):null}}])&&m(e.prototype,t),n&&m(e,n),s}();n.LoadMore=v},{"../../../reducers/posts":348,"../../../reducers/search":351,"../../../services/ajax":359,"../../../services/snackbar":371,"../../../services/store":372,"../../button":10,"../../misago-markup":54,"../../post-feed":116,react:"react"}],203:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.default.createElement(a.default,{provider:e.route.provider,search:e.search},r.default.createElement(i,{query:e.search.query,users:e.users},r.default.createElement(o.default,{cols:3,isReady:!0,users:e.users})))},n.Blankslate=i;var r=l(e("react")),a=l(e("../page")),o=l(e("../../users-list"));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.users.length?e.children:e.query.length?r.default.createElement("p",{className:"lead"},gettext("No users matching search query have been found.")):r.default.createElement("p",{className:"lead"},gettext("Enter at least two characters to search users."))}},{"../../users-list":278,"../page":199,react:"react"}],204:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Icon=d,n.default=void 0;var r,a=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=s(o);return t=l?(e=s(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?c(n):r}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,a.default.Component);var e,t,n,i=u(s);function s(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var e,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return t=i.call.apply(i,[this].concat(o)),e=c(t),r=function(e){return function(){t.props.onChange({target:{value:e}})}},(n="change")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,t}return e=s,(t=[{key:"getChoice",value:function(){var t=this,n=null;return this.props.choices.map(function(e){e.value===t.props.value&&(n=e)}),n}},{key:"getIcon",value:function(){return this.getChoice().icon}},{key:"getLabel",value:function(){return this.getChoice().label}},{key:"render",value:function(){var n=this;return a.default.createElement("div",{className:"btn-group btn-select-group"},a.default.createElement("button",{type:"button",className:"btn btn-select dropdown-toggle",id:this.props.id||null,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false","aria-describedby":this.props["aria-describedby"]||null,disabled:this.props.disabled||!1},a.default.createElement(d,{icon:this.getIcon()}),this.getLabel()),a.default.createElement("ul",{className:"dropdown-menu"},this.props.choices.map(function(e,t){return a.default.createElement("li",{key:t},a.default.createElement("button",{type:"button",className:"btn-link",onClick:n.change(e.value)},a.default.createElement(d,{icon:e.icon}),e.label))})))}}])&&o(e.prototype,t),n&&o(e,n),s}();function d(e){var t=e.icon;return t?a.default.createElement("span",{className:"material-icon"},t):null}n.default=f},{react:"react"}],205:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("./..")),i=r(e("./button")),s=r(e("./form")),u=r(e("./StartSocialAuth")),c=r(e("../services/ajax")),f=r(e("../services/modal")),d=r(e("../services/snackbar")),p=r(e("../utils/banned-page"));function r(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==m(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,s.default);var e,t,n,r=b(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this,e)).state={isLoading:!1,showActivation:!1,username:"",password:"",validators:{username:[],password:[]}},t}return e=a,(t=[{key:"clean",value:function(){return!!this.isValid()||(d.default.error(gettext("Fill out both fields.")),!1)}},{key:"send",value:function(){return c.default.post(l.default.get("AUTH_API"),{username:this.state.username,password:this.state.password})}},{key:"handleSuccess",value:function(){var e=$("#hidden-login-form");e.append('<input type="text" name="username" />'),e.append('<input type="password" name="password" />'),e.find('input[type="hidden"]').val(c.default.getCsrfToken()),e.find('input[name="redirect_to"]').val(window.location.pathname),e.find('input[name="username"]').val(this.state.username),e.find('input[name="password"]').val(this.state.password),e.submit(),this.setState({isLoading:!0})}},{key:"handleError",value:function(e){400===e.status?"inactive_admin"===e.code?d.default.info(e.detail):"inactive_user"===e.code?(d.default.info(e.detail),this.setState({showActivation:!0})):"banned"===e.code?((0,p.default)(e.detail),f.default.hide()):d.default.error(e.detail):403===e.status&&e.ban?((0,p.default)(e.ban),f.default.hide()):d.default.apiError(e)}},{key:"getActivationButton",value:function(){return this.state.showActivation?o.default.createElement("a",{className:"btn btn-success btn-block",href:l.default.get("REQUEST_ACTIVATION_URL")},gettext("Activate account")):null}},{key:"render",value:function(){return o.default.createElement("div",{className:"modal-dialog modal-sm modal-sign-in",role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Sign in"))),o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"modal-body"},o.default.createElement(u.default,{buttonLabel:gettext("Sign in with %(site)s"),formLabel:gettext("Or use your forum account:"),labelClassName:"text-center"}),o.default.createElement("div",{className:"form-group"},o.default.createElement("div",{className:"control-input"},o.default.createElement("input",{className:"form-control input-lg",disabled:this.state.isLoading,id:"id_username",onChange:this.bindInput("username"),placeholder:gettext("Username or e-mail"),type:"text",value:this.state.username}))),o.default.createElement("div",{className:"form-group"},o.default.createElement("div",{className:"control-input"},o.default.createElement("input",{className:"form-control input-lg",disabled:this.state.isLoading,id:"id_password",onChange:this.bindInput("password"),placeholder:gettext("Password"),type:"password",value:this.state.password})))),o.default.createElement("div",{className:"modal-footer"},this.getActivationButton(),o.default.createElement(i.default,{className:"btn-primary btn-block",loading:this.state.isLoading},gettext("Sign in")),o.default.createElement("a",{className:"btn btn-default btn-block",href:l.default.get("FORGOTTEN_PASSWORD_URL")},gettext("Forgot password?"))))))}}])&&h(e.prototype,t),n&&h(e,n),a}();n.default=a},{"../services/ajax":359,"../services/modal":366,"../services/snackbar":371,"../utils/banned-page":374,"./..":296,"./StartSocialAuth":4,"./button":10,"./form":50,react:"react"}],206:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.select=function(e){return e.snackbar},n.Snackbar=void 0;var r,o=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f={info:"alert-info",success:"alert-success",warning:"alert-warning",error:"alert-danger"},a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,n,r=u(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getSnackbarClass",value:function(){var e="alerts-snackbar";return this.props.isVisible?e+=" in":e+=" out",e}},{key:"render",value:function(){return o.default.createElement("div",{className:this.getSnackbarClass()},o.default.createElement("p",{className:"alert "+f[this.props.type]},this.props.message))}}])&&l(e.prototype,t),n&&l(e,n),a}();n.Snackbar=a},{react:"react"}],207:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=r(e("react")),i=r(e("./header")),s=r(e("../.."));function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.activation,n=e.backend_name,r=e.username,a="",o="",o="user"===t?gettext("%(username)s, your account has been created but you need to activate it before you will be able to sign in."):"admin"===t?gettext("%(username)s, your account has been created but board administrator will have to activate it before you will be able to sign in."):gettext("%(username)s, your account has been created and you have been signed in to it."),a="active"===t?"check":"info_outline";return l.default.createElement("div",{className:"page page-social-auth page-social-sauth-register"},l.default.createElement(i.default,{backendName:n}),l.default.createElement("div",{className:"container"},l.default.createElement("div",{className:"row"},l.default.createElement("div",{className:"col-md-6 col-md-offset-3"},l.default.createElement("div",{className:"panel panel-default panel-form"},l.default.createElement("div",{className:"panel-heading"},l.default.createElement("h3",{className:"panel-title"},gettext("Registration completed!"))),l.default.createElement("div",{className:"panel-body panel-message-body"},l.default.createElement("div",{className:"message-icon"},l.default.createElement("span",{className:"material-icon"},a)),l.default.createElement("div",{className:"message-body"},l.default.createElement("p",{className:"lead"},interpolate(o,{username:r},!0)),l.default.createElement("p",{className:"help-block"},l.default.createElement("a",{className:"btn btn-default",href:s.default.get("MISAGO_PATH")},gettext("Return to forum index"))))))))))}n.default=a},{"../..":296,"./header":208,react:"react"}],208:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("react"))&&r.__esModule?r:{default:r};function o(e){var t=e.backendName,n=gettext("Sign in with %(backend)s"),r=interpolate(n,{backend:t},!0);return a.default.createElement("div",{className:"page-header-bg"},a.default.createElement("div",{className:"page-header"},a.default.createElement("div",{className:"container"},a.default.createElement("h1",null,r))))}n.default=o},{react:"react"}],209:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("react")),u=r(e("./register")),c=r(e("./complete"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=m(o);return t=l?(e=m(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?p(n):r}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,s.default.Component);var e,t,n,a=d(l);function l(e){var o,t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),o=a.call(this,e),t=p(o),r=function(e){var t=e.activation,n=e.email,r=e.step,a=e.username;o.setState({activation:t,email:n,step:r,username:a})},(n="handleRegistrationComplete")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,o.state={step:e.step,activation:e.activation||"",email:e.email||"",username:e.username||""},o}return e=l,(t=[{key:"render",value:function(){var e=this.props,t=e.backend_name,n=e.url,r=this.state,a=r.activation,o=r.email,l=r.step,i=r.username;return"register"===l?s.default.createElement(u.default,{backend_name:t,email:o,url:n,username:i,onRegistrationComplete:this.handleRegistrationComplete}):s.default.createElement(c.default,{activation:a,backend_name:t,email:o,url:n,username:i})}}])&&o(e.prototype,t),n&&o(e,n),l}();n.default=a},{"./complete":207,"./register":210,react:"react"}],210:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=r(e("react")),o=r(e("../..")),u=r(e("../RegisterLegalFootnote")),c=r(e("../button")),l=r(e("../form")),f=r(e("../form-group")),i=r(e("../../services/ajax")),d=r(e("../../services/snackbar")),p=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==y(e)&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../utils/validators")),m=r(e("./header"));function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){O(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==y(r)&&"function"!=typeof r?E(n):r}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,l.default);var e,t,n,r=_(a);function a(e){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),O(E(i=r.call(this,e)),"handlePrivacyPolicyChange",function(e){var t=e.target.value;i.handleToggleAgreement("privacyPolicy",t)}),O(E(i),"handleTermsOfServiceChange",function(e){var t=e.target.value;i.handleToggleAgreement("termsOfService",t)}),O(E(i),"handleToggleAgreement",function(o,l){i.setState(function(e,t){if(null===e[o]){var n=b(b({},e.errors),{},O({},o,null));return O({errors:n},o,l)}var r=i.state.validators[o][0],a=b(b({},e.errors),{},O({},o,[r(null)]));return O({errors:a},o,null)})});var t={email:[p.email()],username:[p.usernameContent()]};return o.default.get("TERMS_OF_SERVICE_ID")&&(t.termsOfService=[p.requiredTermsOfService()]),o.default.get("PRIVACY_POLICY_ID")&&(t.privacyPolicy=[p.requiredPrivacyPolicy()]),i.state={email:e.email||"",emailProtected:!!e.email,username:e.username||"",termsOfService:null,privacyPolicy:null,validators:t,errors:{},isLoading:!1},i}return e=a,(t=[{key:"clean",value:function(){this.validate();if(-1!==[this.state.email.trim().length,this.state.username.trim().length].indexOf(0))return d.default.error(gettext("Fill out all fields.")),!1;var e=this.state.validators;return o.default.get("TERMS_OF_SERVICE_ID")&&null===this.state.termsOfService?(d.default.error(e.termsOfService[0](null)),!1):!o.default.get("PRIVACY_POLICY_ID")||null!==this.state.privacyPolicy||(d.default.error(e.privacyPolicy[0](null)),d.default.error(gettext("You need to accept the privacy policy.")),!1)}},{key:"send",value:function(){return i.default.post(this.props.url,{email:this.state.email,username:this.state.username,terms_of_service:this.state.termsOfService,privacy_policy:this.state.privacyPolicy})}},{key:"handleSuccess",value:function(e){(0,this.props.onRegistrationComplete)(e)}},{key:"handleError",value:function(e){var t;200===e.status?(0,this.props.onRegistrationComplete)({activation:"active",step:"done",username:this.state.username}):400===e.status?(t={errors:e},e.email&&(t.emailProtected=!1),this.setState(t)):d.default.apiError(e)}},{key:"render",value:function(){var e,t=this.props.backend_name,n=this.state,r=n.email,a=n.emailProtected,o=n.username,l=n.isLoading,i=null;return a&&(e=gettext("Your e-mail address has been verified by %(backend)s."),i=interpolate(e,{backend:t},!0)),s.default.createElement("div",{className:"page page-social-auth page-social-sauth-register"},s.default.createElement(m.default,{backendName:t}),s.default.createElement("div",{className:"container"},s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-md-6 col-md-offset-3"},s.default.createElement("form",{onSubmit:this.handleSubmit},s.default.createElement("div",{className:"panel panel-default panel-form"},s.default.createElement("div",{className:"panel-heading"},s.default.createElement("h3",{className:"panel-title"},gettext("Complete your details"))),s.default.createElement("div",{className:"panel-body"},s.default.createElement(f.default,{for:"id_username",label:gettext("Username"),validation:this.state.errors.username},s.default.createElement("input",{type:"text",id:"id_username",className:"form-control",disabled:l,onChange:this.bindInput("username"),value:o})),s.default.createElement(f.default,{for:"id_email",label:gettext("E-mail address"),helpText:i,validation:a?null:this.state.errors.email},s.default.createElement("input",{type:"email",id:"id_email",className:"form-control",disabled:l||a,onChange:this.bindInput("email"),value:r})),s.default.createElement(u.default,{errors:this.state.errors,privacyPolicy:this.state.privacyPolicy,termsOfService:this.state.termsOfService,onPrivacyPolicyChange:this.handlePrivacyPolicyChange,onTermsOfServiceChange:this.handleTermsOfServiceChange})),s.default.createElement("div",{className:"panel-footer"},s.default.createElement(c.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Sign in")))))))))}}])&&v(e.prototype,t),n&&v(e,n),a}();n.default=k},{"../..":296,"../../services/ajax":359,"../../services/snackbar":371,"../../utils/validators":387,"../RegisterLegalFootnote":3,"../button":10,"../form":50,"../form-group":49,"./header":208,react:"react"}],211:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement("div",{className:"page-breadcrumbs"},a.default.createElement("div",{className:"container"},a.default.createElement("ol",{className:"breadcrumb hidden-xs"},e.path.map(function(e){return a.default.createElement(o,{key:e.id,node:e})})),a.default.createElement(l,e)))},n.Breadcrumb=o,n.GoBack=l;var r,a=(r=e("react"))&&r.__esModule?r:{default:r};function o(e){return a.default.createElement("li",null,a.default.createElement("a",{href:e.node.url.index},e.node.name))}function l(e){var t=e.path[e.path.length-1];return a.default.createElement("a",{href:t.url.index,className:"go-back-sm visible-xs-block"},a.default.createElement("span",{className:"material-icon"},"chevron_left"),t.name)}},{react:"react"}],212:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Moderation=k,n.default=void 0;var o=r(e("react")),l=r(e("./breadcrumbs")),i=e("../moderation/thread"),s=r(e("./stats")),u=r(e("../../form")),c=e("../../posting/utils/validators"),f=r(e("../../../services/ajax")),d=r(e("../../../services/snackbar")),p=r(e("../../../services/store")),m=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==y(e)&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../reducers/thread"));function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=w(o);return t=l?(e=w(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==y(r)&&"function"!=typeof r?E(n):r}}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(a,u.default);var e,t,n,r=_(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),O(E(t=r.call(this,e)),"onChange",function(e){t.changeValue("title",e.target.value)}),O(E(t),"onEdit",function(){t.setState({isEditing:!0})}),O(E(t),"onCancel",function(){t.setState({title:t.props.thread.title,isEditing:!1})}),t.state={isEditing:!1,isLoading:!1,title:e.thread.title,validators:{title:(0,c.getTitleValidators)()},errors:{}},t}return e=a,(t=[{key:"clean",value:function(){if(!this.state.title.trim().length)return d.default.error(gettext("You have to enter thread title.")),!1;var e=this.validate();return!e.title||(d.default.error(e.title[0]),!1)}},{key:"send",value:function(){return f.default.patch(this.props.thread.api.index,[{op:"replace",path:"title",value:this.state.title}])}},{key:"handleSuccess",value:function(e){p.default.dispatch(m.update(e)),this.setState({isEditing:!1})}},{key:"handleError",value:function(e){400===e.status?d.default.error(e.detail[0]):d.default.apiError(e)}},{key:"render",value:function(){var e=this.props,t=e.thread,n=e.user,r=!!n.id&&(0,i.isModerationVisible)(t);return this.state.isEditing?o.default.createElement("div",{className:"page-header"},o.default.createElement(l.default,{path:t.path}),o.default.createElement("div",{className:"container"},o.default.createElement("div",{className:"row xs-margin-top title-edit-form"},o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"col-sm-6 col-md-6"},o.default.createElement("input",{className:"form-control",type:"text",value:this.state.title,onChange:this.onChange})),o.default.createElement("div",{className:"col-sm-6 col-md-4"},o.default.createElement("div",{className:"row xs-margin-top-half sm-margin-top-no md-margin-top-no"},o.default.createElement("div",{className:"col-xs-6"},o.default.createElement("button",{className:"btn btn-primary btn-block btn-outline",disabled:this.state.isLoading,title:gettext("Change title")},gettext("Save changes"))),o.default.createElement("div",{className:"col-xs-6"},o.default.createElement("button",{className:"btn btn-default btn-block btn-outline",disabled:this.state.isLoading,onClick:this.onCancel,title:gettext("Cancel"),type:"button"},gettext("Cancel")))))))),o.default.createElement(s.default,{thread:t})):n.id&&t.acl.can_edit?o.default.createElement("div",{className:"page-header"},o.default.createElement(l.default,{path:t.path}),o.default.createElement("div",{className:"container"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:r?"col-sm-9 col-md-8":"col-sm-10 col-md-10"},o.default.createElement("h1",null,t.title)),o.default.createElement("div",{className:r?"col-sm-3 col-md-4":"col-sm-3 col-md-2"},o.default.createElement("div",{className:"row xs-margin-top md-margin-top-no"},o.default.createElement("div",{className:r?"col-xs-6":"col-xs-12"},o.default.createElement("button",{className:"btn btn-default btn-block btn-outline",onClick:this.onEdit,title:gettext("Edit title"),type:"button"},o.default.createElement("span",{className:"material-icon"},"edit"),o.default.createElement("span",{className:"hidden-sm"},gettext("Edit")))),r&&o.default.createElement(k,this.props))))),o.default.createElement(s.default,{thread:t})):r?o.default.createElement("div",{className:"page-header"},o.default.createElement(l.default,{path:t.path}),o.default.createElement("div",{className:"container"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-sm-9 col-md-10"},o.default.createElement("h1",null,t.title)),o.default.createElement("div",{className:"col-sm-3 col-md-2"},o.default.createElement("div",{className:"row xs-margin-top md-margin-top-no"},o.default.createElement(k,b({isSingle:!0},this.props)))))),o.default.createElement(s.default,{thread:t})):o.default.createElement("div",{className:"page-header"},o.default.createElement(l.default,{path:t.path}),o.default.createElement("div",{className:"container"},o.default.createElement("h1",null,t.title)),o.default.createElement(s.default,{thread:t}))}}])&&v(e.prototype,t),n&&v(e,n),a}();function k(e){return o.default.createElement("div",{className:e.isSingle?"col-xs-12":"col-xs-6"},o.default.createElement("div",{className:"btn-group btn-group-justified"},o.default.createElement("div",{className:"btn-group"},o.default.createElement("button",{"aria-expanded":"false","aria-haspopup":"true",className:"btn btn-default btn-outline dropdown-toggle","data-toggle":"dropdown",disabled:e.thread.isBusy,type:"button"},o.default.createElement("span",{className:"material-icon"},"settings"),o.default.createElement("span",{className:e.isSingle?"":"hidden-sm"},gettext("Moderation"))),o.default.createElement(i.ModerationControls,{posts:e.posts,thread:e.thread,user:e.user}))))}n.default=a},{"../../../reducers/thread":354,"../../../services/ajax":359,"../../../services/snackbar":371,"../../../services/store":372,"../../form":50,"../../posting/utils/validators":138,"../moderation/thread":221,"./breadcrumbs":211,"./stats":213,react:"react"}],213:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Weight=u,n.Unapproved=c,n.IsHidden=f,n.IsClosed=d,n.Replies=p,n.LastReply=m,n.default=function(e){return a.default.createElement("div",{className:"header-stats"},a.default.createElement("div",{className:"container"},a.default.createElement("ul",{className:"list-inline"},a.default.createElement(u,{thread:e.thread}),a.default.createElement(c,{thread:e.thread}),a.default.createElement(f,{thread:e.thread}),a.default.createElement(d,{thread:e.thread}),a.default.createElement(p,{thread:e.thread}),a.default.createElement(m,{thread:e.thread}))))};var a=r(e("react")),o=r(e("../../../utils/escape-html"));function r(e){return e&&e.__esModule?e:{default:e}}var l='<a href="%(url)s" class="poster-title">%(user)s</a>',i='<span class="poster-title">%(user)s</span>',s='<abbr class="last-title" title="%(absolute)s">%(relative)s</abbr>';function u(e){return 2==e.thread.weight?a.default.createElement("li",{className:"thread-pinned-globally"},a.default.createElement("span",{className:"material-icon"},"bookmark"),a.default.createElement("span",{className:"icon-legend"},gettext("Pinned globally"))):1==e.thread.weight?a.default.createElement("li",{className:"thread-pinned-locally"},a.default.createElement("span",{className:"material-icon"},"bookmark_border"),a.default.createElement("span",{className:"icon-legend"},gettext("Pinned locally"))):null}function c(e){return e.thread.is_unapproved?a.default.createElement("li",{className:"thread-unapproved"},a.default.createElement("span",{className:"material-icon"},"remove_circle"),a.default.createElement("span",{className:"icon-legend"},gettext("Unapproved"))):e.thread.has_unapproved_posts?a.default.createElement("li",{className:"thread-unapproved-posts"},a.default.createElement("span",{className:"material-icon"},"remove_circle_outline"),a.default.createElement("span",{className:"icon-legend"},gettext("Unapproved posts"))):null}function f(e){return e.thread.is_hidden?a.default.createElement("li",{className:"thread-hidden"},a.default.createElement("span",{className:"material-icon"},"visibility_off"),a.default.createElement("span",{className:"icon-legend"},gettext("Hidden"))):null}function d(e){return e.thread.is_closed?a.default.createElement("li",{className:"thread-closed"},a.default.createElement("span",{className:"material-icon"},"lock_outline"),a.default.createElement("span",{className:"icon-legend"},gettext("Closed"))):null}function p(e){var t=ngettext("%(replies)s reply","%(replies)s replies",e.thread.replies),n=interpolate(t,{replies:e.thread.replies},!0);return a.default.createElement("li",{className:"thread-replies"},a.default.createElement("span",{className:"material-icon"},"forum"),a.default.createElement("span",{className:"icon-legend"},n))}function m(e){var t=null,t=e.thread.url.last_poster?interpolate(l,{url:(0,o.default)(e.thread.url.last_poster),user:(0,o.default)(e.thread.last_poster_name)},!0):interpolate(i,{user:(0,o.default)(e.thread.last_poster_name)},!0),n=interpolate(s,{absolute:(0,o.default)(e.thread.last_post_on.format("LLL")),relative:(0,o.default)(e.thread.last_post_on.fromNow())},!0),r=interpolate((0,o.default)(gettext("last reply by %(user)s %(date)s")),{date:n,user:t},!0);return a.default.createElement("li",{className:"thread-last-reply",dangerouslySetInnerHTML:{__html:r}})}},{"../../../utils/escape-html":378,react:"react"}],214:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.approve=function(e){var t=e.selection,n=t.map(function(e){return{id:e.id,is_unapproved:!1}}),r=t.map(function(e){return{id:e.id,is_unapproved:e.is_unapproved}});y(e,[{op:"replace",path:"is-unapproved",value:!1}],n,r)},n.protect=function(e){var t=e.selection,n=t.map(function(e){return{id:e.id,is_protected:!0}}),r=t.map(function(e){return{id:e.id,is_protected:e.is_protected}});y(e,[{op:"replace",path:"is-protected",value:!0}],n,r)},n.unprotect=function(e){var t=e.selection,n=t.map(function(e){return{id:e.id,is_protected:!1}}),r=t.map(function(e){return{id:e.id,is_protected:e.is_protected}});y(e,[{op:"replace",path:"is-protected",value:!1}],n,r)},n.hide=function(t){var e=t.selection,n=e.map(function(e){return{id:e.id,is_hidden:!0,hidden_on:(0,a.default)(),hidden_by_name:t.user.username,url:Object.assign(e.url,{hidden_by:t.user.url})}}),r=e.map(function(e){return{id:e.id,is_hidden:e.is_hidden,hidden_on:e.hidden_on,hidden_by_name:e.hidden_by_name,url:e.url}});y(t,[{op:"replace",path:"is-hidden",value:!0}],n,r)},n.unhide=function(t){var e=t.selection,n=e.map(function(e){return{id:e.id,is_hidden:!1,hidden_on:(0,a.default)(),hidden_by_name:t.user.username,url:Object.assign(e.url,{hidden_by:t.user.url})}}),r=e.map(function(e){return{id:e.id,is_hidden:e.is_hidden,hidden_on:e.hidden_on,hidden_by_name:e.hidden_by_name,url:e.url}});y(t,[{op:"replace",path:"is-hidden",value:!1}],n,r)},n.patch=y,n.merge=function(t){if(!confirm(gettext("Are you sure you want to merge selected posts? This action is not reversible!")))return;t.selection.slice(1).map(function(e){p.default.dispatch(s.patch(e,{isDeleted:!0}))}),c.default.post(t.thread.api.posts.merge,{posts:t.selection.map(function(e){return e.id})}).then(function(e){p.default.dispatch(s.patch(e,s.hydrate(e)))},function(e){400===e.status?d.default.error(e.detail):d.default.apiError(e),t.selection.slice(1).map(function(e){p.default.dispatch(s.patch(e,{isDeleted:!1}))})}),p.default.dispatch(u.deselectAll())},n.remove=function(t){if(!confirm(gettext("Are you sure you want to delete selected posts? This action is not reversible!")))return;t.selection.map(function(e){p.default.dispatch(s.patch(e,{isDeleted:!0}))});var e=t.selection.map(function(e){return e.id});c.default.delete(t.thread.api.posts.index,e).then(function(){},function(e){400===e.status?d.default.error(e.detail):d.default.apiError(e),t.selection.map(function(e){p.default.dispatch(s.patch(e,{isDeleted:!1}))})}),p.default.dispatch(u.deselectAll())};var a=o(e("moment")),i=o(e("react")),s=r(e("../../../../reducers/post")),u=r(e("../../../../reducers/posts")),c=o(e("../../../../services/ajax")),f=o(e("../../../../services/modal")),d=o(e("../../../../services/snackbar")),p=o(e("../../../../services/store")),m=o(e("./errors-list"));function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((n=a?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o])}return r.default=e,t&&t.set(e,r),r}function o(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,a){var o=e.selection,r=e.thread;n.forEach(function(e){s.patch(e,e)}),p.default.dispatch(u.deselectAll());var l={ops:t,ids:o.map(function(e){return e.id})};c.default.patch(r.api.posts.index,l).then(function(e){e.forEach(function(e){p.default.dispatch(s.patch(e,e))})},function(e){if(400!==e.status)return a.forEach(function(e){p.default.dispatch(s.patch(e,e))}),d.default.apiError(e);var t=[],n=[];e.forEach(function(e){e.detail?(t.push(e),n.push(e.id)):p.default.dispatch(s.patch(e,e)),a.forEach(function(e){-1!==n.indexOf(e)&&p.default.dispatch(s.patch(e,e))})});var r={};o.forEach(function(e){r[e.id]=e}),f.default.show(i.default.createElement(m.default,{errors:t,posts:r}))})}},{"../../../../reducers/post":347,"../../../../reducers/posts":348,"../../../../services/ajax":359,"../../../../services/modal":366,"../../../../services/snackbar":371,"../../../../services/store":372,"./errors-list":216,moment:"moment",react:"react"}],215:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return l.default.createElement("ul",{className:"dropdown-menu"},l.default.createElement(_,e),l.default.createElement(E,e),l.default.createElement(w,e),l.default.createElement(O,e),l.default.createElement(k,e),l.default.createElement(x,e),l.default.createElement(j,e),l.default.createElement(P,e),l.default.createElement(S,e))},n.Delete=n.Unhide=n.Hide=n.Unprotect=n.Protect=n.Split=n.Move=n.Merge=n.Approve=void 0;var l=r(e("react")),i=r(e("../../../../services/modal")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("./actions")),u=r(e("./move")),c=r(e("./split"));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==d(r)&&"function"!=typeof r?b(n):r}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){s.approve(e.props)}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return e.acl.can_approve&&e.is_unapproved})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"done"),gettext("Approve"))):null}}]),o}();n.Approve=_;var E=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){s.merge(e.props)}),e}return m(o,[{key:"render",value:function(){return 1<this.props.selection.length&&this.props.selection.find(function(e){return e.acl.can_merge})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"call_merge"),gettext("Merge"))):null}}]),o}();n.Merge=E;var w=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){i.default.show(l.default.createElement(u.default,e.props))}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return e.acl.can_move})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"arrow_forward"),gettext("Move"))):null}}]),o}();n.Move=w;var O=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){i.default.show(l.default.createElement(c.default,e.props))}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return e.acl.can_move})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"call_split"),gettext("Split"))):null}}]),o}();n.Split=O;var k=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){s.protect(e.props)}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return!e.is_protected&&e.acl.can_protect})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"lock_outline"),gettext("Protect"))):null}}]),o}();n.Protect=k;var x=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){s.unprotect(e.props)}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return e.is_protected&&e.acl.can_protect})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"lock_open"),gettext("Unprotect"))):null}}]),o}();n.Unprotect=x;var P=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){s.hide(e.props)}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return e.acl.can_hide&&!e.is_hidden})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"visibility_off"),gettext("Hide"))):null}}]),o}();n.Hide=P;var j=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){s.unhide(e.props)}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return e.acl.can_unhide&&e.is_hidden})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"visibility"),gettext("Unhide"))):null}}]),o}();n.Unhide=j;var S=function(){h(o,l.default.Component);var a=y(o);function o(){var e;p(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){s.remove(e.props)}),e}return m(o,[{key:"render",value:function(){return this.props.selection.find(function(e){return e.acl.can_delete})?l.default.createElement("li",null,l.default.createElement("button",{type:"button",className:"btn btn-link",onClick:this.onClick},l.default.createElement("span",{className:"material-icon"},"clear"),gettext("Delete"))):null}}]),o}();n.Delete=S},{"../../../../services/modal":366,"./actions":214,"./move":218,"./split":219,react:"react"}],216:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.errors,n=e.posts;return a.default.createElement("div",{className:"modal-dialog",role:"document"},a.default.createElement("div",{className:"modal-content"},a.default.createElement("div",{className:"modal-header"},a.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},a.default.createElement("span",{"aria-hidden":"true"},"×")),a.default.createElement("h4",{className:"modal-title"},gettext("Moderation"))),a.default.createElement("div",{className:"modal-body"},a.default.createElement("p",{className:"lead"},gettext("One or more posts could not be changed:")),a.default.createElement("ul",{className:"list-unstyled list-errored-items"},t.map(function(e){return a.default.createElement(o,{errors:e.detail,key:e.id,post:n[e.id]})})))))},n.PostErrors=o;var r,a=(r=e("react"))&&r.__esModule?r:{default:r};function o(e){var t=e.errors,n=e.post,r=interpolate(gettext("%(username)s on %(posted_on)s"),{posted_on:n.posted_on.format("LL, LT"),username:n.poster_name},!0);return a.default.createElement("li",null,a.default.createElement("h5",null,r,":"),t.map(function(e,t){return a.default.createElement("p",{key:t},e)}))}},{react:"react"}],217:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){if(!e.user.id||!i(e.thread,e.posts.results))return null;var t=e.posts.results.filter(function(e){return e.isSelected});return r.default.createElement("div",{className:"dropup"},r.default.createElement("button",{"aria-expanded":"true","aria-haspopup":"true",className:"btn btn-default dropdown-toggle btn-block btn-outline","data-toggle":"dropdown",disabled:!t.length,type:"button"},gettext("Posts options")),r.default.createElement(a.default,l({selection:t},e)))},n.isVisible=i;var r=o(e("react")),a=o(e("./dropdown"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function i(e,t){if(e.acl.can_merge_posts&&1<t.length)return!0;var n=!1;return t.forEach(function(e){e.is_event||(e.acl.can_approve&&e.is_unapproved||e.acl.can_delete||!e.is_hidden&&e.acl.can_hide||e.acl.can_move||e.acl.can_merge||e.acl.can_protect||e.is_hidden&&e.acl.can_unhide||e.acl.can_unprotect)&&(n=!0)}),n}},{"./dropdown":215,react:"react"}],218:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ModalHeader=_,n.default=void 0;var r=o(e("react")),a=(o(e("../../../button")),o(e("../../../form"))),i=o(e("../../../form-group")),s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../../reducers/post")),u=o(e("../../../../services/ajax")),c=o(e("../../../../services/modal")),f=o(e("../../../../services/snackbar")),d=o(e("../../../../services/store"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function o(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==p(r)&&"function"!=typeof r?b(n):r}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(l,a.default);var e,t,n,o=y(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=b(t),a=function(e){t.changeValue("url",e.target.value)},(r="onUrlChange")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.state={isLoading:!1,url:"",validators:{url:[]},errors:{}},t}return e=l,(t=[{key:"clean",value:function(){return!!this.state.url.trim().length||(f.default.error(gettext("You have to enter link to the other thread.")),!1)}},{key:"send",value:function(){return u.default.post(this.props.thread.api.posts.move,{new_thread:this.state.url,posts:this.props.selection.map(function(e){return e.id})})}},{key:"handleSuccess",value:function(){this.props.selection.forEach(function(e){d.default.dispatch(s.patch(e,{isDeleted:!0}))}),c.default.hide(),f.default.success(gettext("Selected posts were moved to the other thread."))}},{key:"handleError",value:function(e){400===e.status?f.default.error(e.detail):f.default.apiError(e)}},{key:"render",value:function(){return r.default.createElement("div",{className:"modal-dialog",role:"document"},r.default.createElement("form",{onSubmit:this.handleSubmit},r.default.createElement("div",{className:"modal-content"},r.default.createElement(_,null),r.default.createElement("div",{className:"modal-body"},r.default.createElement(i.default,{for:"id_url",label:gettext("Link to thread you want to move posts to")},r.default.createElement("input",{className:"form-control",disabled:this.state.isLoading,id:"id_url",onChange:this.onUrlChange,value:this.state.url}))),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),r.default.createElement("button",{className:"btn btn-primary",loading:this.state.isLoading},gettext("Move posts"))))))}}])&&m(e.prototype,t),n&&m(e,n),l}();function _(e){return r.default.createElement("div",{className:"modal-header"},r.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},r.default.createElement("span",{"aria-hidden":"true"},"×")),r.default.createElement("h4",{className:"modal-title"},gettext("Move posts")))}n.default=g},{"../../../../reducers/post":347,"../../../../services/ajax":359,"../../../../services/modal":366,"../../../../services/snackbar":371,"../../../../services/store":372,"../../../button":10,"../../../form":50,"../../../form-group":49,react:"react"}],219:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement(N,S({},e,{Form:C}))},n.Loader=R,n.Error=M,n.Modal=T,n.ModerationForm=n.PostingConfig=void 0;var a=v(e("react")),r=v(e("../../../button")),i=v(e("../../../form")),s=v(e("../../../form-group")),u=v(e("../../../category-select")),o=v(e("../../../modal-loader")),c=v(e("../../../select")),f=b(e("../../../../reducers/post")),d=v(e("../../../../services/ajax")),p=v(e("../../../../services/modal")),m=v(e("../../../../services/snackbar")),h=v(e("../../../../services/store")),y=b(e("../../../../utils/validators"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function b(e){if(e&&e.__esModule)return e;if(null===e||"object"!==g(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((n=a?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o])}return r.default=e,t&&t.set(e,r),r}function v(e){return e&&e.__esModule?e:{default:e}}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=j(o);return t=l?(e=j(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==g(r)&&"function"!=typeof r?P(n):r}}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var N=function(){O(r,a.default.Component);var n=x(r);function r(e){var t;return _(this,r),(t=n.call(this,e)).state={isLoaded:!1,isError:!1,categories:[]},t}return w(r,[{key:"componentDidMount",value:function(){var n=this;d.default.get(misago.get("THREAD_EDITOR_API")).then(function(e){var t=e.map(function(e){return Object.assign(e,{disabled:!1===e.post,label:e.name,value:e.id,post:e.post})});n.setState({isLoaded:!0,categories:t})},function(e){n.setState({isError:e.detail})})}},{key:"render",value:function(){return this.state.isError?a.default.createElement(M,{message:this.state.isError}):this.state.isLoaded?a.default.createElement(C,S({},this.props,{categories:this.state.categories})):a.default.createElement(R,null)}}]),r}();n.PostingConfig=N;var C=function(){O(l,i.default);var o=x(l);function l(e){var r,t,n,a;return _(this,l),r=o.call(this,e),t=P(r),a=function(e){var t=e.target.value,n={category:t};r.acl[t].can_pin_threads<n.weight&&(n.weight=0),r.acl[t].can_hide_threads||(n.is_hidden=0),r.acl[t].can_close_threads||(n.is_closed=!1),r.setState(n)},(n="onCategoryChange")in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,r.state={isLoading:!1,title:"",category:null,categories:e.categories,weight:0,is_hidden:0,is_closed:!1,validators:{title:[y.required()]},errors:{}},r.isHiddenChoices=[{value:0,icon:"visibility",label:gettext("No")},{value:1,icon:"visibility_off",label:gettext("Yes")}],r.isClosedChoices=[{value:!1,icon:"lock_outline",label:gettext("No")},{value:!0,icon:"lock",label:gettext("Yes")}],r.acl={},r.props.categories.forEach(function(e){e.post&&(r.state.category||(r.state.category=e.id),r.acl[e.id]={can_pin_threads:e.post.pin,can_close_threads:e.post.close,can_hide_threads:e.post.hide})}),r}return w(l,[{key:"clean",value:function(){return!!this.isValid()||(m.default.error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return d.default.post(this.props.thread.api.posts.split,{title:this.state.title,category:this.state.category,weight:this.state.weight,is_hidden:this.state.is_hidden,is_closed:this.state.is_closed,posts:this.props.selection.map(function(e){return e.id})})}},{key:"handleSuccess",value:function(){this.props.selection.forEach(function(e){h.default.dispatch(f.patch(e,{isDeleted:!0}))}),p.default.hide(),m.default.success(gettext("Selected posts were split into new thread."))}},{key:"handleError",value:function(e){400===e.status?(this.setState({errors:Object.assign({},this.state.errors,e)}),m.default.error(gettext("Form contains errors."))):403===e.status&&Array.isArray(e)?p.default.show(a.default.createElement(ErrorsModal,{errors:e})):m.default.apiError(e)}},{key:"getWeightChoices",value:function(){var e=[{value:0,icon:"remove",label:gettext("Not pinned")},{value:1,icon:"bookmark_border",label:gettext("Pinned locally")}];return 2==this.acl[this.state.category].can_pin_threads&&e.push({value:2,icon:"bookmark",label:gettext("Pinned globally")}),e}},{key:"renderWeightField",value:function(){return this.acl[this.state.category].can_pin_threads?a.default.createElement(s.default,{label:gettext("Thread weight"),for:"id_weight",labelClass:"col-sm-4",controlClass:"col-sm-8"},a.default.createElement(c.default,{id:"id_weight",onChange:this.bindInput("weight"),value:this.state.weight,choices:this.getWeightChoices()})):null}},{key:"renderHiddenField",value:function(){return this.acl[this.state.category].can_hide_threads?a.default.createElement(s.default,{label:gettext("Hide thread"),for:"id_is_hidden",labelClass:"col-sm-4",controlClass:"col-sm-8"},a.default.createElement(c.default,{id:"id_is_closed",onChange:this.bindInput("is_hidden"),value:this.state.is_hidden,choices:this.isHiddenChoices})):null}},{key:"renderClosedField",value:function(){return this.acl[this.state.category].can_close_threads?a.default.createElement(s.default,{label:gettext("Close thread"),for:"id_is_closed",labelClass:"col-sm-4",controlClass:"col-sm-8"},a.default.createElement(c.default,{id:"id_is_closed",onChange:this.bindInput("is_closed"),value:this.state.is_closed,choices:this.isClosedChoices})):null}},{key:"render",value:function(){return a.default.createElement(T,{className:"modal-dialog"},a.default.createElement("form",{onSubmit:this.handleSubmit},a.default.createElement("div",{className:"modal-body"},a.default.createElement(s.default,{label:gettext("Thread title"),for:"id_title",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.title},a.default.createElement("input",{id:"id_title",className:"form-control",type:"text",onChange:this.bindInput("title"),value:this.state.title})),a.default.createElement("div",{className:"clearfix"}),a.default.createElement(s.default,{label:gettext("Category"),for:"id_category",labelClass:"col-sm-4",controlClass:"col-sm-8",validation:this.state.errors.category},a.default.createElement(u.default,{id:"id_category",onChange:this.onCategoryChange,value:this.state.category,choices:this.state.categories})),a.default.createElement("div",{className:"clearfix"}),this.renderWeightField(),this.renderHiddenField(),this.renderClosedField()),a.default.createElement("div",{className:"modal-footer"},a.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),a.default.createElement(r.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Split posts")))))}}]),l}();function R(){return a.default.createElement(T,{className:"modal-dialog"},a.default.createElement(o.default,null))}function M(e){return a.default.createElement(T,{className:"modal-dialog modal-message"},a.default.createElement("div",{className:"message-icon"},a.default.createElement("span",{className:"material-icon"},"info_outline")),a.default.createElement("div",{className:"message-body"},a.default.createElement("p",{className:"lead"},gettext("You can't move selected posts at the moment.")),a.default.createElement("p",null,e.message),a.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},gettext("Ok"))))}function T(e){return a.default.createElement("div",{className:e.className,role:"document"},a.default.createElement("div",{className:"modal-content"},a.default.createElement("div",{className:"modal-header"},a.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},a.default.createElement("span",{"aria-hidden":"true"},"×")),a.default.createElement("h4",{className:"modal-title"},gettext("Split posts into new thread"))),e.children))}n.ModerationForm=C},{"../../../../reducers/post":347,"../../../../services/ajax":359,"../../../../services/modal":366,"../../../../services/snackbar":371,"../../../../services/store":372,"../../../../utils/validators":387,"../../../button":10,"../../../category-select":23,"../../../form":50,"../../../form-group":49,"../../../modal-loader":55,"../../../select":204,react:"react"}],220:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=r(e("react")),i=r(e("./merge")),s=r(e("./move")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==h(e)&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../../reducers/thread")),c=r(e("../../../../services/ajax")),f=r(e("../../../../services/modal")),d=r(e("../../../../services/snackbar")),p=r(e("../../../../services/store"));function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==h(r)&&"function"!=typeof r?g(n):r}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(o,l.default.Component);var e,t,n,a=v(o);function o(){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return E(g(n=a.call.apply(a,[this].concat(t))),"callApi",function(e,t){p.default.dispatch(u.busy()),e.push({op:"add",path:"acl",value:!0}),c.default.patch(n.props.thread.api.index,e).then(function(e){p.default.dispatch(u.update(e)),p.default.dispatch(u.release()),d.default.success(t)},function(e){p.default.dispatch(u.release()),400===e.status?d.default.error(e.detail[0]):d.default.apiError(e)})}),E(g(n),"pinGlobally",function(){n.callApi([{op:"replace",path:"weight",value:2}],gettext("Thread has been pinned globally."))}),E(g(n),"pinLocally",function(){n.callApi([{op:"replace",path:"weight",value:1}],gettext("Thread has been pinned locally."))}),E(g(n),"unpin",function(){n.callApi([{op:"replace",path:"weight",value:0}],gettext("Thread has been unpinned."))}),E(g(n),"approve",function(){n.callApi([{op:"replace",path:"is-unapproved",value:!1}],gettext("Thread has been approved."))}),E(g(n),"open",function(){n.callApi([{op:"replace",path:"is-closed",value:!1}],gettext("Thread has been opened."))}),E(g(n),"close",function(){n.callApi([{op:"replace",path:"is-closed",value:!0}],gettext("Thread has been closed."))}),E(g(n),"unhide",function(){n.callApi([{op:"replace",path:"is-hidden",value:!1}],gettext("Thread has been made visible."))}),E(g(n),"hide",function(){n.callApi([{op:"replace",path:"is-hidden",value:!0}],gettext("Thread has been made hidden."))}),E(g(n),"move",function(){f.default.show(l.default.createElement(s.default,{posts:n.props.posts,thread:n.props.thread}))}),E(g(n),"merge",function(){f.default.show(l.default.createElement(i.default,{thread:n.props.thread}))}),E(g(n),"delete",function(){confirm(gettext("Are you sure you want to delete this thread?"))&&(p.default.dispatch(u.busy()),c.default.delete(n.props.thread.api.index).then(function(e){d.default.success(gettext("Thread has been deleted.")),window.location=n.props.thread.category.url.index},function(e){p.default.dispatch(u.release()),d.default.apiError(e)}))}),n}return e=o,(t=[{key:"getPinGloballyButton",value:function(){return 2!==this.props.thread.weight&&this.props.thread.acl.can_pin_globally?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.pinGlobally,type:"button"},l.default.createElement("span",{className:"material-icon"},"bookmark"),gettext("Pin globally"))):null}},{key:"getPinLocallyButton",value:function(){return 1!==this.props.thread.weight&&this.props.thread.acl.can_pin?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.pinLocally,type:"button"},l.default.createElement("span",{className:"material-icon"},"bookmark_border"),gettext("Pin locally"))):null}},{key:"getUnpinButton",value:function(){return 0!==this.props.thread.weight&&this.props.thread.acl.can_pin?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.unpin,type:"button"},l.default.createElement("span",{className:"material-icon"},"panorama_fish_eye"),gettext("Unpin"))):null}},{key:"getMoveButton",value:function(){return this.props.thread.acl.can_move?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.move,type:"button"},l.default.createElement("span",{className:"material-icon"},"arrow_forward"),gettext("Move"))):null}},{key:"getMergeButton",value:function(){return this.props.thread.acl.can_merge?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.merge,type:"button"},l.default.createElement("span",{className:"material-icon"},"call_merge"),gettext("Merge"))):null}},{key:"getApproveButton",value:function(){return this.props.thread.is_unapproved&&this.props.thread.acl.can_approve?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.approve,type:"button"},l.default.createElement("span",{className:"material-icon"},"done"),gettext("Approve"))):null}},{key:"getOpenButton",value:function(){return this.props.thread.is_closed&&this.props.thread.acl.can_close?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.open,type:"button"},l.default.createElement("span",{className:"material-icon"},"lock_open"),gettext("Open"))):null}},{key:"getCloseButton",value:function(){return!this.props.thread.is_closed&&this.props.thread.acl.can_close?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.close,type:"button"},l.default.createElement("span",{className:"material-icon"},"lock_outline"),gettext("Close"))):null}},{key:"getUnhideButton",value:function(){return this.props.thread.is_hidden&&this.props.thread.acl.can_unhide?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.unhide,type:"button"},l.default.createElement("span",{className:"material-icon"},"visibility"),gettext("Unhide"))):null}},{key:"getHideButton",value:function(){return!this.props.thread.is_hidden&&this.props.thread.acl.can_hide?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.hide,type:"button"},l.default.createElement("span",{className:"material-icon"},"visibility_off"),gettext("Hide"))):null}},{key:"getDeleteButton",value:function(){return this.props.thread.acl.can_delete?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.delete,type:"button"},l.default.createElement("span",{className:"material-icon"},"clear"),gettext("Delete"))):null}},{key:"render",value:function(){return l.default.createElement("ul",{className:"dropdown-menu dropdown-menu-right stick-to-bottom"},this.getPinGloballyButton(),this.getPinLocallyButton(),this.getUnpinButton(),this.getMoveButton(),this.getMergeButton(),this.getApproveButton(),this.getOpenButton(),this.getCloseButton(),this.getUnhideButton(),this.getHideButton(),this.getDeleteButton())}}])&&y(e.prototype,t),n&&y(e,n),o}();n.default=a},{"../../../../reducers/thread":354,"../../../../services/ajax":359,"../../../../services/modal":366,"../../../../services/snackbar":371,"../../../../services/store":372,"./merge":223,"./move":224,react:"react"}],221:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"ModerationControls",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"isModerationVisible",{enumerable:!0,get:function(){return a.default}});var r=o(e("./controls")),a=o(e("./is-visible"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./controls":220,"./is-visible":222}],222:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return!!(e.acl.can_approve&&e.is_unapproved||e.acl.can_close||e.acl.can_delete||e.acl.can_hide||e.acl.can_move||e.acl.can_merge||e.acl.can_pin||e.acl.can_pin_globally&&2!==e.weight||e.acl.can_unhide&&e.is_hidden)}},{}],223:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ModalHeader=w,n.default=void 0;var o=r(e("react")),l=r(e("../../../form")),i=r(e("../../../form-group")),s=r(e("../../../merge-conflict")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==h(e)&&"function"!=typeof e)return{default:e};var t=m();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../../reducers/thread")),c=r(e("../../../../services/ajax")),f=r(e("../../../../services/modal")),d=r(e("../../../../services/snackbar")),p=r(e("../../../../services/store"));function m(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return m=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==h(r)&&"function"!=typeof r?g(n):r}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,l.default);var e,t,n,r=v(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),E(g(t=r.call(this,e)),"handleSuccess",function(e){t.handleSuccessUnmounted(e),t.setState({isLoading:!0})}),E(g(t),"handleSuccessUnmounted",function(e){d.default.success(gettext("Thread has been merged with other one.")),window.location=e.url}),E(g(t),"handleError",function(e){p.default.dispatch(u.release()),400===e.status?e.best_answers||e.polls?f.default.show(o.default.createElement(s.default,{api:t.props.thread.api.merge,bestAnswers:e.best_answers,data:{other_thread:t.state.url},polls:e.polls,onError:t.handleError,onSuccess:t.handleSuccessUnmounted})):e.best_answer?d.default.error(e.best_answer[0]):e.poll?d.default.error(e.poll[0]):d.default.error(e.detail):d.default.apiError(e)}),E(g(t),"onUrlChange",function(e){t.changeValue("url",e.target.value)}),t.state={isLoading:!1,url:"",validators:{url:[]},errors:{}},t}return e=a,(t=[{key:"clean",value:function(){return!!this.state.url.trim().length||(d.default.error(gettext("You have to enter link to the other thread.")),!1)}},{key:"send",value:function(){return p.default.dispatch(u.busy()),c.default.post(this.props.thread.api.merge,{other_thread:this.state.url})}},{key:"render",value:function(){return o.default.createElement("div",{className:"modal-dialog",role:"document"},o.default.createElement("form",{onSubmit:this.handleSubmit},o.default.createElement("div",{className:"modal-content"},o.default.createElement(w,null),o.default.createElement("div",{className:"modal-body"},o.default.createElement(i.default,{for:"id_url",label:gettext("Link to thread you want to merge with"),help_text:gettext("Merge will delete current thread and move its contents to the thread specified here.")},o.default.createElement("input",{className:"form-control",disabled:this.state.isLoading||this.props.thread.isBusy,id:"id_url",onChange:this.onUrlChange,value:this.state.url}))),o.default.createElement("div",{className:"modal-footer"},o.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),o.default.createElement("button",{className:"btn btn-primary",loading:this.state.isLoading||this.props.thread.isBusy},gettext("Merge thread"))))))}}])&&y(e.prototype,t),n&&y(e,n),a}();function w(e){return o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Merge thread")))}n.default=a},{"../../../../reducers/thread":354,"../../../../services/ajax":359,"../../../../services/modal":366,"../../../../services/snackbar":371,"../../../../services/store":372,"../../../form":50,"../../../form-group":49,"../../../merge-conflict":53,react:"react"}],224:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ModalHeader=x,n.ModalLoading=P,n.ModalMessage=j,n.default=void 0;var r=b(e("react")),a=b(e("../../../form")),i=b(e("../../../form-group")),s=b(e("../../../category-select")),o=b(e("../../../modal-loader")),u=y(e("../../../../reducers/posts")),c=y(e("../../../../reducers/thread")),f=b(e("../../../..")),d=b(e("../../../../services/ajax")),p=b(e("../../../../services/modal")),m=b(e("../../../../services/snackbar")),h=b(e("../../../../services/store"));function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function y(e){if(e&&e.__esModule)return e;if(null===e||"object"!==v(e)&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((n=a?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o])}return r.default=e,t&&t.set(e,r),r}function b(e){return e&&e.__esModule?e:{default:e}}function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=O(o);return t=l?(e=O(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==v(r)&&"function"!=typeof r?w(n):r}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(l,a.default);var e,t,n,o=E(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=w(t),a=function(e){t.changeValue("category",e.target.value)},(r="onCategoryChange")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.state={isReady:!1,isLoading:!1,isError:!1,category:null,categories:[]},t}return e=l,(t=[{key:"componentDidMount",value:function(){var r=this;d.default.get(f.default.get("THREAD_EDITOR_API")).then(function(e){var t=null,n=e.map(function(e){return!1===e.post||t||(t=e.id),Object.assign(e,{disabled:!1===e.post,label:e.name,value:e.id})});r.setState({isReady:!0,category:t,categories:n})},function(e){r.setState({isError:e.detail})})}},{key:"send",value:function(){return h.default.dispatch(c.busy()),d.default.patch(this.props.thread.api.index,[{op:"replace",path:"category",value:this.state.category}])}},{key:"handleSuccess",value:function(){d.default.get(this.props.thread.api.posts.index,{page:this.props.posts.page}).then(function(e){h.default.dispatch(c.replace(e)),h.default.dispatch(u.load(e.post_set)),h.default.dispatch(c.release()),m.default.success(gettext("Thread has been moved.")),p.default.hide()},function(e){h.default.dispatch(c.release()),m.default.apiError(e)})}},{key:"handleError",value:function(e){400===e.status?m.default.error(e.detail[0]):m.default.apiError(e)}},{key:"render",value:function(){return this.state.isReady?r.default.createElement("div",{className:"modal-dialog",role:"document"},r.default.createElement("form",{onSubmit:this.handleSubmit},r.default.createElement("div",{className:"modal-content"},r.default.createElement(x,null),r.default.createElement("div",{className:"modal-body"},r.default.createElement(i.default,{for:"id_category",label:gettext("New category")},r.default.createElement(s.default,{choices:this.state.categories,disabled:this.state.isLoading||this.props.thread.isBusy,id:"id_category",onChange:this.onCategoryChange,value:this.state.category}))),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),r.default.createElement("button",{className:"btn btn-primary",loading:this.state.isLoading||this.props.thread.isBusy},gettext("Move thread")))))):this.state.isError?r.default.createElement(j,{message:this.state.isError}):r.default.createElement(P,null)}}])&&g(e.prototype,t),n&&g(e,n),l}();function x(e){return r.default.createElement("div",{className:"modal-header"},r.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},r.default.createElement("span",{"aria-hidden":"true"},"×")),r.default.createElement("h4",{className:"modal-title"},gettext("Move thread")))}function P(e){return r.default.createElement("div",{className:"modal-dialog",role:"document"},r.default.createElement("div",{className:"modal-content"},r.default.createElement(x,null),r.default.createElement(o.default,null)))}function j(e){return r.default.createElement("div",{className:"modal-dialog modal-message",role:"document"},r.default.createElement("div",{className:"modal-content"},r.default.createElement(x,null),r.default.createElement("div",{className:"message-icon"},r.default.createElement("span",{className:"material-icon"},"info_outline")),r.default.createElement("div",{className:"message-body"},r.default.createElement("p",{className:"lead"},gettext("You can't move this thread at the moment.")),r.default.createElement("p",null,e.message),r.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},gettext("Ok")))))}n.default=k},{"../../../..":296,"../../../../reducers/posts":348,"../../../../reducers/thread":354,"../../../../services/ajax":359,"../../../../services/modal":366,"../../../../services/snackbar":371,"../../../../services/store":372,"../../../category-select":23,"../../../form":50,"../../../form-group":49,"../../../modal-loader":55,react:"react"}],225:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement("nav",{className:"misago-pagination pull-left"},a.default.createElement(l,e),a.default.createElement(f,{more:e.posts.more}))},n.Pager=l,n.FirstPage=i,n.PreviousPage=s,n.NextPage=u,n.LastPage=c,n.More=f;var r,a=(r=e("react"))&&r.__esModule?r:{default:r},o=e("react-router");function l(e){return a.default.createElement("div",{className:"row row-paginator"},a.default.createElement("div",{className:"col-xs-3"},a.default.createElement(i,e)),a.default.createElement("div",{className:"col-xs-3"},a.default.createElement(s,e)),a.default.createElement("div",{className:"col-xs-3"},a.default.createElement(u,e)),a.default.createElement("div",{className:"col-xs-3"},a.default.createElement(c,e)))}function i(e){return e.posts.isLoaded&&e.posts.first?a.default.createElement(o.Link,{className:"btn btn-default btn-block btn-outline btn-icon",to:e.thread.url.index,title:gettext("Go to first page")},a.default.createElement("span",{className:"material-icon"},"first_page")):a.default.createElement("span",{className:"btn btn-default btn-block btn-outline btn-icon disabled",title:gettext("Go to first page")},a.default.createElement("span",{className:"material-icon"},"first_page"))}function s(e){if(e.posts.isLoaded&&1<e.posts.page){var t="";return e.posts.previous&&(t=e.posts.previous+"/"),a.default.createElement(o.Link,{className:"btn btn-default btn-block btn-outline btn-icon",to:e.thread.url.index+t,title:gettext("Go to previous page")},a.default.createElement("span",{className:"material-icon"},"chevron_left"))}return a.default.createElement("span",{className:"btn btn-default btn-block btn-outline btn-icon disabled",title:gettext("Go to previous page")},a.default.createElement("span",{className:"material-icon"},"chevron_left"))}function u(e){if(e.posts.isLoaded&&e.posts.more){var t="";return e.posts.next&&(t=e.posts.next+"/"),a.default.createElement(o.Link,{className:"btn btn-default btn-block btn-outline btn-icon",to:e.thread.url.index+t,title:gettext("Go to next page")},a.default.createElement("span",{className:"material-icon"},"chevron_right"))}return a.default.createElement("span",{className:"btn btn-default btn-block btn-outline btn-icon disabled",title:gettext("Go to next page")},a.default.createElement("span",{className:"material-icon"},"chevron_right"))}function c(e){return e.posts.isLoaded&&e.posts.last?a.default.createElement(o.Link,{className:"btn btn-default btn-block btn-outline btn-icon",to:e.thread.url.index+e.posts.last+"/",title:gettext("Go to last page")},a.default.createElement("span",{className:"material-icon"},"last_page")):a.default.createElement("span",{className:"btn btn-default btn-block btn-outline btn-icon disabled",title:gettext("Go to last page")},a.default.createElement("span",{className:"material-icon"},"last_page"))}function f(e){var t=null,t=e.more?(t=ngettext("There is %(more)s more post in this thread.","There are %(more)s more posts in this thread.",e.more),interpolate(t,{more:e.more},!0)):gettext("There are no more posts in this thread.");return a.default.createElement("p",null,t)}},{react:"react","react-router":"react-router"}],226:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return a.default.createElement("button",{className:e.className||"btn btn-primary btn-outline",onClick:e.onClick,type:"button"},a.default.createElement("span",{className:"material-icon"},"chat"),gettext("Reply"))};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],227:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.select=i,n.paths=function(){var e=o.default.get("THREAD"),t=e.url.index.replace(e.slug+"-"+e.pk,":slug");return[{path:t,component:(0,r.connect)(i)(a.default)},{path:t+":page/",component:(0,r.connect)(i)(a.default)}]};var r=e("react-redux"),a=l(e("./route")),o=l(e("../.."));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){return{participants:e.participants,poll:e.poll,posts:e.posts,thread:e.thread,tick:e.tick.tick,user:e.auth.user}}},{"../..":296,"./route":228,"react-redux":"react-redux"}],228:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("react")),l=o(e("../participants")),i=e("../poll"),s=o(e("../posts-list")),u=o(e("./header")),c=o(e("./toolbar-top")),f=o(e("./toolbar-bottom")),d=a(e("../../reducers/participants")),p=a(e("../../reducers/poll")),m=a(e("../../reducers/posts")),h=a(e("../../reducers/thread")),y=o(e("../../services/ajax")),b=o(e("../../services/polls")),v=o(e("../../services/snackbar")),g=o(e("../../services/posting")),_=o(e("../../services/store")),E=o(e("../../services/page-title"));function w(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return w=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!==O(e)&&"function"!=typeof e)return{default:e};var t=w();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((n=a?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o])}return r.default=e,t&&t.set(e,r),r}function o(e){return e&&e.__esModule?e:{default:e}}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=N(o);return t=l?(e=N(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==O(r)&&"function"!=typeof r?S(n):r}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(o,r.default.Component);var e,t,n,a=j(o);function o(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return C(S(t=a.call.apply(a,[this].concat(n))),"update",function(e){_.default.dispatch(h.replace(e)),_.default.dispatch(m.load(e.post_set)),e.participants&&_.default.dispatch(d.replace(e.participants)),e.poll&&_.default.dispatch(p.replace(e.poll)),t.setPageTitle()}),C(S(t),"openReplyForm",function(){g.default.open({mode:"REPLY",config:t.props.thread.api.editor,submit:t.props.thread.api.posts.index})}),t}return e=o,(t=[{key:"componentDidMount",value:function(){this.shouldFetchData()&&(this.fetchData(),this.setPageTitle()),this.startPollingApi()}},{key:"componentDidUpdate",value:function(){this.shouldFetchData()&&(this.fetchData(),this.startPollingApi(),this.setPageTitle())}},{key:"componentWillUnmount",value:function(){this.stopPollingApi()}},{key:"shouldFetchData",value:function(){return!!this.props.posts.isLoaded&&+(this.props.params.page||1)!=this.props.posts.page}},{key:"fetchData",value:function(){var t=this;_.default.dispatch(m.unload()),y.default.get(this.props.thread.api.posts.index,{page:this.props.params.page||1},"posts").then(function(e){t.update(e)},function(e){v.default.apiError(e)})}},{key:"startPollingApi",value:function(){b.default.start({poll:"thread-posts",url:this.props.thread.api.posts.index,data:{page:this.props.params.page||1},update:this.update,frequency:12e4,delayed:!0})}},{key:"stopPollingApi",value:function(){b.default.stop("thread-posts")}},{key:"setPageTitle",value:function(){E.default.set({title:this.props.thread.title,parent:this.props.thread.category.name,page:+(this.props.params.page||1)})}},{key:"render",value:function(){var e="page page-thread";return this.props.thread.category.css_class&&(e+=" page-thread-"+this.props.thread.category.css_class),r.default.createElement("div",{className:e},r.default.createElement("div",{className:"page-header-bg"},r.default.createElement(u.default,this.props)),r.default.createElement("div",{className:"container"},r.default.createElement(c.default,k({openReplyForm:this.openReplyForm},this.props)),r.default.createElement(i.Poll,{poll:this.props.poll,thread:this.props.thread,user:this.props.user}),r.default.createElement(l.default,{participants:this.props.participants,thread:this.props.thread,user:this.props.user}),r.default.createElement(s.default,this.props),r.default.createElement(f.default,k({openReplyForm:this.openReplyForm},this.props))))}}])&&x(e.prototype,t),n&&x(e,n),o}();n.default=R},{"../../reducers/participants":345,"../../reducers/poll":346,"../../reducers/posts":348,"../../reducers/thread":354,"../../services/ajax":359,"../../services/page-title":368,"../../services/polls":369,"../../services/posting":370,"../../services/snackbar":371,"../../services/store":372,"../participants":95,"../poll":100,"../posts-list":145,"./header":212,"./toolbar-bottom":230,"./toolbar-top":231,react:"react"}],229:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.user.id?r.default.createElement("div",{className:e.className},r.default.createElement("button",{"aria-expanded":"true","aria-haspopup":"true",className:"btn btn-default dropdown-toggle btn-block btn-outline","data-toggle":"dropdown",type:"button"},r.default.createElement("span",{className:"material-icon"},_(e.thread.subscription)),E(e.thread.subscription)),r.default.createElement(w,e)):null},n.getIcon=_,n.getLabel=E,n.Dropdown=w,n.update=P,n.Email=n.Enable=n.Disable=void 0;var r=u(e("react")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==c(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../reducers/thread")),o=u(e("../../services/ajax")),l=u(e("../../services/snackbar")),i=u(e("../../services/store"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==c(r)&&"function"!=typeof r?b(n):r}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){return!0===e?"star":!1===e?"star_half":"star_border"}function E(e){return!0===e?gettext("E-mail"):!1===e?gettext("Enabled"):gettext("Disabled")}function w(e){return r.default.createElement("ul",{className:e.dropdownClassName||"dropdown-menu stick-to-bottom"},r.default.createElement(O,e),r.default.createElement(k,e),r.default.createElement(x,e))}var O=function(){m(o,r.default.Component);var a=y(o);function o(){var e;f(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){null!==e.props.thread.subscription&&P(e.props.thread,null,"unsubscribe")}),e}return p(o,[{key:"render",value:function(){return r.default.createElement("li",null,r.default.createElement("button",{className:"btn btn-link",onClick:this.onClick},r.default.createElement("span",{className:"material-icon"},"star_border"),gettext("Unsubscribe")))}}]),o}();n.Disable=O;var k=function(){m(o,r.default.Component);var a=y(o);function o(){var e;f(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){!1!==e.props.thread.subscription&&P(e.props.thread,!1,"notify")}),e}return p(o,[{key:"render",value:function(){return r.default.createElement("li",null,r.default.createElement("button",{className:"btn btn-link",onClick:this.onClick},r.default.createElement("span",{className:"material-icon"},"star_half"),gettext("Subscribe")))}}]),o}();n.Enable=k;var x=function(){m(o,r.default.Component);var a=y(o);function o(){var e;f(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(b(e=a.call.apply(a,[this].concat(n))),"onClick",function(){!0!==e.props.thread.subscription&&P(e.props.thread,!0,"email")}),e}return p(o,[{key:"render",value:function(){return r.default.createElement("li",null,r.default.createElement("button",{className:"btn btn-link",onClick:this.onClick},r.default.createElement("span",{className:"material-icon"},"star"),gettext("Subscribe with e-mail")))}}]),o}();function P(e,t,n){var r={subscription:e.subscription};i.default.dispatch(a.update({subscription:t})),o.default.patch(e.api.index,[{op:"replace",path:"subscription",value:n}]).then(function(e){i.default.dispatch(a.update(e))},function(e){400===e.status?l.default.error(e.detail[0]):l.default.apiError(e),i.default.dispatch(a.update(r))})}n.Email=x},{"../../reducers/thread":354,"../../services/ajax":359,"../../services/snackbar":371,"../../services/store":372,react:"react"}],230:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.default.createElement("div",{className:"row row-toolbar"},r.default.createElement("div",{className:"col-xs-12 text-center visible-xs-block"},r.default.createElement(a.More,{more:e.posts.more}),r.default.createElement("div",{className:"toolbar-vertical-spacer"})),r.default.createElement("div",{className:"col-md-7"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-sm-4 col-md-5"},r.default.createElement(a.Pager,e)),r.default.createElement("div",{className:"col-sm-8 col-md-7 hidden-xs"},r.default.createElement(a.More,{more:e.posts.more})))),r.default.createElement(c,{visible:!!e.user.id},r.default.createElement("div",{className:"toolbar-vertical-spacer hidden-md hidden-lg"}),r.default.createElement("div",{className:"row"},r.default.createElement(m,e),r.default.createElement(f,e),r.default.createElement(d,e),r.default.createElement(p,{thread:e.thread,onClick:e.openReplyForm}))))},n.Options=c,n.Moderation=f,n.Subscription=d,n.Reply=p,n.Spacer=m;var r=s(e("react")),a=e("./paginator"),o=s(e("./moderation/posts")),l=s(e("./reply-button")),i=s(e("./subscription"));function s(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e){return e.visible?r.default.createElement("div",{className:"col-md-5"},e.children):null}function f(e){return e.user.id?r.default.createElement("div",{className:"col-sm-4 hidden-xs"},r.default.createElement(o.default,e)):null}function d(e){var t="col-xs-6";return e.thread.acl.can_reply||(t="col-xs-12"),r.default.createElement("div",{className:t+" col-sm-4"},r.default.createElement(i.default,u({btnClassName:"btn-block",className:"dropup"},e)))}function p(e){return e.thread.acl.can_reply?r.default.createElement("div",{className:"col-xs-6 col-sm-4"},r.default.createElement(l.default,{className:"btn btn-primary btn-block btn-outline",onClick:e.onClick})):null}function m(e){return e.thread.acl.can_reply?null:r.default.createElement("div",{className:"hidden-xs hidden-sm col-sm-4"})}},{"./moderation/posts":217,"./paginator":225,"./reply-button":226,"./subscription":229,react:"react"}],231:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=!e.thread.acl.can_start_poll||e.thread.poll;return r.default.createElement("div",{className:"row row-toolbar row-toolbar-bottom-margin"},r.default.createElement(v,e),r.default.createElement("div",{className:"col-xs-9 col-md-5 col-md-offset-2"},r.default.createElement("div",{className:"row"},r.default.createElement(R,{visible:!e.user.id}),r.default.createElement(R,{visible:t}),r.default.createElement(S,e),r.default.createElement(N,e),r.default.createElement(j,e))))},n.GotoMenu=v,n.GotoNew=g,n.GotoBestAnswer=_,n.GotoUnapproved=E,n.GotoLast=w,n.CompactOptions=O,n.GotoNewCompact=k,n.GotoUnapprovedCompact=x,n.GotoLastCompact=P,n.Reply=j,n.SubscriptionMenu=S,n.Spacer=R,n.StartPollCompact=n.StartPoll=void 0;var r=l(e("react")),a=l(e("./reply-button")),o=l(e("./subscription")),u=l(e("../../services/posting"));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?h(n):r}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e){var t="col-xs-3 col-sm-3 col-md-5";return e.user.is_anonymous&&(t="col-xs-12 col-sm-3 col-md-5"),r.default.createElement("div",{className:t},r.default.createElement("div",{className:"row hidden-xs hidden-sm"},r.default.createElement(w,{thread:e.thread}),r.default.createElement(g,{thread:e.thread}),r.default.createElement(_,{thread:e.thread}),r.default.createElement(E,{thread:e.thread})),r.default.createElement(O,e))}function g(e){return e.thread.is_new?r.default.createElement("div",{className:"col-sm-4"},r.default.createElement("a",{href:e.thread.url.new_post,className:"btn btn-default btn-block btn-outline",title:gettext("Go to first new post")},gettext("New"))):null}function _(e){return e.thread.best_answer?r.default.createElement("div",{className:"col-sm-4"},r.default.createElement("a",{href:e.thread.url.best_answer,className:"btn btn-default btn-block btn-outline",title:gettext("Go to best answer")},gettext("Best answer"))):null}function E(e){return e.thread.has_unapproved_posts&&e.thread.acl.can_approve?r.default.createElement("div",{className:"col-sm-4"},r.default.createElement("a",{href:e.thread.url.unapproved_post,className:"btn btn-default btn-block btn-outline",title:gettext("Go to first unapproved post")},gettext("Unapproved"))):null}function w(e){return r.default.createElement("div",{className:"col-sm-4"},r.default.createElement("a",{href:e.thread.url.last_post,className:"btn btn-default btn-block btn-outline",title:gettext("Go to last post")},gettext("Last")))}function O(e){return e.user.is_anonymous?r.default.createElement("div",{className:"visible-xs-block visible-sm-block"},r.default.createElement("a",{href:e.thread.url.last_post,className:"btn btn-default btn-block btn-outline"},gettext("Last post"))):r.default.createElement("div",{className:"dropdown visible-xs-block visible-sm-block"},r.default.createElement("button",{"aria-expanded":"true","aria-haspopup":"true",className:"btn btn-default dropdown-toggle btn-block btn-outline","data-toggle":"dropdown",type:"button"},r.default.createElement("span",{className:"material-icon"},"expand_more"),r.default.createElement("span",{className:"btn-text hidden-xs"},gettext("Options"))),r.default.createElement("ul",{className:"dropdown-menu"},r.default.createElement(C,e),r.default.createElement(k,e),r.default.createElement(x,e),r.default.createElement(P,e)))}function k(e){return e.thread.is_new?r.default.createElement("li",null,r.default.createElement("a",{href:e.thread.url.new_post,className:"btn btn-link"},gettext("Go to first new post"))):null}function x(e){return e.thread.has_unapproved_posts&&e.thread.acl.can_approve?r.default.createElement("li",null,r.default.createElement("a",{href:e.thread.url.unapproved_post,className:"btn btn-link"},gettext("Go to first unapproved post"))):null}function P(e){return r.default.createElement("li",null,r.default.createElement("a",{href:e.thread.url.last_post,className:"btn btn-link"},gettext("Go to last post")))}function j(e){return e.thread.acl.can_reply?r.default.createElement("div",{className:"col-sm-4 hidden-xs"},r.default.createElement(a.default,{className:"btn btn-primary btn-block btn-outline",onClick:e.openReplyForm})):null}function S(e){return e.user.id?r.default.createElement("div",{className:"col-xs-12 col-sm-4"},r.default.createElement(o.default,b({className:"dropdown",dropdownClassName:"dropdown-menu dropdown-menu-right stick-to-bottom"},e))):null}var N=function(){d(s,r.default.Component);var i=m(s);function s(){var e;c(this,s);for(var t,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=i.call.apply(i,[this].concat(o)),t=h(e),r=function(){u.default.open({mode:"POLL",submit:e.props.thread.api.poll,thread:e.props.thread,poll:null})},(n="onClick")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return f(s,[{key:"render",value:function(){return!this.props.thread.acl.can_start_poll||this.props.thread.poll?null:r.default.createElement("div",{className:"col-sm-4 hidden-xs"},r.default.createElement("button",{className:"btn btn-default btn-block btn-outline",onClick:this.onClick,type:"button"},r.default.createElement("span",{className:"material-icon"},"poll"),gettext("Add poll")))}}]),s}();n.StartPoll=N;var C=function(){d(t,N);var e=m(t);function t(){return c(this,t),e.apply(this,arguments)}return f(t,[{key:"render",value:function(){return!this.props.thread.acl.can_start_poll||this.props.thread.poll?null:r.default.createElement("li",null,r.default.createElement("button",{className:"btn btn-link",onClick:this.onClick,type:"button"},gettext("Add poll")))}}]),t}();function R(e){return e.visible?r.default.createElement("div",{className:"col-sm-4 hidden-xs"}):null}n.StartPollCompact=C},{"../../services/posting":370,"./reply-button":226,"./subscription":229,react:"react"}],232:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.isLoaded?0!==e.threads.length?r.default.createElement(o.default,{activeCategory:e.category,categories:e.categories,list:e.list,threads:e.threads,diffSize:e.diffSize,applyDiff:e.applyDiff,showOptions:e.showOptions,selection:e.selection,busyThreads:e.busyThreads}):r.default.createElement(a.default,{diffSize:e.diffSize,applyDiff:e.applyDiff},e.children):r.default.createElement(l.default,null)};var r=i(e("react")),a=i(e("./list/empty")),o=i(e("./list/ready")),l=i(e("./list/preview"));function i(e){return e&&e.__esModule?e:{default:e}}},{"./list/empty":234,"./list/preview":235,"./list/ready":236,react:"react"}],233:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.applyDiff,n=e.diffSize;return 0===n?null:a.default.createElement("li",{className:"list-group-item threads-diff-message"},a.default.createElement("button",{type:"button",className:"btn btn-block btn-default",onClick:t},a.default.createElement("span",{className:"material-icon"},"cached"),a.default.createElement("span",{className:"diff-message"},o(n))))},n.getMessage=o;var r,a=(r=e("react"))&&r.__esModule?r:{default:r};function o(e){var t=ngettext("There is %(threads)s new or updated thread. Click this message to show it.","There are %(threads)s new or updated threads. Click this message to show them.",e);return interpolate(t,{threads:e},!0)}},{react:"react"}],234:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("./diff-message"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getDiffMessage",value:function(){return 0===this.props.diffSize?null:o.default.createElement(l.default,{applyDiff:this.props.applyDiff,diffSize:this.props.diffSize})}},{key:"render",value:function(){return o.default.createElement("div",{className:"threads-list ui-ready"},o.default.createElement("ul",{className:"list-group"},this.getDiffMessage(),this.props.children))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"./diff-message":233,react:"react"}],235:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../thread/preview"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return o.default.createElement("div",{className:"threads-list ui-preview"},o.default.createElement("ul",{className:"list-group"},o.default.createElement(l.default,null)))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"../thread/preview":243,react:"react"}],236:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){return r.default.createElement("div",{className:"threads-list ui-ready"},r.default.createElement("ul",{className:"list-group"},r.default.createElement(a.default,{diffSize:t.diffSize,applyDiff:t.applyDiff}),t.threads.map(function(e){return r.default.createElement(o.default,{activeCategory:t.activeCategory,categories:t.categories,list:t.list,thread:e,showOptions:t.showOptions,isSelected:0<=t.selection.indexOf(e.id),isBusy:0<=t.busyThreads.indexOf(e.id),key:e.id})})))};var r=l(e("react")),a=l(e("./diff-message")),o=l(e("../thread/ready"));function l(e){return e&&e.__esModule?e:{default:e}}},{"../thread/ready":244,"./diff-message":233,react:"react"}],237:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.category,n=e.isBusy,r=e.showOptions,a=e.isSelected,o=e.thread,l="col-xs-12 col-sm-12";r&&(l=o.moderation.length?"col-xs-6 col-sm-12":"col-xs-9 col-sm-12");var i=0;o.is_hidden&&(i+=1);o.is_closed&&(i+=1);o.has_poll&&(i+=1);var s="detail-text hidden-xs";r&&3===i&&(s+=" hidden-sm");return u.default.createElement("div",{className:"row thread-details-bottom"},u.default.createElement("div",{className:l},u.default.createElement(c.default,{className:"item-title thread-detail-category hidden-xs",category:t}),u.default.createElement(d,{textClassName:s,display:o.is_hidden}),u.default.createElement(p,{textClassName:s,display:o.is_closed}),u.default.createElement(m,{textClassName:s,display:o.has_poll}),u.default.createElement(h,{thread:o}),u.default.createElement(y,{forceFullText:!r||i<2,replies:o.replies}),u.default.createElement(b,{datetime:o.last_post_on,url:o.url.last_post}),u.default.createElement(v,{posterName:o.last_poster_name,url:o.url.last_poster})),u.default.createElement(f.OptionsXs,{disabled:n,display:r,isSelected:a,thread:o}))},n.HiddenLabel=d,n.ClosedLabel=p,n.PollLabel=m,n.BestAnswerLabel=h,n.RepliesLabel=y,n.LastReplyLabel=b,n.LastPoster=v;var u=r(e("react")),c=r(e("./category")),f=e("../options");function r(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=e.display,n=e.textClassName;return t?u.default.createElement("span",{className:"thread-detail-hidden"},u.default.createElement("span",{className:"material-icon"},"visibility_off"),u.default.createElement("span",{className:n},gettext("Hidden"))):null}function p(e){var t=e.display,n=e.textClassName;return t?u.default.createElement("span",{className:"thread-detail-closed"},u.default.createElement("span",{className:"material-icon"},"lock_outline"),u.default.createElement("span",{className:n},gettext("Closed"))):null}function m(e){var t=e.display,n=e.textClassName;return t?u.default.createElement("span",{className:"thread-detail-poll"},u.default.createElement("span",{className:"material-icon"},"assessment"),u.default.createElement("span",{className:n},gettext("Poll"))):null}function h(e){var t=e.thread;return t.best_answer?u.default.createElement("a",{className:"visible-xs-inline-block thread-detail-answered",href:t.url.best_answer},u.default.createElement("span",{className:"material-icon"},"check_box")):null}function y(e){var t=e.replies,n=e.forceFullText,r=ngettext("%(replies)s reply","%(replies)s replies",t),a="",o="",o=n?(a="detail-text hide","detail-text"):(a="detail-text visible-xs-inline-block","detail-text hidden-xs");return u.default.createElement("span",{className:"thread-detail-replies"},u.default.createElement("span",{className:"material-icon"},"forum"),u.default.createElement("span",{className:a},t),u.default.createElement("span",{className:o},interpolate(r,{replies:t},!0)))}function b(e){var t=e.datetime,n=e.url;return u.default.createElement("a",{className:"visible-sm-inline-block thread-detail-last-reply",href:n,title:t.format("LLL")},t.fromNow(!0))}function v(e){var t=e.posterName,n=e.url,r="visible-sm-inline-block item-title thread-last-poster";return n?u.default.createElement("a",{className:r,href:n},t):u.default.createElement("span",{className:r},t)}},{"../options":242,"./category":238,react:"react"}],238:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.category,n=e.className;if(!t)return null;t.css_class&&(n+=" thread-detail-category-"+t.css_class);return a.default.createElement("a",{className:n,href:t.url.index},t.name)};var r,a=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],239:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"BottomDetails",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(n,"TopDetails",{enumerable:!0,get:function(){return a.default}});var r=o(e("./bottom")),a=o(e("./top"));function o(e){return e&&e.__esModule?e:{default:e}}},{"./bottom":237,"./top":240}],240:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.category,n=e.thread;return l.default.createElement("div",{className:"thread-details-top"},l.default.createElement(o,{isRead:n.is_read,url:n.url.new_post}),l.default.createElement(i,{weight:n.weight}),l.default.createElement(s,{thread:n.is_unapproved,posts:n.has_unapproved_posts}),l.default.createElement(u,{thread:n}),l.default.createElement(r.default,{className:"item-title thread-detail-category visible-xs-inline-block",category:t}),l.default.createElement(c,{datetime:n.last_post_on,url:n.url.last_post}),l.default.createElement(f,{posterName:n.last_poster_name,url:n.url.last_poster}))},n.NewLabel=o,n.PinnedLabel=i,n.UnapprovedLabel=s,n.BestAnswerLabel=u,n.LastReplyLabel=c,n.LastPoster=f;var l=a(e("react")),r=a(e("./category"));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.isRead,n=e.url;return t?null:l.default.createElement("a",{className:"thread-detail-new",href:n},l.default.createElement("span",{className:"material-icon"},"comment"),l.default.createElement("span",{className:"detail-text"},gettext("New posts")))}function i(e){var t=e.weight;if(0===t)return null;var n="thread-detail-pinned-globally",r="bookmark",a=gettext("Pinned globally");return 1===t&&(n="thread-detail-pinned-locally",r="bookmark_border",a=gettext("Pinned locally")),l.default.createElement("span",{className:n},l.default.createElement("span",{className:"material-icon"},r),l.default.createElement("span",{className:"detail-text"},a))}function s(e){var t=e.posts,n=e.thread;if(!t&&!n)return null;var r="thread-detail-unapproved-posts",a="remove_circle_outline",o=gettext("Unapproved posts");return n&&(r="thread-detail-unapproved",a="remove_circle",o=gettext("Unapproved")),l.default.createElement("span",{className:r},l.default.createElement("span",{className:"material-icon"},a),l.default.createElement("span",{className:"detail-text"},o))}function u(e){var t=e.thread;return t.best_answer?l.default.createElement("a",{className:"hidden-xs thread-detail-answered",href:t.url.best_answer},l.default.createElement("span",{className:"material-icon"},"check_box"),l.default.createElement("span",{className:"detail-text"},gettext("Answered"))):null}function c(e){var t=e.datetime,n=e.url;return l.default.createElement("a",{className:"visible-xs-inline-block thread-detail-last-reply",href:n,title:t.format("LLL")},t.fromNow(!0))}function f(e){var t=e.posterName,n=e.url;return n?l.default.createElement("a",{className:"visible-xs-inline-block item-title thread-last-poster",href:n},t):l.default.createElement("span",{className:"visible-xs-inline-block item-title thread-last-poster"},t)}},{"./category":238,react:"react"}],241:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.thread;return r.default.createElement("div",{className:"media"},r.default.createElement("div",{className:"media-left"},r.default.createElement(o.default,{className:"thread-last-poster-avatar",title:t.last_poster_name,url:t.url.last_poster},r.default.createElement(a.default,{className:"media-object",size:40,user:t.last_poster}))),r.default.createElement("div",{className:"media-body"},r.default.createElement(o.default,{className:"item-title thread-last-poster",url:t.url.last_poster},t.last_poster_name),r.default.createElement(i,{datetime:t.last_post_on,url:t.url.last_post})))},n.Timestamp=i;var r=l(e("react")),a=l(e("../../avatar")),o=l(e("./user-url"));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.datetime,n=e.url;return r.default.createElement("a",{className:"thread-last-reply",href:n,title:t.format("LLL")},t.fromNow(!0))}},{"../../avatar":8,"./user-url":249,react:"react"}],242:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Options=function(e){var t=e.display,n=e.disabled,r=e.isSelected,a=e.thread;if(!t)return null;var o="col-sm-2 col-md-2 hidden-xs";a.moderation.length&&(o="col-sm-3 col-md-2 hidden-xs");return l.default.createElement("div",{className:o},l.default.createElement("div",{className:"row thread-options"},l.default.createElement(s.default,{thread:a,disabled:n}),l.default.createElement(i.default,{thread:a,disabled:n}),l.default.createElement(y,{thread:a,disabled:n,isSelected:r})))},n.OptionsXs=function(e){var t=e.display,n=e.disabled,r=e.isSelected,a=e.thread;if(!t)return null;var o="";a.moderation.length?o+="col-xs-6":o+="col-xs-3";return o+=" visible-xs-block thread-options-xs",l.default.createElement("div",{className:o},l.default.createElement("div",{className:"row thread-options"},l.default.createElement(s.default,{thread:a,disabled:n}),l.default.createElement(i.default,{thread:a,disabled:n}),l.default.createElement(y,{thread:a,disabled:n,isSelected:r})))},n.Checkbox=void 0;var l=r(e("react")),i=r(e("./subscription/compact")),s=r(e("./subscription/full")),u=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../reducers/selection")),c=r(e("../../../services/store"));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==d(r)&&"function"!=typeof r?m(n):r}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(s,l.default.Component);var e,t,n,i=p(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=i.call.apply(i,[this].concat(o)),t=m(e),r=function(){c.default.dispatch(u.item(e.props.thread.id))},(n="toggleSelection")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return e=s,(t=[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.isSelected;return e.thread.moderation.length?l.default.createElement("div",{className:"col-xs-6"},l.default.createElement("button",{className:"btn btn-default btn-icon btn-block",onClick:this.toggleSelection,disabled:t},l.default.createElement("span",{className:"material-icon"},n?"check_box":"check_box_outline_blank"))):null}}])&&a(e.prototype,t),n&&a(e,n),s}();n.Checkbox=y},{"../../../reducers/selection":352,"../../../services/store":372,"./subscription/compact":245,"./subscription/full":246,react:"react"}],243:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("react"))&&r.__esModule?r:{default:r},l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==s(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../utils/random"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=d(o);return t=l?(e=d(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==s(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,o.default.Component);var e,t,n,r=f(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return o.default.createElement("li",{className:"list-group-item thread-preview"},o.default.createElement("div",{className:"thread-details-top visible-xs-block"},o.default.createElement("span",{className:"ui-preview-text",style:{width:l.int(30,80)+"px"}}," "),o.default.createElement("span",{className:"ui-preview-text",style:{width:l.int(30,80)+"px"}}," "),o.default.createElement("span",{className:"ui-preview-text",style:{width:l.int(30,80)+"px"}}," ")),o.default.createElement("span",{className:"item-title thread-title"},o.default.createElement("span",{className:"ui-preview-text",style:{width:l.int(60,200)+"px"}}," "),o.default.createElement("span",{className:"ui-preview-text hidden-xs",style:{width:l.int(60,200)+"px"}}," "),o.default.createElement("span",{className:"ui-preview-text hidden-xs",style:{width:l.int(60,200)+"px"}}," ")),o.default.createElement("div",{className:"thread-details-bottom"},o.default.createElement("div",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:l.int(30,80)+"px"}}," "),o.default.createElement("span",{className:"ui-preview-text",style:{width:l.int(30,80)+"px"}}," "),o.default.createElement("span",{className:"ui-preview-text",style:{width:l.int(30,80)+"px"}}," "))))}}])&&u(e.prototype,t),n&&u(e,n),a}();n.default=a},{"../../../utils/random":382,react:"react"}],244:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.activeCategory,n=e.categories,r=(e.list,e.thread),a=e.isBusy,o=e.isSelected,l=e.showOptions,i=null;t.id!==r.category&&(i=n[r.category]);var s=i||t,u="thread-main col-xs-12";l?r.moderation.length?u+=" col-sm-9 col-md-7":u+=" col-sm-10 col-md-7":u+=" col-sm-12 col-md-9";return c.default.createElement("li",{className:y(r.is_read,a,o,s)},c.default.createElement(d.TopDetails,{category:i,thread:r}),c.default.createElement("div",{className:"row thread-row"},c.default.createElement("div",{className:u},c.default.createElement("div",{className:"media"},c.default.createElement("div",{className:"media-left hidden-xs"},c.default.createElement(h.default,{className:"thread-starter-avatar",title:r.starter_name,url:r.url.starter},c.default.createElement(f.default,{size:40,user:r.starter}))),c.default.createElement("div",{className:"media-body"},c.default.createElement("a",{href:r.url.index,className:"item-title thread-title"},r.title),c.default.createElement(d.BottomDetails,{category:i,disabled:a,isSelected:o,showOptions:l,thread:r})))),c.default.createElement("div",{className:"col-md-3 hidden-xs hidden-sm thread-last-action"},c.default.createElement(p.default,{thread:r})),c.default.createElement(m.Options,{disabled:a,display:l,isSelected:o,thread:r})))},n.getClassName=y;var c=r(e("react")),f=r(e("../../avatar")),d=e("./details"),p=r(e("./last-action")),m=e("./options"),h=r(e("./user-url"));function r(e){return e&&e.__esModule?e:{default:e}}function y(e,t,n,r){var a=["list-group-item"];return r&&r.css_class&&(a.push("list-group-category-has-flavor"),a.push("list-group-item-category-"+r.css_class)),e?a.push("thread-read"):a.push("thread-new"),t?a.push("thread-busy"):n&&a.push("thread-selected"),a.join(" ")}},{"../../avatar":8,"./details":239,"./last-action":241,"./options":242,"./user-url":249,react:"react"}],245:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=a(e("react")),r=a(e("./full")),c=a(e("./modal")),f=a(e("../../../../services/modal"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=s(o);return t=l?(e=s(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?p(n):r}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,r.default);var e,t,n,i=d(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=i.call.apply(i,[this].concat(o)),t=p(e),r=function(){f.default.show(u.default.createElement(c.default,{thread:e.props.thread}))},(n="showOptions")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return e=s,(t=[{key:"render",value:function(){var e="";return this.props.thread.moderation.length?e+="col-xs-6":e+="col-xs-12",e+=" hidden-md hidden-lg",u.default.createElement("div",{className:e},u.default.createElement("button",{type:"button",className:this.getClassName(),disabled:this.props.disabled,onClick:this.showOptions},u.default.createElement("span",{className:"material-icon"},this.getIcon())))}}])&&o(e.prototype,t),n&&o(e,n),s}();n.default=m},{"../../../../services/modal":366,"./full":246,"./modal":247,react:"react"}],246:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Label=d,n.default=void 0;var o=r(e("react")),l=r(e("./options"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getIcon",value:function(){return!0===this.props.thread.subscription?"star":!1===this.props.thread.subscription?"star_half":"star_border"}},{key:"getClassName",value:function(){return!0===this.props.thread.subscription?"btn btn-default btn-icon btn-block btn-subscribe btn-subscribe-full dropdown-toggle":!1===this.props.thread.subscription?"btn btn-default btn-icon btn-block btn-subscribe btn-subscribe-half dropdown-toggle":"btn btn-default btn-icon btn-block btn-subscribe dropdown-toggle"}},{key:"render",value:function(){var e=this.props.thread,t=e.moderation,n=e.subscription,r=!t.length?"col-xs-12":"col-xs-6";return r+=" hidden-xs hidden-sm",o.default.createElement("div",{className:r},o.default.createElement("div",{className:"btn-group btn-group-justified"},o.default.createElement("div",{className:"btn-group"},o.default.createElement("button",{type:"button",className:this.getClassName(),disabled:this.props.disabled,"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.default.createElement("span",{className:"material-icon"},this.getIcon()),o.default.createElement(d,{moderation:t,subscription:n})),o.default.createElement(l.default,{className:"dropdown-menu dropdown-menu-right",thread:this.props.thread}))))}}])&&s(e.prototype,t),n&&s(e,n),a}();function d(e){var t=e.moderation,n=e.subscription;if(t.length)return null;var r=gettext("Disabled");return!0===n?r=gettext("E-mail"):!1===n&&(r=gettext("Enabled")),o.default.createElement("span",{className:"btn-text"},r)}n.default=a},{"./options":248,react:"react"}],247:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("./options"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",{className:"modal-dialog modal-sm",role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Change subscription"))),o.default.createElement(l.default,{className:"modal-menu",thread:this.props.thread})))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"./options":248,react:"react"}],248:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=(r(e("../../../button")),e("../../../../reducers/threads")),i=r(e("../../../../services/ajax")),s=r(e("../../../../services/modal")),u=r(e("../../../../services/snackbar")),c=r(e("../../../../services/store"));function r(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?h(n):r}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v={unsubscribe:null,notify:!1,email:!0},a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,o.default.Component);var e,t,n,r=m(a);function a(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),b(h(n=r.call(this,e)),"setSubscription",function(e){s.default.hide(),n.setState({isLoading:!0});var t=n.props.thread.subscription;c.default.dispatch((0,l.patch)(n.props.thread,{subscription:v[e]})),i.default.patch(n.props.thread.api.index,[{op:"replace",path:"subscription",value:e}]).then(function(){n.setState({isLoading:!1})},function(e){n.setState({isLoading:!1}),c.default.dispatch((0,l.patch)(n.props.thread,{subscription:v[t]})),u.default.apiError(e)})}),b(h(n),"unsubscribe",function(){n.setSubscription("unsubscribe")}),b(h(n),"notify",function(){n.setSubscription("notify")}),b(h(n),"email",function(){n.setSubscription("email")}),n.state={isLoading:!1},n}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("ul",{className:this.props.className},o.default.createElement("li",null,o.default.createElement("button",{className:"btn-link",onClick:this.unsubscribe},o.default.createElement("span",{className:"material-icon"},"star_border"),gettext("Unsubscribe"))),o.default.createElement("li",null,o.default.createElement("button",{className:"btn-link",onClick:this.notify},o.default.createElement("span",{className:"material-icon"},"star_half"),gettext("Subscribe"))),o.default.createElement("li",null,o.default.createElement("button",{className:"btn-link",onClick:this.email},o.default.createElement("span",{className:"material-icon"},"star"),gettext("Subscribe with e-mail"))))}}])&&d(e.prototype,t),n&&d(e,n),a}();n.default=a},{"../../../../reducers/threads":355,"../../../../services/ajax":359,"../../../../services/modal":366,"../../../../services/snackbar":371,"../../../../services/store":372,"../../../button":10,react:"react"}],249:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.children,n=e.className,r=e.title,a=e.url;if(a)return o.default.createElement("a",{className:n,href:a,title:r},t);return o.default.createElement("span",{className:n,title:r},t)};var r,o=(r=e("react"))&&r.__esModule?r:{default:r}},{react:"react"}],250:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Subcategory=void 0;var r,a=(r=e("react"))&&r.__esModule?r:{default:r},o=e("react-router");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(){c(t,a.default.Component);var e=d(t);function t(){return l(this,t),e.apply(this,arguments)}return u(t,[{key:"getUrl",value:function(){return this.props.listPath?this.props.category.url.index+this.props.listPath:this.props.category.url.index}},{key:"render",value:function(){return a.default.createElement("li",null,a.default.createElement(o.Link,{to:this.getUrl(),className:"btn btn-link"},this.props.category.name))}}]),t}();n.Subcategory=m;var h=function(){c(t,a.default.Component);var e=d(t);function t(){return l(this,t),e.apply(this,arguments)}return u(t,[{key:"render",value:function(){var t=this;return a.default.createElement("div",{className:"dropdown category-picker"},a.default.createElement("button",{type:"button",className:"btn btn-default btn-outline dropdown-toggle btn-block","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},a.default.createElement("span",{className:"material-icon"},"label_outline"),a.default.createElement("span",{className:"hidden-xs"},gettext("Category"))),a.default.createElement("ul",{className:"dropdown-menu stick-to-bottom categories-menu"},this.props.choices.map(function(e){return t.props.categories[e]?a.default.createElement(m,{category:t.props.categories[e],listPath:t.props.list.path,key:e}):null})))}}]),t}();n.default=h},{react:"react","react-router":"react-router"}],251:[function(e,t,n){"use strict";function r(e,t){return e.last_post>t.last_post?-1:e.last_post<t.last_post?1:0}Object.defineProperty(n,"__esModule",{value:!0}),n.compareLastPostAge=r,n.compareGlobalWeight=function(e,t){return 2===e.weight&&e.weight>t.weight?-1:2===t.weight&&e.weight<t.weight?1:r(e,t)},n.compareWeight=function(e,t){return e.weight>t.weight?-1:e.weight<t.weight?1:r(e,t)}},{}],252:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../page-lead")),i=r(e("./toolbar"));function r(e){return e&&e.__esModule?e:{default:e}}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=d(o);return t=l?(e=d(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==s(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(a,o.default.Component);var e,t,n,r=f(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getCategoryDescription",value:function(){return this.props.pageLead?o.default.createElement("div",{className:"category-description"},o.default.createElement("div",{className:"page-lead"},o.default.createElement("p",null,this.props.pageLead))):this.props.route.category.description?o.default.createElement("div",{className:"category-description"},o.default.createElement(l.default,{copy:this.props.route.category.description.html})):null}},{key:"getDisableToolbar",value:function(){return!this.props.isLoaded||this.props.isBusy||this.props.busyThreads.length}},{key:"getToolbar",value:function(){return this.props.subcategories.length||this.props.user.id?o.default.createElement(i.default,{subcategories:this.props.subcategories,categories:this.props.route.categories,categoriesMap:this.props.route.categoriesMap,list:this.props.route.list,threads:this.props.threads,moderation:this.props.moderation,selection:this.props.selection,selectAllThreads:this.props.selectAllThreads,selectNoneThreads:this.props.selectNoneThreads,addThreads:this.props.addThreads,freezeThread:this.props.freezeThread,deleteThread:this.props.deleteThread,updateThread:this.props.updateThread,api:this.props.api,route:this.props.route,disabled:this.getDisableToolbar(),user:this.props.user}):null}},{key:"render",value:function(){return o.default.createElement("div",{className:"container"},this.getCategoryDescription(),this.getToolbar(),this.props.children)}}])&&u(e.prototype,t),n&&u(e,n),a}();n.default=a},{"../page-lead":86,"./toolbar":263,react:"react"}],253:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ParentCategory=b,n.default=void 0;var a=o(e("react")),i=e("react-router"),r=o(e("../button")),s=(o(e("../dropdown-toggle")),o(e("./nav"))),u=(o(e("../../services/ajax")),o(e("../../services/posting"))),c=(o(e("../../services/snackbar")),o(e("../../services/store")),o(e("../..")));function o(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?h(n):r}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,a.default.Component);var e,t,n,o=m(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=h(t),a=function(){u.default.open(t.props.startThread||{mode:"START",config:c.default.get("THREAD_EDITOR_API"),submit:c.default.get("THREADS_API"),category:t.props.route.category.id})},(r="startThread")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.state={isBusy:!1},t}return e=l,(t=[{key:"hasGoBackButton",value:function(){return!!this.props.route.category.parent}},{key:"getGoBackButton",value:function(){if(!this.props.route.category.parent)return null;var e=this.props.categories[this.props.route.category.parent];return a.default.createElement("div",{className:"hidden-xs col-sm-2 col-lg-1"},a.default.createElement(i.Link,{className:"btn btn-default btn-icon btn-aligned btn-go-back btn-block btn-outline",to:e.url.index+this.props.route.list.path},a.default.createElement("span",{className:"material-icon"},"keyboard_arrow_left")))}},{key:"getStartThreadButton",value:function(){return this.props.user.id?a.default.createElement(r.default,{className:"btn-primary btn-block btn-outline",onClick:this.startThread,disabled:this.props.disabled},a.default.createElement("span",{className:"material-icon"},"chat"),gettext("Start thread")):null}},{key:"render",value:function(){var e="col-xs-12";this.hasGoBackButton()&&(e+=" col-sm-10 col-lg-11 sm-align-row-buttons");var t=!!this.props.user.id;return a.default.createElement("div",{className:"page-header-bg"},a.default.createElement("div",{className:"page-header"},a.default.createElement("div",{className:"container"},a.default.createElement("div",{className:"row"},a.default.createElement("div",{className:t?"col-sm-9 col-md-10":"col-xs-12"},a.default.createElement("div",{className:"row"},this.getGoBackButton(),a.default.createElement("div",{className:e},a.default.createElement(b,{categories:this.props.categories,category:this.props.route.category.parent}),a.default.createElement("h1",null,this.props.title)))),t&&a.default.createElement("div",{className:"col-sm-3 col-md-2 xs-margin-top"},this.getStartThreadButton()))),a.default.createElement(s.default,{baseUrl:this.props.route.category.url.index,list:this.props.route.list,lists:this.props.route.lists})))}}])&&d(e.prototype,t),n&&d(e,n),l}();function b(e){var t=e.categories,n=e.category;if(!n)return null;var r=t[n];return a.default.createElement(i.Link,{className:"go-back-sm visible-xs-block",to:r.url.index},a.default.createElement("span",{className:"material-icon"},"chevron_left"),r.parent?r.name:gettext("Threads"))}n.default=l},{"../..":296,"../../services/ajax":359,"../../services/posting":370,"../../services/snackbar":371,"../../services/store":372,"../button":10,"../dropdown-toggle":29,"./nav":260,react:"react","react-router":"react-router"}],254:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,n,r=u(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return"all"===this.props.list.type?this.props.emptyMessage?o.default.createElement("li",{className:"list-group-item empty-message"},o.default.createElement("p",{className:"lead"},this.props.emptyMessage),o.default.createElement("p",null,gettext("Why not start one yourself?"))):o.default.createElement("li",{className:"list-group-item empty-message"},o.default.createElement("p",{className:"lead"},this.props.category.special_role?gettext("There are no threads on this forum... yet!"):gettext("There are no threads in this category.")),o.default.createElement("p",null,gettext("Why not start one yourself?"))):o.default.createElement("li",{className:"list-group-item empty-message"},gettext("No threads matching specified criteria were found."))}}])&&l(e.prototype,t),n&&l(e,n),a}();n.default=a},{react:"react"}],255:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=r(e("react")),i=r(e("./errors-list")),s=r(e("./merge")),u=r(e("./move")),c=(function(e){if(e&&e.__esModule)return;if(null===e||"object"!==m(e)&&"function"!=typeof e)return;var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n)}(e("../../../reducers/selection")),r(e("../../../services/ajax"))),f=r(e("../../../services/modal")),d=r(e("../../../services/snackbar"));r(e("../../../services/store")),r(e("../../../utils/countdown"));function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==m(r)&&"function"!=typeof r?b(n):r}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,l.default.Component);var e,t,n,r=y(a);function a(){var o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g(b(o=r.call.apply(r,[this].concat(t))),"callApi",function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;o.props.threads.forEach(function(e){o.props.freezeThread(e.id)});var r=o.props.threads.map(function(e){return e.id});e.push({op:"add",path:"acl",value:!0}),c.default.patch(o.props.api,{ids:r,ops:e}).then(function(e){o.props.threads.forEach(function(e){o.props.freezeThread(e.id)}),e.forEach(function(e){o.props.updateThread(e)}),d.default.success(t),n&&n()},function(e){if(o.props.threads.forEach(function(e){o.props.freezeThread(e.id)}),400!==e.status)return d.default.apiError(e);var r=[],a={};o.props.threads.forEach(function(e){a[e.id]=e}),e.forEach(function(e){var t=e.id,n=e.detail;void 0!==a[t]&&r.push({errors:n,thread:a[t]})}),f.default.show(l.default.createElement(i.default,{errors:r}))})}),g(b(o),"pinGlobally",function(){o.callApi([{op:"replace",path:"weight",value:2}],gettext("Selected threads were pinned globally."))}),g(b(o),"pinLocally",function(){o.callApi([{op:"replace",path:"weight",value:1}],gettext("Selected threads were pinned locally."))}),g(b(o),"unpin",function(){o.callApi([{op:"replace",path:"weight",value:0}],gettext("Selected threads were unpinned."))}),g(b(o),"approve",function(){o.callApi([{op:"replace",path:"is-unapproved",value:!1}],gettext("Selected threads were approved."))}),g(b(o),"open",function(){o.callApi([{op:"replace",path:"is-closed",value:!1}],gettext("Selected threads were opened."))}),g(b(o),"close",function(){o.callApi([{op:"replace",path:"is-closed",value:!0}],gettext("Selected threads were closed."))}),g(b(o),"unhide",function(){o.callApi([{op:"replace",path:"is-hidden",value:!1}],gettext("Selected threads were unhidden."))}),g(b(o),"hide",function(){o.callApi([{op:"replace",path:"is-hidden",value:!0}],gettext("Selected threads were hidden."))}),g(b(o),"move",function(){f.default.show(l.default.createElement(u.default,{callApi:o.callApi,categories:o.props.categories,categoriesMap:o.props.categoriesMap,route:o.props.route,user:o.props.user}))}),g(b(o),"merge",function(){var t=[];if(o.props.threads.forEach(function(e){e.acl.can_merge||t.append({id:e.id,title:e.title,errors:[gettext("You don't have permission to merge this thread with others.")]})}),o.props.threads.length<2)d.default.info(gettext("You have to select at least two threads to merge."));else{if(t.length)return void f.default.show(l.default.createElement(i.default,{errors:t}));f.default.show(l.default.createElement(s.default,o.props))}}),g(b(o),"delete",function(){var e;confirm(gettext("Are you sure you want to delete selected threads?"))&&(o.props.threads.map(function(e){o.props.freezeThread(e.id)}),e=o.props.threads.map(function(e){return e.id}),c.default.delete(o.props.api,e).then(function(){o.props.threads.map(function(e){o.props.freezeThread(e.id),o.props.deleteThread(e)}),d.default.success(gettext("Selected threads were deleted."))},function(e){var t;400===e.status?(t=e.map(function(e){return e.id}),o.props.threads.map(function(e){o.props.freezeThread(e.id),-1===t.indexOf(e.id)&&o.props.deleteThread(e)}),f.default.show(l.default.createElement(i.default,{errors:e}))):d.default.apiError(e)}))}),o}return e=a,(t=[{key:"getPinGloballyButton",value:function(){return this.props.moderation.can_pin_globally?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.pinGlobally,type:"button"},l.default.createElement("span",{className:"material-icon"},"bookmark"),gettext("Pin threads globally"))):null}},{key:"getPinLocallyButton",value:function(){return this.props.moderation.can_pin?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.pinLocally,type:"button"},l.default.createElement("span",{className:"material-icon"},"bookmark_border"),gettext("Pin threads locally"))):null}},{key:"getUnpinButton",value:function(){return this.props.moderation.can_pin?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.unpin,type:"button"},l.default.createElement("span",{className:"material-icon"},"panorama_fish_eye"),gettext("Unpin threads"))):null}},{key:"getMoveButton",value:function(){return this.props.moderation.can_move?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.move,type:"button"},l.default.createElement("span",{className:"material-icon"},"arrow_forward"),gettext("Move threads"))):null}},{key:"getMergeButton",value:function(){return this.props.moderation.can_merge?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.merge,type:"button"},l.default.createElement("span",{className:"material-icon"},"call_merge"),gettext("Merge threads"))):null}},{key:"getApproveButton",value:function(){return this.props.moderation.can_approve?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.approve,type:"button"},l.default.createElement("span",{className:"material-icon"},"done"),gettext("Approve threads"))):null}},{key:"getOpenButton",value:function(){return this.props.moderation.can_close?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.open,type:"button"},l.default.createElement("span",{className:"material-icon"},"lock_open"),gettext("Open threads"))):null}},{key:"getCloseButton",value:function(){return this.props.moderation.can_close?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.close,type:"button"},l.default.createElement("span",{className:"material-icon"},"lock_outline"),gettext("Close threads"))):null}},{key:"getUnhideButton",value:function(){return this.props.moderation.can_unhide?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.unhide,type:"button"},l.default.createElement("span",{className:"material-icon"},"visibility"),gettext("Unhide threads"))):null}},{key:"getHideButton",value:function(){return this.props.moderation.can_hide?l.default.createElement("li",null,l.default.createElement("button",{onClick:this.hide,type:"button",className:"btn btn-link"},l.default.createElement("span",{className:"material-icon"},"visibility_off"),gettext("Hide threads"))):null}},{key:"getDeleteButton",value:function(){return this.props.moderation.can_delete?l.default.createElement("li",null,l.default.createElement("button",{className:"btn btn-link",onClick:this.delete,type:"button"},l.default.createElement("span",{className:"material-icon"},"clear"),gettext("Delete threads"))):null}},{key:"render",value:function(){return l.default.createElement("ul",{className:this.props.className},this.getPinGloballyButton(),this.getPinLocallyButton(),this.getUnpinButton(),this.getMoveButton(),this.getMergeButton(),this.getApproveButton(),this.getOpenButton(),this.getCloseButton(),this.getUnhideButton(),this.getHideButton(),this.getDeleteButton())}}])&&o(e.prototype,t),n&&o(e,n),a}();n.default=a},{"../../../reducers/selection":352,"../../../services/ajax":359,"../../../services/modal":366,"../../../services/snackbar":371,"../../../services/store":372,"../../../utils/countdown":377,"./errors-list":256,"./merge":257,"./move":258,react:"react"}],256:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ThreadErrors=f,n.default=void 0;var r,o=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,n,r=u(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",{className:"modal-dialog",role:"document"},o.default.createElement("div",{className:"modal-content"},o.default.createElement("div",{className:"modal-header"},o.default.createElement("button",{"aria-label":gettext("Close"),className:"close","data-dismiss":"modal",type:"button"},o.default.createElement("span",{"aria-hidden":"true"},"×")),o.default.createElement("h4",{className:"modal-title"},gettext("Threads moderation"))),o.default.createElement("div",{className:"modal-body"},o.default.createElement("p",{className:"lead"},gettext("One or more threads could not be deleted:")),o.default.createElement("ul",{className:"list-unstyled list-errored-items"},this.props.errors.map(function(e){return o.default.createElement(f,{errors:e.errors,key:e.thread.id,thread:e.thread})})))))}}])&&l(e.prototype,t),n&&l(e,n),a}();function f(e){var t=e.errors,n=e.thread;return o.default.createElement("li",null,o.default.createElement("h5",null,n.title),t.map(function(e,t){return o.default.createElement("p",null,e)}))}n.default=a},{react:"react"}],257:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=o(e("react")),r=o(e("../../button")),i=o(e("../../form")),s=o(e("../../form-group")),u=o(e("../../category-select")),c=o(e("../../select")),f=o(e("../../..")),d=e("../../../reducers/threads"),p=a(e("../../../reducers/selection")),m=o(e("./errors-list")),h=o(e("../../merge-conflict")),y=o(e("../../../services/ajax")),b=o(e("../../../services/modal")),v=o(e("../../../services/snackbar")),g=o(e("../../../services/store")),_=a(e("../../../utils/validators"));function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!==w(e)&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((n=a?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o])}return r.default=e,t&&t.set(e,r),r}function o(e){return e&&e.__esModule?e:{default:e}}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=j(o);return t=l?(e=j(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==w(r)&&"function"!=typeof r?P(n):r}}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(o,i.default);var e,t,n,a=x(o);function o(e){var r,t;for(var n in!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),S(P(r=a.call(this,e)),"getFormdata",function(){return{threads:r.props.threads.map(function(e){return e.id}),title:r.state.title,category:r.state.category,weight:r.state.weight,is_hidden:r.state.is_hidden,is_closed:r.state.is_closed}}),S(P(r),"handleSuccess",function(e){r.props.threads.forEach(function(e){r.props.freezeThread(e.id),r.props.deleteThread(e)}),g.default.dispatch(p.none()),r.props.addThreads([e]),g.default.dispatch((0,d.filterThreads)(r.props.route.category,r.props.categoriesMap)),b.default.hide()}),S(P(r),"handleError",function(e){400===e.status?e.best_answers||e.polls?b.default.show(l.default.createElement(h.default,{api:f.default.get("MERGE_THREADS_API"),bestAnswers:e.best_answers,data:r.getFormdata(),polls:e.polls,onError:r.handleError,onSuccess:r.handleSuccess})):(r.setState({errors:Object.assign({},r.state.errors,e)}),v.default.error(gettext("Form contains errors."))):403===e.status&&Array.isArray(e)?b.default.show(l.default.createElement(m.default,{errors:e})):e.best_answer?v.default.error(e.best_answer[0]):e.poll?v.default.error(e.poll[0]):v.default.apiError(e)}),S(P(r),"onCategoryChange",function(e){var t=e.target.value,n={category:t};r.acl[t].can_pin_threads<n.weight&&(n.weight=0),r.acl[t].can_hide_threads||(n.is_hidden=0),r.acl[t].can_close_threads||(n.is_closed=!1),r.setState(n)}),r.state={isLoading:!1,title:"",category:null,weight:0,is_hidden:0,is_closed:!1,validators:{title:[_.required()]},errors:{}},r.acl={},e.user.acl.categories){e.user.acl.categories.hasOwnProperty(n)&&(t=e.user.acl.categories[n],r.acl[t.id]=t)}return r.categoryChoices=[],e.categories.forEach(function(e){var t,n;0<e.level&&(n=!(t=r.acl[e.id]).can_start_threads||e.is_closed&&!t.can_close_threads,r.categoryChoices.push({value:e.id,disabled:n,level:e.level-1,label:e.name}),n||r.state.category||(r.state.category=e.id))}),r.isHiddenChoices=[{value:0,icon:"visibility",label:gettext("No")},{value:1,icon:"visibility_off",label:gettext("Yes")}],r.isClosedChoices=[{value:!1,icon:"lock_outline",label:gettext("No")},{value:!0,icon:"lock",label:gettext("Yes")}],r}return e=o,(t=[{key:"clean",value:function(){return!!this.isValid()||(v.default.error(gettext("Form contains errors.")),this.setState({errors:this.validate()}),!1)}},{key:"send",value:function(){return y.default.post(f.default.get("MERGE_THREADS_API"),this.getFormdata())}},{key:"getWeightChoices",value:function(){var e=[{value:0,icon:"remove",label:gettext("Not pinned")},{value:1,icon:"bookmark_border",label:gettext("Pinned locally")}];return 2==this.acl[this.state.category].can_pin_threads&&e.push({value:2,icon:"bookmark",label:gettext("Pinned globally")}),e}},{key:"renderWeightField",value:function(){return this.acl[this.state.category].can_pin_threads?l.default.createElement(s.default,{label:gettext("Thread weight"),for:"id_weight"},l.default.createElement(c.default,{id:"id_weight",onChange:this.bindInput("weight"),value:this.state.weight,choices:this.getWeightChoices()})):null}},{key:"renderHiddenField",value:function(){return this.acl[this.state.category].can_hide_threads?l.default.createElement(s.default,{label:gettext("Hide thread"),for:"id_is_hidden"},l.default.createElement(c.default,{id:"id_is_closed",onChange:this.bindInput("is_hidden"),value:this.state.is_hidden,choices:this.isHiddenChoices})):null}},{key:"renderClosedField",value:function(){return this.acl[this.state.category].can_close_threads?l.default.createElement(s.default,{label:gettext("Close thread"),for:"id_is_closed"},l.default.createElement(c.default,{id:"id_is_closed",onChange:this.bindInput("is_closed"),value:this.state.is_closed,choices:this.isClosedChoices})):null}},{key:"renderForm",value:function(){return l.default.createElement("form",{onSubmit:this.handleSubmit},l.default.createElement("div",{className:"modal-body"},l.default.createElement(s.default,{label:gettext("Thread title"),for:"id_title",validation:this.state.errors.title},l.default.createElement("input",{id:"id_title",className:"form-control",type:"text",onChange:this.bindInput("title"),value:this.state.title})),l.default.createElement("div",{className:"clearfix"}),l.default.createElement(s.default,{label:gettext("Category"),for:"id_category",validation:this.state.errors.category},l.default.createElement(u.default,{id:"id_category",onChange:this.onCategoryChange,value:this.state.category,choices:this.categoryChoices})),l.default.createElement("div",{className:"clearfix"}),this.renderWeightField(),this.renderHiddenField(),this.renderClosedField()),l.default.createElement("div",{className:"modal-footer"},l.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),l.default.createElement(r.default,{className:"btn-primary",loading:this.state.isLoading},gettext("Merge threads"))))}},{key:"renderCantMergeMessage",value:function(){return l.default.createElement("div",{className:"modal-body"},l.default.createElement("div",{className:"message-icon"},l.default.createElement("span",{className:"material-icon"},"info_outline")),l.default.createElement("div",{className:"message-body"},l.default.createElement("p",{className:"lead"},gettext("You can't move threads because there are no categories you are allowed to move them to.")),l.default.createElement("p",null,gettext("You need permission to start threads in category to be able to merge threads to it.")),l.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},gettext("Ok"))))}},{key:"getClassName",value:function(){return this.state.category?"modal-dialog":"modal-dialog modal-message"}},{key:"render",value:function(){return l.default.createElement("div",{className:this.getClassName(),role:"document"},l.default.createElement("div",{className:"modal-content"},l.default.createElement("div",{className:"modal-header"},l.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},l.default.createElement("span",{"aria-hidden":"true"},"×")),l.default.createElement("h4",{className:"modal-title"},gettext("Merge threads"))),this.state.category?this.renderForm():this.renderCantMergeMessage()))}}])&&O(e.prototype,t),n&&O(e,n),o}();n.default=N},{"../../..":296,"../../../reducers/selection":352,"../../../reducers/threads":355,"../../../services/ajax":359,"../../../services/modal":366,"../../../services/snackbar":371,"../../../services/store":372,"../../../utils/validators":387,"../../button":10,"../../category-select":23,"../../form":50,"../../form-group":49,"../../merge-conflict":53,"../../select":204,"./errors-list":256,react:"react"}],258:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=s(e("react")),a=s(e("../../form")),o=s(e("../../form-group")),l=s(e("../../category-select")),c=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../reducers/selection")),f=e("../../../reducers/threads"),d=s(e("../../../services/modal")),p=s(e("../../../services/store"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=v(o);return t=l?(e=v(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==u(r)&&"function"!=typeof r?b(n):r}}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(u,a.default);var e,t,n,s=y(u);function u(e){var r,t,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),r=s.call(this,e),t=b(r),a=function(e){e.preventDefault(),d.default.hide();r.props.callApi([{op:"replace",path:"category",value:r.state.category},{op:"replace",path:"flatten-categories",value:null},{op:"add",path:"acl",value:!0}],gettext("Selected threads were moved."),function(){p.default.dispatch((0,f.filterThreads)(r.props.route.category,r.props.categoriesMap));var e=p.default.getState(),t=e.threads.map(function(e){return e.id});p.default.dispatch(c.all(e.selection.filter(function(e){return-1!==t.indexOf(e)})))})},(n="handleSubmit")in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,r.state={category:null};var o,l={};for(var i in e.user.acl.categories){e.user.acl.categories.hasOwnProperty(i)&&(o=e.user.acl.categories[i],l[o.id]=o)}return r.categoryChoices=[],e.categories.forEach(function(e){var t,n;0<e.level&&(n=!(t=l[e.id]).can_start_threads||e.is_closed&&!t.can_close_threads,r.categoryChoices.push({value:e.id,disabled:n,level:e.level-1,label:e.name}),n||r.state.category||(r.state.category=e.id))}),r}return e=u,(t=[{key:"getClassName",value:function(){return this.state.category?"modal-dialog":"modal-dialog modal-message"}},{key:"renderForm",value:function(){return r.default.createElement("form",{onSubmit:this.handleSubmit},r.default.createElement("div",{className:"modal-body"},r.default.createElement(o.default,{label:gettext("New category"),for:"id_new_category"},r.default.createElement(l.default,{id:"id_new_category",onChange:this.bindInput("category"),value:this.state.category,choices:this.categoryChoices}))),r.default.createElement("div",{className:"modal-footer"},r.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",disabled:this.state.isLoading,type:"button"},gettext("Cancel")),r.default.createElement("button",{className:"btn btn-primary"},gettext("Move threads"))))}},{key:"renderCantMoveMessage",value:function(){return r.default.createElement("div",{className:"modal-body"},r.default.createElement("div",{className:"message-icon"},r.default.createElement("span",{className:"material-icon"},"info_outline")),r.default.createElement("div",{className:"message-body"},r.default.createElement("p",{className:"lead"},gettext("You can't move threads because there are no categories you are allowed to move them to.")),r.default.createElement("p",null,gettext("You need permission to start threads in category to be able to move threads to it.")),r.default.createElement("button",{className:"btn btn-default","data-dismiss":"modal",type:"button"},gettext("Ok"))))}},{key:"render",value:function(){return r.default.createElement("div",{className:this.getClassName(),role:"document"},r.default.createElement("div",{className:"modal-content"},r.default.createElement("div",{className:"modal-header"},r.default.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":gettext("Close")},r.default.createElement("span",{"aria-hidden":"true"},"×")),r.default.createElement("h4",{className:"modal-title"},gettext("Move threads"))),this.state.category?this.renderForm():this.renderCantMoveMessage()))}}])&&m(e.prototype,t),n&&m(e,n),u}();n.default=g},{"../../../reducers/selection":352,"../../../reducers/threads":355,"../../../services/modal":366,"../../../services/store":372,"../../category-select":23,"../../form":50,"../../form-group":49,react:"react"}],259:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(e("react")),l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../reducers/selection")),i=a(e("../../../services/store"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function a(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=m(o);return t=l?(e=m(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==u(r)&&"function"!=typeof r?p(n):r}}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,r.default.Component);var e,t,n,a=d(o);function o(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return h(p(e=a.call.apply(a,[this].concat(n))),"selectAll",function(){i.default.dispatch(l.all(e.props.threads.map(function(e){return e.id})))}),h(p(e),"selectNone",function(){i.default.dispatch(l.none())}),e}return e=o,(t=[{key:"render",value:function(){return r.default.createElement("ul",{className:this.props.className},r.default.createElement("li",null,r.default.createElement("button",{className:"btn btn-link",type:"button",onClick:this.selectAll},r.default.createElement("span",{className:"material-icon"},"check_box"),gettext("Select all"))),r.default.createElement("li",null,r.default.createElement("button",{className:"btn btn-link",type:"button",onClick:this.selectNone},r.default.createElement("span",{className:"material-icon"},"check_box_outline_blank"),gettext("Select none"))))}}])&&c(e.prototype,t),n&&c(e,n),o}();n.default=o},{"../../../reducers/selection":352,"../../../services/store":372,react:"react"}],260:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.baseUrl,n=e.list,r=e.lists;return r.length<2?null:a.default.createElement("div",{className:"page-tabs"},a.default.createElement("div",{className:"container"},a.default.createElement("ul",{className:"nav nav-pills"},r.map(function(e){return a.default.createElement(l.default,{isControlled:!0,isActive:e.path===n.path,key:t+e.path},a.default.createElement(o.Link,{to:t+e.path},e.name))}))))};var a=r(e("react")),o=e("react-router"),l=r(e("../li"));function r(e){return e&&e.__esModule?e:{default:e}}},{"../li":51,react:"react","react-router":"react-router"}],261:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getSelect=u,n.getLists=c,n.paths=function(e,n){var r=c(e),a=[],o={};return s.default.get("CATEGORIES").forEach(function(t){r.forEach(function(e){o[t.id]=t,a.push({path:t.url.index+e.path,component:(0,l.connect)(u(n))(i.default),categories:s.default.get("CATEGORIES"),categoriesMap:o,category:t,lists:r,list:e})})}),a};var l=e("react-redux"),i=r(e("./route")),s=r(e("../.."));function r(e){return e&&e.__esModule?e:{default:e}}function u(t){return function(e){return{options:t,selection:e.selection,threads:e.threads,tick:e.tick.tick,user:e.auth.user}}}function c(e){var t=[{type:"all",path:"",name:gettext("All"),longName:gettext("All threads")}];return e.id&&(t.push({type:"my",path:"my/",name:gettext("My"),longName:gettext("My threads")}),t.push({type:"new",path:"new/",name:gettext("New"),longName:gettext("New threads")}),t.push({type:"unread",path:"unread/",name:gettext("Unread"),longName:gettext("Unread threads")}),t.push({type:"subscribed",path:"subscribed/",name:gettext("Subscribed"),longName:gettext("Subscribed threads")}),e.acl.can_see_unapproved_content_lists&&t.push({type:"unapproved",path:"unapproved/",name:gettext("Unapproved"),longName:gettext("Unapproved content")})),t}},{"../..":296,"./route":262,"react-redux":"react-redux"}],262:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a(e("react")),l=a(e("../button")),i=e("./compare"),s=a(e("./container")),u=a(e("./header")),c=e("./utils"),f=a(e("../threads-list")),d=a(e("./list-empty")),p=a(e("../with-dropdown")),m=a(e("../..")),h=r(e("../../reducers/selection")),y=e("../../reducers/threads"),b=a(e("../../services/ajax")),v=a(e("../../services/polls")),g=a(e("../../services/snackbar")),_=a(e("../../services/store")),E=a(e("../../services/page-title")),w=r(e("../../utils/sets"));function O(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return O=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!==k(e)&&"function"!=typeof e)return{default:e};var t=O();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((n=a?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o])}return r.default=e,t&&t.set(e,r),r}function a(e){return e&&e.__esModule?e:{default:e}}function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=N(o);return t=l?(e=N(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==k(r)&&"function"!=typeof r?S(n):r}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,p.default);var e,t,n,r=j(a);function a(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),C(S(n=r.call(this,e)),"loadMore",function(){n.setState({isBusy:!0}),n.loadThreads(n.getCategory(),n.state.next)}),C(S(n),"pollResponse",function(e){n.setState({diff:Object.assign({},e,{results:(0,c.diffThreads)(n.props.threads,e.results)})})}),C(S(n),"addThreads",function(e){_.default.dispatch((0,y.append)(e,n.getSorting()))}),C(S(n),"applyDiff",function(){n.addThreads(n.state.diff.results),n.setState(Object.assign({},n.state.diff,{moderation:(0,c.getModerationActions)(_.default.getState().threads),diff:{results:[]}}))}),C(S(n),"freezeThread",function(t){n.setState(function(e){return{busyThreads:w.toggle(e.busyThreads,t)}})}),C(S(n),"updateThread",function(e){_.default.dispatch((0,y.patch)(e,e,n.getSorting()))}),C(S(n),"deleteThread",function(e){_.default.dispatch((0,y.deleteThread)(e))}),n.state={isMounted:!0,isLoaded:!1,isBusy:!1,diff:{results:[]},moderation:[],busyThreads:[],dropdown:!1,subcategories:[],next:0};var t=n.getCategory();return m.default.has("THREADS")?n.initWithPreloadedData(t,m.default.get("THREADS")):n.initWithoutPreloadedData(t),n}return e=a,(t=[{key:"getCategory",value:function(){return this.props.route.category.special_role?null:this.props.route.category.id}},{key:"initWithPreloadedData",value:function(e,t){this.state=Object.assign(this.state,{moderation:(0,c.getModerationActions)(t.results),subcategories:t.subcategories,next:t.next}),this.startPolling(e)}},{key:"initWithoutPreloadedData",value:function(e){this.loadThreads(e)}},{key:"loadThreads",value:function(t,e){var n=this,r=1<arguments.length&&void 0!==e?e:0;b.default.get(this.props.options.api,{category:t,list:this.props.route.list.type,start:r||0},"threads").then(function(e){n.state.isMounted&&(0===r?_.default.dispatch((0,y.hydrate)(e.results)):_.default.dispatch((0,y.append)(e.results,n.getSorting())),n.setState({isLoaded:!0,isBusy:!1,moderation:(0,c.getModerationActions)(_.default.getState().threads),subcategories:e.subcategories,next:e.next}),n.startPolling(t))},function(e){g.default.apiError(e)})}},{key:"startPolling",value:function(e){v.default.start({poll:"threads",url:this.props.options.api,data:{category:e,list:this.props.route.list.type},frequency:12e4,update:this.pollResponse})}},{key:"componentDidMount",value:function(){this.setPageTitle(),m.default.has("THREADS")&&(_.default.dispatch((0,y.hydrate)(m.default.pop("THREADS").results)),this.setState({isLoaded:!0})),_.default.dispatch(h.none())}},{key:"componentWillUnmount",value:function(){this.state.isMounted=!1,v.default.stop("threads")}},{key:"getTitle",value:function(){return this.props.options.title?this.props.options.title:(0,c.getTitle)(this.props.route)}},{key:"setPageTitle",value:function(){this.props.route.category.level||!m.default.get("THREADS_ON_INDEX")?E.default.set((0,c.getPageTitle)(this.props.route)):this.props.options.title?E.default.set(this.props.options.title):m.default.get("SETTINGS").index_title?document.title=m.default.get("SETTINGS").index_title:document.title=m.default.get("SETTINGS").forum_name}},{key:"getSorting",value:function(){return this.props.route.category.level?i.compareWeight:i.compareGlobalWeight}},{key:"getMoreButton",value:function(){return this.state.next?o.default.createElement("div",{className:"pager-more"},o.default.createElement(l.default,{className:"btn btn-default btn-outline",loading:this.state.isBusy||this.state.busyThreads.length,onClick:this.loadMore},gettext("Show more"))):null}},{key:"getClassName",value:function(){var e,t="page page-threads";return t+=" page-threads-"+this.props.route.list.type,(e=this.props).route.category.level||!m.default.get("THREADS_ON_INDEX")||e.options.title||(t+=" page-threads-index"),this.props.route.category.css_class&&(t+=" page-threads-"+this.props.route.category.css_class),t}},{key:"render",value:function(){return o.default.createElement("div",{className:this.getClassName()},o.default.createElement(u.default,{categories:this.props.route.categoriesMap,disabled:!this.state.isLoaded,startThread:this.props.options.startThread,threads:this.props.threads,title:this.getTitle(),toggleNav:this.toggleNav,route:this.props.route,user:this.props.user}),o.default.createElement(s.default,{api:this.props.options.api,route:this.props.route,subcategories:this.state.subcategories,user:this.props.user,pageLead:this.props.options.pageLead,threads:this.props.threads,threadsCount:this.state.count,moderation:this.state.moderation,selection:this.props.selection,busyThreads:this.state.busyThreads,addThreads:this.addThreads,freezeThread:this.freezeThread,deleteThread:this.deleteThread,updateThread:this.updateThread,isLoaded:this.state.isLoaded,isBusy:this.state.isBusy},o.default.createElement(f.default,{category:this.props.route.category,categories:this.props.route.categoriesMap,list:this.props.route.list,selection:this.props.selection,threads:this.props.threads,diffSize:this.state.diff.results.length,applyDiff:this.applyDiff,showOptions:!!this.props.user.id,isLoaded:this.state.isLoaded,busyThreads:this.state.busyThreads},o.default.createElement(d.default,{category:this.props.route.category,emptyMessage:this.props.options.emptyMessage,list:this.props.route.list})),this.getMoreButton()))}}])&&x(e.prototype,t),n&&x(e,n),a}();n.default=R},{"../..":296,"../../reducers/selection":352,"../../reducers/threads":355,"../../services/ajax":359,"../../services/page-title":368,"../../services/polls":369,"../../services/snackbar":371,"../../services/store":372,"../../utils/sets":385,"../button":10,"../threads-list":232,"../with-dropdown":293,"./compare":251,"./container":252,"./header":253,"./list-empty":254,"./utils":264,react:"react"}],263:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("./category-picker")),i=r(e("./moderation/controls")),s=r(e("./moderation/selection"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==u(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,n,r=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getCategoryPicker",value:function(){return this.props.subcategories.length?o.default.createElement(l.default,{categories:this.props.categoriesMap,choices:this.props.subcategories,list:this.props.list}):null}},{key:"showModerationOptions",value:function(){return this.props.user.id&&this.props.moderation.allow}},{key:"getSelectedThreads",value:function(){var t=this;return this.props.threads.filter(function(e){return 0<=t.props.selection.indexOf(e.id)})}},{key:"getModerationButton",value:function(){return this.showModerationOptions()?o.default.createElement("div",{className:"col-xs-6 col-sm-3 col-md-2"},o.default.createElement("div",{className:"btn-group btn-group-justified"},o.default.createElement("div",{className:"btn-group dropdown"},o.default.createElement("button",{type:"button",className:"btn btn-default btn-outline dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:this.props.disabled||!this.props.selection.length},o.default.createElement("span",{className:"material-icon"},"settings"),gettext("Options")),o.default.createElement(i.default,{addThreads:this.props.addThreads,api:this.props.api,categories:this.props.categories,categoriesMap:this.props.categoriesMap,className:"dropdown-menu dropdown-menu-right stick-to-bottom",deleteThread:this.props.deleteThread,freezeThread:this.props.freezeThread,moderation:this.props.moderation,route:this.props.route,threads:this.getSelectedThreads(),updateThread:this.props.updateThread,user:this.props.user})))):null}},{key:"getSelectionButton",value:function(){return this.showModerationOptions()?o.default.createElement("div",{className:"col-xs-3 col-sm-2 col-md-1"},o.default.createElement("div",{className:"btn-group btn-group-justified"},o.default.createElement("div",{className:"btn-group dropdown"},o.default.createElement("button",{type:"button",className:"btn btn-default btn-outline btn-icon dropdown-toggle","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",disabled:this.props.disabled},o.default.createElement("span",{className:"material-icon"},"select_all")),o.default.createElement(s.default,{className:"dropdown-menu dropdown-menu-right stick-to-bottom",threads:this.props.threads})))):null}},{key:"render",value:function(){return o.default.createElement("div",{className:"row row-toolbar row-toolbar-bottom-margin"},o.default.createElement("div",{className:"col-xs-3 col-sm-3 col-md-2 dropdown"},this.getCategoryPicker()),o.default.createElement("div",{className:"hidden-xs col-sm-4 col-md-7"}),this.getModerationButton(),this.getSelectionButton())}}])&&c(e.prototype,t),n&&c(e,n),a}();n.default=a},{"./category-picker":250,"./moderation/controls":255,"./moderation/selection":259,react:"react"}],264:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getPageTitle=function(e){return e.category.level?e.list.path?{title:e.list.longName,parent:e.category.name}:{title:e.category.name}:a.default.get("THREADS_ON_INDEX")?e.list.path?{title:e.list.longName}:null:e.list.path?{title:e.list.longName,parent:gettext("Threads")}:{title:gettext("Threads")}},n.getTitle=function(e){return e.category.level?e.category.name:a.default.get("THREADS_ON_INDEX")?a.default.get("SETTINGS").index_header?a.default.get("SETTINGS").index_header:a.default.get("SETTINGS").forum_name:gettext("Threads")},n.isThreadChanged=o,n.diffThreads=function(e,t){var n={};return e.forEach(function(e){n[e.id]=e}),t.filter(function(e){return!n[e.id]||o(n[e.id],e)})},n.getModerationActions=function(e){var t={allow:!1,can_approve:0,can_close:0,can_delete:0,can_hide:0,can_merge:0,can_move:0,can_pin:0,can_pin_globally:0,can_unhide:0};return e.forEach(function(e){e.is_unapproved&&e.acl.can_approve>t.can_approve&&(t.can_approve=e.acl.can_approve),e.acl.can_close>t.can_close&&(t.can_close=e.acl.can_close),e.acl.can_delete>t.can_delete&&(t.can_delete=e.acl.can_delete),e.acl.can_hide>t.can_hide&&(t.can_hide=e.acl.can_hide),e.acl.can_merge>t.can_merge&&(t.can_merge=e.acl.can_merge),e.acl.can_move>t.can_move&&(t.can_move=e.acl.can_move),e.acl.can_pin>t.can_pin&&(t.can_pin=e.acl.can_pin),e.acl.can_pin_globally>t.can_pin_globally&&(t.can_pin_globally=e.acl.can_pin_globally),e.is_hidden&&e.acl.can_unhide>t.can_unhide&&(t.can_unhide=e.acl.can_unhide),t.allow=t.can_approve||t.can_close||t.can_delete||t.can_hide||t.can_merge||t.can_move||t.can_pin||t.can_pin_globally||t.can_unhide}),t};var r,a=(r=e("../.."))&&r.__esModule?r:{default:r};function o(e,t){return 0<=[e.title===t.title,e.weight===t.weight,e.category===t.category,e.last_post===t.last_post,e.last_poster_name===t.last_poster_name].indexOf(!1)}},{"../..":296}],265:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CompactGuestNav=n.GuestNav=n.GuestMenu=void 0;var r=f(e("react")),a=f(e("../avatar")),o=f(e("../navbar-search")),l=f(e("../register-button")),i=f(e("../sign-in.js")),s=f(e("../..")),u=f(e("../../services/mobile-navbar-dropdown")),c=f(e("../../services/modal"));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=g(o);return t=l?(e=g(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==d(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(){y(t,r.default.Component);var e=v(t);function t(){return p(this,t),e.apply(this,arguments)}return h(t,[{key:"showSignInModal",value:function(){c.default.show(i.default)}},{key:"render",value:function(){return r.default.createElement("ul",{className:"dropdown-menu user-dropdown dropdown-menu-right",role:"menu"},r.default.createElement("li",{className:"guest-preview"},r.default.createElement("h4",null,gettext("You are browsing as guest.")),r.default.createElement("p",null,gettext("Sign in or register to start and participate in discussions.")),r.default.createElement("div",{className:"row"},s.default.get("SETTINGS").enable_sso?r.default.createElement("div",{className:"col-xs-12"},r.default.createElement("a",{className:"btn btn-primary btn-register btn-block",href:s.default.get("SETTINGS").SSO_LOGIN_URL},gettext("Sign in"))):r.default.createElement("div",{className:"col-xs-6"},r.default.createElement("button",{className:"btn btn-default btn-sign-in btn-block",onClick:this.showSignInModal,type:"button"},gettext("Sign in"))),!s.default.get("SETTINGS").enable_sso&&r.default.createElement("div",{className:"col-xs-6"},r.default.createElement(l.default,{className:"btn-primary btn-register btn-block"},gettext("Register"))))))}}]),t}();n.GuestMenu=_;var E=function(){y(t,_);var e=v(t);function t(){return p(this,t),e.apply(this,arguments)}return h(t,[{key:"render",value:function(){return r.default.createElement("div",{className:"nav nav-guest"},s.default.get("SETTINGS").enable_sso?r.default.createElement("a",{className:"btn navbar-btn btn-primary btn-register",href:s.default.get("SETTINGS").SSO_LOGIN_URL},gettext("Sign in")):r.default.createElement("button",{className:"btn navbar-btn btn-default btn-sign-in",onClick:this.showSignInModal,type:"button"},gettext("Sign in")),!s.default.get("SETTINGS").enable_sso&&r.default.createElement(l.default,{className:"navbar-btn btn-primary btn-register"},gettext("Register")),r.default.createElement("div",{className:"navbar-left"},r.default.createElement(o.default,null)))}}]),t}();n.GuestNav=E;var w=function(){y(t,r.default.Component);var e=v(t);function t(){return p(this,t),e.apply(this,arguments)}return h(t,[{key:"showGuestMenu",value:function(){u.default.show(_)}},{key:"render",value:function(){return r.default.createElement("button",{type:"button",onClick:this.showGuestMenu},r.default.createElement(a.default,{size:"64"}))}}]),t}();n.CompactGuestNav=w},{"../..":296,"../../services/mobile-navbar-dropdown":365,"../../services/modal":366,"../avatar":8,"../navbar-search":71,"../register-button":192,"../sign-in.js":205,react:"react"}],266:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.select=function(e){return e.auth},n.CompactUserMenu=n.UserMenu=void 0;var r,a=(r=e("react"))&&r.__esModule?r:{default:r},o=e("./guest-nav"),l=e("./user-nav");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=m(o);return t=l?(e=m(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(){f(t,a.default.Component);var e=p(t);function t(){return s(this,t),e.apply(this,arguments)}return c(t,[{key:"render",value:function(){return this.props.isAuthenticated?a.default.createElement(l.UserNav,{user:this.props.user}):a.default.createElement(o.GuestNav,null)}}]),t}();n.UserMenu=h;var y=function(){f(t,a.default.Component);var e=p(t);function t(){return s(this,t),e.apply(this,arguments)}return c(t,[{key:"render",value:function(){return this.props.isAuthenticated?a.default.createElement(l.CompactUserNav,{user:this.props.user}):a.default.createElement(o.CompactGuestNav,null)}}]),t}();n.CompactUserMenu=y},{"./guest-nav":265,"./user-nav":267,react:"react"}],267:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PrivateThreadsBadge=w,n.UserNav=function(e){var t=e.user;return r.default.createElement("ul",{className:"ul nav navbar-nav nav-user"},r.default.createElement("li",null,r.default.createElement(i.default,null)),r.default.createElement(O,{user:t}),r.default.createElement("li",{className:"dropdown"},r.default.createElement("a",{"aria-haspopup":"true","aria-expanded":"false",className:"dropdown-toggle","data-toggle":"dropdown",href:t.url,role:"button"},r.default.createElement(o.default,{user:t,size:"64"})),r.default.createElement(E,{user:t})))},n.UserPrivateThreadsLink=O,n.selectUserMenu=k,n.CompactUserNav=n.UserMenu=void 0;var r=d(e("react")),a=e("react-redux"),o=d(e("../avatar")),l=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../change-avatar/root")),i=d(e("../navbar-search")),s=d(e("../..")),u=d(e("../../services/mobile-navbar-dropdown")),c=d(e("../../services/modal"));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==p(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(){b(t,r.default.Component);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return y(t,[{key:"logout",value:function(){confirm(gettext("Are you sure you want to sign out?"))&&$("#hidden-logout-form").submit()}},{key:"changeAvatar",value:function(){c.default.show((0,a.connect)(l.select)(l.default))}},{key:"render",value:function(){var e=this.props.user;return r.default.createElement("ul",{className:"dropdown-menu user-dropdown dropdown-menu-right",role:"menu"},r.default.createElement("li",{className:"dropdown-header"},r.default.createElement("strong",null,e.username),r.default.createElement("div",{className:"row user-stats"},r.default.createElement("div",{className:"col-sm-3"},r.default.createElement("span",{className:"material-icon"},"message"),e.posts),r.default.createElement("div",{className:"col-sm-3"},r.default.createElement("span",{className:"material-icon"},"forum"),e.threads),r.default.createElement("div",{className:"col-sm-3"},r.default.createElement("span",{className:"material-icon"},"favorite"),e.followers),r.default.createElement("div",{className:"col-sm-3"},r.default.createElement("span",{className:"material-icon"},"favorite_outline"),e.following))),r.default.createElement("li",{className:"divider"}),r.default.createElement("li",null,r.default.createElement("a",{href:e.url},r.default.createElement("span",{className:"material-icon"},"account_circle"),gettext("See your profile"))),r.default.createElement("li",null,r.default.createElement("a",{href:s.default.get("USERCP_URL")},r.default.createElement("span",{className:"material-icon"},"done_all"),gettext("Change options"))),r.default.createElement("li",null,r.default.createElement("button",{className:"btn-link",onClick:this.changeAvatar,type:"button"},r.default.createElement("span",{className:"material-icon"},"portrait"),gettext("Change avatar"))),!!e.acl.can_use_private_threads&&r.default.createElement("li",null,r.default.createElement("a",{href:s.default.get("PRIVATE_THREADS_URL")},r.default.createElement("span",{className:"material-icon"},"message"),gettext("Private threads"),r.default.createElement(w,{user:e}))),r.default.createElement("li",{className:"divider"}),r.default.createElement("li",{className:"dropdown-buttons"},r.default.createElement("button",{className:"btn btn-default btn-block",onClick:this.logout,type:"button"},gettext("Log out"))))}}]),t}();function w(e){var t=e.user;return t.unread_private_threads?r.default.createElement("span",{className:"badge"},t.unread_private_threads):null}function O(e){var t=e.user;if(!t.acl.can_use_private_threads)return null;var n=null,n=t.unread_private_threads?gettext("You have unread private threads!"):gettext("Private threads");return r.default.createElement("li",null,r.default.createElement("a",{className:"navbar-icon",href:s.default.get("PRIVATE_THREADS_URL"),title:n},r.default.createElement("span",{className:"material-icon"},"message"),0<t.unread_private_threads&&r.default.createElement("span",{className:"badge"},t.unread_private_threads)))}function k(e){return{user:e.auth.user}}n.UserMenu=E;var x=function(){b(t,r.default.Component);var e=g(t);function t(){return m(this,t),e.apply(this,arguments)}return y(t,[{key:"showUserMenu",value:function(){u.default.showConnected("user-menu",(0,a.connect)(k)(E))}},{key:"render",value:function(){return r.default.createElement("button",{type:"button",onClick:this.showUserMenu},r.default.createElement(o.default,{user:this.props.user,size:"50"}))}}]),t}();n.CompactUserNav=x},{"../..":296,"../../services/mobile-navbar-dropdown":365,"../../services/modal":366,"../avatar":8,"../change-avatar/root":27,"../navbar-search":71,react:"react","react-redux":"react-redux"}],268:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getStatusClassName=y,n.getStatusDescription=b,n.StatusLabel=n.StatusIcon=n.default=void 0;var r,a=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=d(o);return t=l?(e=d(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(){u(t,a.default.Component);var e=f(t);function t(){return o(this,t),e.apply(this,arguments)}return s(t,[{key:"getClass",value:function(){return y(this.props.status)}},{key:"render",value:function(){return a.default.createElement("span",{className:this.getClass()},this.props.children)}}]),t}();n.default=p;var m=function(){u(t,a.default.Component);var e=f(t);function t(){return o(this,t),e.apply(this,arguments)}return s(t,[{key:"getIcon",value:function(){return this.props.status.is_banned?"remove_circle_outline":this.props.status.is_hidden?"help_outline":this.props.status.is_online_hidden?"label":this.props.status.is_offline_hidden?"label_outline":this.props.status.is_online?"lens":this.props.status.is_offline?"panorama_fish_eye":void 0}},{key:"render",value:function(){return a.default.createElement("span",{className:"material-icon status-icon"},this.getIcon())}}]),t}();n.StatusIcon=m;var h=function(){u(t,a.default.Component);var e=f(t);function t(){return o(this,t),e.apply(this,arguments)}return s(t,[{key:"getHelp",value:function(){return b(this.props.user,this.props.status)}},{key:"getLabel",value:function(){return this.props.status.is_banned?gettext("Banned"):this.props.status.is_hidden?gettext("Hidden"):this.props.status.is_online_hidden?gettext("Online (hidden)"):this.props.status.is_offline_hidden?gettext("Offline (hidden)"):this.props.status.is_online?gettext("Online"):this.props.status.is_offline?gettext("Offline"):void 0}},{key:"render",value:function(){return a.default.createElement("span",{className:this.props.className||"status-label",title:this.getHelp()},this.getLabel())}}]),t}();function y(e){var t="";return e.is_banned?t="banned":e.is_hidden?t="offline":e.is_online_hidden?t="online":e.is_offline_hidden?t="offline":e.is_online?t="online":e.is_offline&&(t="offline"),"user-status user-"+t}function b(e,t){return t.is_banned?t.banned_until?interpolate(gettext("%(username)s is banned until %(ban_expires)s"),{username:e.username,ban_expires:t.banned_until.format("LL, LT")},!0):interpolate(gettext("%(username)s is banned"),{username:e.username},!0):t.is_hidden?interpolate(gettext("%(username)s is hiding presence"),{username:e.username},!0):t.is_online_hidden?interpolate(gettext("%(username)s is online (hidden)"),{username:e.username},!0):t.is_offline_hidden?interpolate(gettext("%(username)s was last seen %(last_click)s (hidden)"),{username:e.username,last_click:t.last_click.fromNow()},!0):t.is_online?interpolate(gettext("%(username)s is online"),{username:e.username},!0):t.is_offline?interpolate(gettext("%(username)s was last seen %(last_click)s"),{username:e.username,last_click:t.last_click.fromNow()},!0):void 0}n.StatusLabel=h},{react:"react"}],269:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../avatar")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../utils/random"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==u(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,n,r=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"getClassName",value:function(){return this.props.hiddenOnMobile?"list-group-item hidden-xs hidden-sm":"list-group-item"}},{key:"render",value:function(){return o.default.createElement("li",{className:this.getClassName()},o.default.createElement("div",{className:"change-avatar"},o.default.createElement("span",{className:"user-avatar"},o.default.createElement(l.default,{size:"100"}))),o.default.createElement("div",{className:"change-author"},o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(30,100)+"px"}}," ")),o.default.createElement("div",{className:"change"},o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(30,70)+"px"}}," "),o.default.createElement("span",{className:"material-icon"},"arrow_forward"),o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(30,70)+"px"}}," ")),o.default.createElement("div",{className:"change-date"},o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(80,140)+"px"}}," ")))}}])&&c(e.prototype,t),n&&c(e,n),a}();n.default=a},{"../../utils/random":382,"../avatar":8,react:"react"}],270:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../avatar"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"renderUserAvatar",value:function(){return this.props.change.changed_by?o.default.createElement("a",{href:this.props.change.changed_by.url,className:"user-avatar-wrapper"},o.default.createElement(l.default,{user:this.props.change.changed_by,size:"100"})):o.default.createElement("span",{className:"user-avatar-wrapper"},o.default.createElement(l.default,{size:"100"}))}},{key:"renderUsername",value:function(){return this.props.change.changed_by?o.default.createElement("a",{href:this.props.change.changed_by.url,className:"item-title"},this.props.change.changed_by.username):o.default.createElement("span",{className:"item-title"},this.props.change.changed_by_username)}},{key:"render",value:function(){return o.default.createElement("li",{className:"list-group-item",key:this.props.change.id},o.default.createElement("div",{className:"change-avatar"},this.renderUserAvatar()),o.default.createElement("div",{className:"change-author"},this.renderUsername()),o.default.createElement("div",{className:"change"},o.default.createElement("span",{className:"old-username"},this.props.change.old_username),o.default.createElement("span",{className:"material-icon"},"arrow_forward"),o.default.createElement("span",{className:"new-username"},this.props.change.new_username)),o.default.createElement("div",{className:"change-date"},o.default.createElement("abbr",{title:this.props.change.changed_on.format("LLL")},this.props.change.changed_on.fromNow())))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"../avatar":8,react:"react"}],271:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,n,r=u(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getEmptyMessage",value:function(){return this.props.emptyMessage?this.props.emptyMessage:gettext("No name changes have been recorded for your account.")}},{key:"render",value:function(){return o.default.createElement("div",{className:"username-history ui-ready"},o.default.createElement("ul",{className:"list-group"},o.default.createElement("li",{className:"list-group-item empty-message"},this.getEmptyMessage())))}}])&&l(e.prototype,t),n&&l(e,n),a}();n.default=a},{react:"react"}],272:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("./change-preview"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return o.default.createElement("div",{className:"username-history ui-preview"},o.default.createElement("ul",{className:"list-group"},[0,1,2].map(function(e){return o.default.createElement(l.default,{hiddenOnMobile:0<e,key:e})})))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"./change-preview":269,react:"react"}],273:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("./change"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",{className:"username-history ui-ready"},o.default.createElement("ul",{className:"list-group"},this.props.changes.map(function(e){return o.default.createElement(l.default,{change:e,key:e.id})})))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"./change":270,react:"react"}],274:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("./list-empty")),i=r(e("./list-ready")),s=r(e("./list-preview"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==u(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,n,r=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return this.props.isLoaded?this.props.changes.length?o.default.createElement(i.default,{changes:this.props.changes}):o.default.createElement(l.default,{emptyMessage:this.props.emptyMessage}):o.default.createElement(s.default,null)}}])&&c(e.prototype,t),n&&c(e,n),a}();n.default=a},{"./list-empty":271,"./list-preview":272,"./list-ready":273,react:"react"}],275:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.showStatus,n=e.user,r=n.rank,a="panel user-card";r.css_class&&(a+=" user-card-"+r.css_class);return o.default.createElement("div",{className:a},o.default.createElement("div",{className:"panel-body"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-3 user-card-left"},o.default.createElement("div",{className:"user-card-small-avatar"},o.default.createElement("a",{href:n.url},o.default.createElement(l.default,{size:"50",size2x:"80",user:n})))),o.default.createElement("div",{className:"col-xs-9 col-sm-12 user-card-body"},o.default.createElement("div",{className:"user-card-avatar"},o.default.createElement("a",{href:n.url},o.default.createElement(l.default,{size:"150",size2x:"200",user:n}))),o.default.createElement("div",{className:"user-card-username"},o.default.createElement("a",{href:n.url},n.username)),o.default.createElement("div",{className:"user-card-title"},o.default.createElement(s.default,{rank:r,title:n.title})),o.default.createElement("div",{className:"user-card-stats"},o.default.createElement(i.default,{showStatus:t,user:n}))))))};var o=r(e("react")),l=r(e("../../avatar")),i=r(e("./stats")),s=r(e("./user-title"));function r(e){return e&&e.__esModule?e:{default:e}}},{"../../avatar":8,"./stats":276,"./user-title":277,react:"react"}],276:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.showStatus,n=e.user;return a.default.createElement("ul",{className:"list-unstyled"},a.default.createElement(s,{showStatus:t,user:n}),a.default.createElement(u,{user:n}),a.default.createElement("li",{className:"user-stat-divider"}),a.default.createElement(c,{user:n}),a.default.createElement(f,{user:n}),a.default.createElement(d,{user:n}))},n.Status=s,n.JoinDate=u,n.Posts=c,n.Threads=f,n.Followers=d,n.getStatClassName=p;var r,a=(r=e("react"))&&r.__esModule?r:{default:r},o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../user-status"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){var t=e.showStatus,n=e.user;return t?a.default.createElement("li",{className:"user-stat-status"},a.default.createElement(o.default,{status:n.status},a.default.createElement(o.StatusLabel,{status:n.status,user:n}))):null}function u(e){var t=e.user.joined_on,n=interpolate(gettext("Joined on %(joined_on)s"),{joined_on:t.format("LL, LT")},!0),r=interpolate(gettext("Joined %(joined_on)s"),{joined_on:t.fromNow()},!0);return a.default.createElement("li",{className:"user-stat-join-date"},a.default.createElement("abbr",{title:n},r))}function c(e){var t=e.user,n=p("user-stat-posts",t.posts),r=ngettext("%(posts)s post","%(posts)s posts",t.posts);return a.default.createElement("li",{className:n},interpolate(r,{posts:t.posts},!0))}function f(e){var t=e.user,n=p("user-stat-threads",t.threads),r=ngettext("%(threads)s thread","%(threads)s threads",t.threads);return a.default.createElement("li",{className:n},interpolate(r,{threads:t.threads},!0))}function d(e){var t=e.user,n=p("user-stat-followers",t.followers),r=ngettext("%(followers)s follower","%(followers)s followers",t.followers);return a.default.createElement("li",{className:n},interpolate(r,{followers:t.followers},!0))}function p(e,t){return 0===t?e+" user-stat-empty":e}},{"../../user-status":268,react:"react"}],277:[function(e,t,n){arguments[4][124][0].apply(n,arguments)},{dup:124,react:"react"}],278:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var t=e.cols,n=e.isReady,r=e.showStatus,a=e.users,o="col-xs-12 col-sm-4";4===t&&(o+=" col-md-3");return n?l.default.createElement("div",{className:"users-cards-list ui-ready"},l.default.createElement("div",{className:"row"},a.map(function(e){return l.default.createElement("div",{className:o,key:e.id},l.default.createElement(i.default,{showStatus:r,user:e}))}))):l.default.createElement(s.default,{colClassName:o,cols:t})};var l=r(e("react")),i=r(e("./card")),s=r(e("./preview"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./card":275,"./preview":280,react:"react"}],279:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../../avatar")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../utils/random"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==u(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,n,r=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return o.default.createElement("div",{className:"panel user-card user-card-preview"},o.default.createElement("div",{className:"panel-body"},o.default.createElement("div",{className:"row"},o.default.createElement("div",{className:"col-xs-3 user-card-left"},o.default.createElement("div",{className:"user-card-small-avatar"},o.default.createElement("span",null,o.default.createElement(l.default,{size:"50",size2x:"80"})))),o.default.createElement("div",{className:"col-xs-9 col-sm-12 user-card-body"},o.default.createElement("div",{className:"user-card-avatar"},o.default.createElement("span",null,o.default.createElement(l.default,{size:"150",size2x:"200"}))),o.default.createElement("div",{className:"user-card-username"},o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(60,150)+"px"}}," ")),o.default.createElement("div",{className:"user-card-title"},o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(60,150)+"px"}}," ")),o.default.createElement("div",{className:"user-card-stats"},o.default.createElement("ul",{className:"list-unstyled"},o.default.createElement("li",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(30,70)+"px"}}," ")),o.default.createElement("li",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(30,70)+"px"}}," ")),o.default.createElement("li",{className:"user-stat-divider"}),o.default.createElement("li",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(30,70)+"px"}}," ")),o.default.createElement("li",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(30,70)+"px"}}," "))))))))}}])&&c(e.prototype,t),n&&c(e,n),a}();n.default=a},{"../../../utils/random":382,"../../avatar":8,react:"react"}],280:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=e.colClassName,t=e.cols,r=Array.apply(null,{length:t}).map(Number.call,Number);return a.default.createElement("div",{className:"users-cards-list ui-preview"},a.default.createElement("div",{className:"row"},r.map(function(e){var t=n;return 0!==e&&(t+=" hidden-xs"),3===e&&(t+=" hidden-sm"),a.default.createElement("div",{className:t,key:e},a.default.createElement(o.default,null))})))};var a=r(e("react")),o=r(e("./card"));function r(e){return e&&e.__esModule?e:{default:e}}},{"./card":279,react:"react"}],281:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,n,r=u(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getEmptyMessage",value:function(){return interpolate(gettext("No users have posted any new messages during last %(days)s days."),{days:this.props.trackedPeriod},!0)}},{key:"render",value:function(){return o.default.createElement("div",{className:"active-posters-list"},o.default.createElement("div",{className:"container"},o.default.createElement("p",{className:"lead"},this.getEmptyMessage())))}}])&&l(e.prototype,t),n&&l(e,n),a}();n.default=a},{react:"react"}],282:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../../avatar")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../utils/random"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==u(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,n,r=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"getClassName",value:function(){return this.props.hiddenOnMobile?"list-group-item hidden-xs hidden-sm":"list-group-item"}},{key:"render",value:function(){return o.default.createElement("li",{className:this.getClassName()},o.default.createElement("div",{className:"rank-user-avatar"},o.default.createElement("span",null,o.default.createElement(l.default,{size:"50"}))),o.default.createElement("div",{className:"rank-user"},o.default.createElement("div",{className:"user-name"},o.default.createElement("span",{className:"item-title"},o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(30,80)+"px"}}," "))),o.default.createElement("div",{className:"user-details"},o.default.createElement("span",{className:"user-status"},o.default.createElement("span",{className:"status-icon ui-preview-text"}," "),o.default.createElement("span",{className:"status-label ui-preview-text hidden-xs hidden-sm",style:{width:i.int(30,50)+"px"}}," ")),o.default.createElement("span",{className:"rank-name"},o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(30,50)+"px"}}," ")),o.default.createElement("span",{className:"user-title hidden-xs hidden-sm"},o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(30,50)+"px"}}," "))),o.default.createElement("div",{className:"user-compact-stats visible-xs-block"},o.default.createElement("span",{className:"rank-position"},o.default.createElement("strong",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(20,30)+"px"}}," ")),o.default.createElement("small",null,gettext("Rank"))),o.default.createElement("span",{className:"rank-posts-counted"},o.default.createElement("strong",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(20,30)+"px"}}," ")),o.default.createElement("small",null,gettext("Ranked posts"))))),o.default.createElement("div",{className:"rank-position hidden-xs"},o.default.createElement("strong",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(20,30)+"px"}}," ")),o.default.createElement("small",null,gettext("Rank"))),o.default.createElement("div",{className:"rank-posts-counted hidden-xs"},o.default.createElement("strong",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(20,30)+"px"}}," ")),o.default.createElement("small",null,gettext("Ranked posts"))),o.default.createElement("div",{className:"rank-posts-total hidden-xs"},o.default.createElement("strong",null,o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(20,30)+"px"}}," ")),o.default.createElement("small",null,gettext("Total posts"))))}}])&&c(e.prototype,t),n&&c(e,n),a}();n.default=a},{"../../../utils/random":382,"../../avatar":8,react:"react"}],283:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=a(e("react")),l=e("react-router"),i=a(e("../../avatar")),s=r(e("../../user-status")),u=a(e("../../..")),c=r(e("../../../utils/random"));function f(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!==d(e)&&"function"!=typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e){Object.prototype.hasOwnProperty.call(e,o)&&((n=a?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o])}return r.default=e,t&&t.set(e,r),r}function a(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=y(o);return t=l?(e=y(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==d(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,o.default.Component);var e,t,n,r=h(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getClassName",value:function(){return this.props.rank.css_class?"list-group-item list-group-rank-"+this.props.rank.css_class:"list-group-item"}},{key:"getUserStatus",value:function(){return this.props.user.status?o.default.createElement(s.default,{user:this.props.user,status:this.props.user.status},o.default.createElement(s.StatusIcon,{user:this.props.user,status:this.props.user.status}),o.default.createElement(s.StatusLabel,{user:this.props.user,status:this.props.user.status,className:"status-label hidden-xs hidden-sm"})):o.default.createElement("span",{className:"user-status"},o.default.createElement("span",{className:"status-icon ui-preview-text"}," "),o.default.createElement("span",{className:"status-label ui-preview-text hidden-xs hidden-sm",style:{width:c.int(30,50)+"px"}}," "))}},{key:"getRankName",value:function(){if(!this.props.rank.is_tab)return o.default.createElement("span",{className:"rank-name item-title"},this.props.rank.name);var e=u.default.get("USERS_LIST_URL")+this.props.rank.slug+"/";return o.default.createElement(l.Link,{to:e,className:"rank-name item-title"},this.props.rank.name)}},{key:"getUserTitle",value:function(){return this.props.user.title?o.default.createElement("span",{className:"user-title hidden-xs hidden-sm"},this.props.user.title):null}},{key:"render",value:function(){return o.default.createElement("li",{className:this.getClassName()},o.default.createElement("div",{className:"rank-user-avatar"},o.default.createElement("a",{href:this.props.user.url},o.default.createElement(i.default,{user:this.props.user,size:50,size2x:64}))),o.default.createElement("div",{className:"rank-user"},o.default.createElement("div",{className:"user-name"},o.default.createElement("a",{href:this.props.user.url,className:"item-title"},this.props.user.username)),o.default.createElement("div",{className:"user-details"},this.getUserStatus(),this.getRankName(),this.getUserTitle()),o.default.createElement("div",{className:"user-compact-stats visible-xs-block"},o.default.createElement("span",{className:"rank-position"},o.default.createElement("strong",null,"#",this.props.counter),o.default.createElement("small",null,gettext("Rank"))),o.default.createElement("span",{className:"rank-posts-counted"},o.default.createElement("strong",null,this.props.user.meta.score),o.default.createElement("small",null,gettext("Ranked posts"))))),o.default.createElement("div",{className:"rank-position hidden-xs"},o.default.createElement("strong",null,"#",this.props.counter),o.default.createElement("small",null,gettext("Rank"))),o.default.createElement("div",{className:"rank-posts-counted hidden-xs"},o.default.createElement("strong",null,this.props.user.meta.score),o.default.createElement("small",null,gettext("Ranked posts"))),o.default.createElement("div",{className:"rank-posts-total hidden-xs"},o.default.createElement("strong",null,this.props.user.posts),o.default.createElement("small",null,gettext("Total posts"))))}}])&&p(e.prototype,t),n&&p(e,n),a}();n.default=b},{"../../..":296,"../../../utils/random":382,"../../avatar":8,"../../user-status":268,react:"react","react-router":"react-router"}],284:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("./list-item-preview")),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==u(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../../utils/random"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==u(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,n,r=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return o.default.createElement("div",{className:"active-posters-list"},o.default.createElement("div",{className:"container"},o.default.createElement("p",{className:"lead ui-preview"},o.default.createElement("span",{className:"ui-preview-text",style:{width:i.int(50,220)+"px"}}," ")),o.default.createElement("div",{className:"active-posters ui-preview"},o.default.createElement("ul",{className:"list-group"},[0,1,2].map(function(e){return o.default.createElement(l.default,{hiddenOnMobile:0<e,key:e})})))))}}])&&c(e.prototype,t),n&&c(e,n),a}();n.default=a},{"../../../utils/random":382,"./list-item-preview":282,react:"react"}],285:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("./list-item"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"getLeadMessage",value:function(){var e=ngettext("%(posters)s top poster from last %(days)s days.","%(posters)s top posters from last %(days)s days.",this.props.count);return interpolate(e,{posters:this.props.count,days:this.props.trackedPeriod},!0)}},{key:"render",value:function(){return o.default.createElement("div",{className:"active-posters-list"},o.default.createElement("div",{className:"container"},o.default.createElement("p",{className:"lead"},this.getLeadMessage()),o.default.createElement("div",{className:"active-posters ui-ready"},o.default.createElement("ul",{className:"list-group"},this.props.users.map(function(e,t){return o.default.createElement(l.default,{user:e,rank:e.rank,counter:t+1,key:e.id})})))))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"./list-item":283,react:"react"}],286:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("react")),a=o(e("./list-empty")),i=o(e("./list-preview")),s=o(e("./list-ready")),u=o(e("../../..")),c=e("../../../reducers/users"),f=o(e("../../../services/polls")),d=o(e("../../../services/store")),p=o(e("../../../services/page-title"));function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=g(o);return t=l?(e=g(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==m(r)&&"function"!=typeof r?v(n):r}}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,r.default.Component);var e,t,n,o=b(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=v(t),a=function(e){d.default.dispatch((0,c.hydrate)(e.results)),t.setState({isLoaded:!0,trackedPeriod:e.tracked_period,count:e.count})},(r="update")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,u.default.has("USERS")?t.initWithPreloadedData(u.default.pop("USERS")):t.initWithoutPreloadedData(),t.startPolling(),t}return e=l,(t=[{key:"initWithPreloadedData",value:function(e){this.state={isLoaded:!0,trackedPeriod:e.tracked_period,count:e.count},d.default.dispatch((0,c.hydrate)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1}}},{key:"startPolling",value:function(){f.default.start({poll:"active-posters",url:u.default.get("USERS_API"),data:{list:"active"},frequency:9e4,update:this.update})}},{key:"componentDidMount",value:function(){p.default.set({title:this.props.route.extra.name,parent:gettext("Users")})}},{key:"componentWillUnmount",value:function(){f.default.stop("active-posters")}},{key:"render",value:function(){return this.state.isLoaded?0<this.state.count?r.default.createElement(s.default,{users:this.props.users,trackedPeriod:this.state.trackedPeriod,count:this.state.count}):r.default.createElement(a.default,{trackedPeriod:this.state.trackedPeriod}):r.default.createElement(i.default,null)}}])&&h(e.prototype,t),n&&h(e,n),l}();n.default=l},{"../../..":296,"../../../reducers/users":358,"../../../services/page-title":368,"../../../services/polls":369,"../../../services/store":372,"./list-empty":281,"./list-preview":284,"./list-ready":285,react:"react"}],287:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n=e.baseUrl,t=e.lists;return r.default.createElement("ul",{className:"nav nav-pills"},t.map(function(e){var t=i(n,e);return r.default.createElement(o.default,{path:t,key:t},r.default.createElement(a.Link,{to:t},e.name))}))};var r=l(e("react")),a=e("react-router"),o=l(e("../li"));l(e("../.."));function l(e){return e&&e.__esModule?e:{default:e}}var i=function(e,t){var n=e;return"rank"===t.component?n+=t.slug:n+=t.component,n+"/"}},{"../..":296,"../li":51,react:"react","react-router":"react-router"}],288:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=r(e("../../users-list"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,o.default.Component);var e,t,n,r=c(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return o.default.createElement("div",null,o.default.createElement(l.default,{cols:4,isReady:!1}))}}])&&s(e.prototype,t),n&&s(e,n),a}();n.default=a},{"../../users-list":278,react:"react"}],289:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return r.default.createElement("div",null,r.default.createElement(o.default,{cols:4,isReady:!0,showStatus:!0,users:e.users}),r.default.createElement(a.default,e))};var r=l(e("react")),a=l(e("./pager")),o=l(e("../../users-list"));function l(e){return e&&e.__esModule?e:{default:e}}},{"../../users-list":278,"./pager":290,react:"react"}],290:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return 1===e.pages?null:r.default.createElement("div",{className:"row row-toolbar"},r.default.createElement("div",{className:"col-xs-12 text-center visible-xs-block"},r.default.createElement(d,{more:e.more}),r.default.createElement("div",{className:"toolbar-vertical-spacer"})),r.default.createElement("div",{className:"col-md-7"},r.default.createElement("div",{className:"row"},r.default.createElement("div",{className:"col-sm-4 col-md-5"},r.default.createElement(i,e)),r.default.createElement("div",{className:"col-sm-8 col-md-7 hidden-xs"},r.default.createElement(d,{more:e.more})))))},n.Pager=i,n.FirstPage=s,n.PreviousPage=u,n.NextPage=c,n.LastPage=f,n.More=d;var r=l(e("react")),a=e("react-router"),o=l(e("../../../utils/reset-scroll"));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){return r.default.createElement("div",{className:"row row-paginator"},r.default.createElement("div",{className:"col-xs-3"},r.default.createElement(s,e)),r.default.createElement("div",{className:"col-xs-3"},r.default.createElement(u,e)),r.default.createElement("div",{className:"col-xs-3"},r.default.createElement(c,e)),r.default.createElement("div",{className:"col-xs-3"},r.default.createElement(f,e)))}function s(e){return e.isLoaded&&e.first?r.default.createElement(a.Link,{className:"btn btn-default btn-block btn-icon btn-outline",onClick:o.default,to:e.baseUrl,title:gettext("Go to first page")},r.default.createElement("span",{className:"material-icon"},"first_page")):r.default.createElement("span",{className:"btn btn-default btn-block btn-icon btn-outline disabled",title:gettext("Go to first page")},r.default.createElement("span",{className:"material-icon"},"first_page"))}function u(e){if(e.isLoaded&&1<e.page){var t="";return e.previous&&(t=e.previous+"/"),r.default.createElement(a.Link,{className:"btn btn-default btn-block btn-icon btn-outline",onClick:o.default,to:e.baseUrl+t,title:gettext("Go to previous page")},r.default.createElement("span",{className:"material-icon"},"chevron_left"))}return r.default.createElement("span",{className:"btn btn-default btn-block btn-icon btn-outline disabled",title:gettext("Go to previous page")},r.default.createElement("span",{className:"material-icon"},"chevron_left"))}function c(e){if(e.isLoaded&&e.more){var t="";return e.next&&(t=e.next+"/"),r.default.createElement(a.Link,{className:"btn btn-default btn-block btn-icon btn-outline",onClick:o.default,to:e.baseUrl+t,title:gettext("Go to next page")},r.default.createElement("span",{className:"material-icon"},"chevron_right"))}return r.default.createElement("span",{className:"btn btn-default btn-block btn-icon btn-outline disabled",title:gettext("Go to next page")},r.default.createElement("span",{className:"material-icon"},"chevron_right"))}function f(e){return e.isLoaded&&e.last?r.default.createElement(a.Link,{className:"btn btn-default btn-block btn-icon btn-outline",onClick:o.default,to:e.baseUrl+e.last+"/",title:gettext("Go to last page")},r.default.createElement("span",{className:"material-icon"},"last_page")):r.default.createElement("span",{className:"btn btn-default btn-block btn-icon btn-outline disabled",title:gettext("Go to last page")},r.default.createElement("span",{className:"material-icon"},"last_page"))}function d(e){var t=null,t=e.more?(t=ngettext("There is %(more)s more member with this role.","There are %(more)s more members with this role.",e.more),interpolate(t,{more:e.more},!0)):gettext("There are no more members with this role.");return r.default.createElement("p",null,t)}},{"../../../utils/reset-scroll":383,react:"react","react-router":"react-router"}],291:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=o(e("react")),a=o(e("../../page-lead")),i=o(e("./list")),s=o(e("./list-loading")),u=o(e("../../..")),c=e("../../../reducers/users"),f=o(e("../../../services/polls")),d=o(e("../../../services/store")),p=o(e("../../../services/page-title"));function o(e){return e&&e.__esModule?e:{default:e}}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=_(o);return t=l?(e=_(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==m(r)&&"function"!=typeof r?g(n):r}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var l=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(l,r.default.Component);var e,t,n,o=v(l);function l(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),n=g(t),a=function(e){d.default.dispatch((0,c.hydrate)(e.results)),e.isLoaded=!0,t.setState(e)},(r="update")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,u.default.has("USERS")?t.initWithPreloadedData(u.default.pop("USERS")):t.initWithoutPreloadedData(),t.startPolling(e.params.page||1),t}return e=l,(t=[{key:"initWithPreloadedData",value:function(e){this.state=Object.assign(e,{isLoaded:!0}),d.default.dispatch((0,c.hydrate)(e.results))}},{key:"initWithoutPreloadedData",value:function(){this.state={isLoaded:!1}}},{key:"startPolling",value:function(e){f.default.start({poll:"rank-users",url:u.default.get("USERS_API"),data:{rank:this.props.route.rank.id,page:e},frequency:9e4,update:this.update})}},{key:"componentDidMount",value:function(){p.default.set({title:this.props.route.rank.name,page:this.props.params.page||null,parent:gettext("Users")})}},{key:"componentWillUnmount",value:function(){f.default.stop("rank-users")}},{key:"componentWillReceiveProps",value:function(e){this.props.params.page!==e.params.page&&(p.default.set({title:this.props.route.rank.name,page:e.params.page||null,parent:gettext("Users")}),this.setState({isLoaded:!1}),f.default.stop("rank-users"),this.startPolling(e.params.page))}},{key:"getClassName",value:function(){return this.props.route.rank.css_class?"rank-users-list rank-users-"+this.props.route.rank.css_class:"rank-users-list"}},{key:"getRankDescription",value:function(){return this.props.route.rank.description?r.default.createElement("div",{className:"rank-description"},r.default.createElement(a.default,{copy:this.props.route.rank.description.html})):null}},{key:"getComponent",value:function(){if(this.state.isLoaded){if(0<this.state.count){var e=u.default.get("USERS_LIST_URL")+this.props.route.rank.slug+"/";return r.default.createElement(i.default,h({baseUrl:e,users:this.props.users},this.state))}return r.default.createElement("p",{className:"lead"},gettext("There are no users with this rank at the moment."))}return r.default.createElement(s.default,null)}},{key:"render",value:function(){return r.default.createElement("div",{className:this.getClassName()},r.default.createElement("div",{className:"container"},this.getRankDescription(),this.getComponent()))}}])&&y(e.prototype,t),n&&y(e,n),l}();n.default=l},{"../../..":296,"../../../reducers/users":358,"../../../services/page-title":368,"../../../services/polls":369,"../../../services/store":372,"../../page-lead":86,"./list":289,"./list-loading":288,react:"react"}],292:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.select=b,n.paths=function(){var t=[];return u.default.get("USERS_LISTS").forEach(function(e){"rank"===e.component?(t.push({path:u.default.get("USERS_LIST_URL")+e.slug+"/:page/",component:(0,r.connect)(b)(i.default),rank:e}),t.push({path:u.default.get("USERS_LIST_URL")+e.slug+"/",component:(0,r.connect)(b)(i.default),rank:e})):"active-posters"===e.component&&t.push({path:u.default.get("USERS_LIST_URL")+e.component+"/",component:(0,r.connect)(b)(a.default),extra:{name:e.name}})}),t},n.default=void 0;var o=c(e("react")),r=e("react-redux"),l=(c(e("../dropdown-toggle")),c(e("./nav"))),a=c(e("./active-posters/root")),i=c(e("./rank/root")),s=c(e("../with-dropdown")),u=c(e("../.."));function c(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=h(o);return t=l?(e=h(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==f(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,s.default);var e,t,n,r=m(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"render",value:function(){return o.default.createElement("div",{className:"page page-users-lists"},o.default.createElement("div",{className:"page-header-bg"},o.default.createElement("div",{className:"page-header"},o.default.createElement("div",{className:"container"},o.default.createElement("h1",null,gettext("Users"))),o.default.createElement("div",{className:"page-tabs"},o.default.createElement("div",{className:"container"},o.default.createElement(l.default,{lists:u.default.get("USERS_LISTS"),baseUrl:u.default.get("USERS_LIST_URL")}))))),this.props.children)}}])&&d(e.prototype,t),n&&d(e,n),a}();function b(e){return{tick:e.tick.tick,user:e.auth.user,users:e.users}}n.default=y},{"../..":296,"../dropdown-toggle":29,"../with-dropdown":293,"./active-posters/root":286,"./nav":287,"./rank/root":291,react:"react","react-redux":"react-redux"}],293:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,o=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=f(o);return t=l?(e=f(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?c(n):r}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(a,o.default.Component);var e,t,n,r=u(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),d(c(t=r.call(this,e)),"toggleNav",function(){t.setState({dropdown:!t.state.dropdown})}),d(c(t),"hideNav",function(){t.setState({dropdown:!1})}),t.state={dropdown:!1},t}return e=a,(t=[{key:"getCompactNavClassName",value:function(){return this.state.dropdown?"compact-nav open":"compact-nav"}}])&&l(e.prototype,t),n&&l(e,n),a}();n.default=a},{react:"react"}],294:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("react"))&&r.__esModule?r:{default:r};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=s(o);return t=l?(e=s(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?c(n):r}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(s,a.default.Component);var e,t,n,i=u(s);function s(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);for(var t,n,r,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return e=i.call.apply(i,[this].concat(o)),t=c(e),r=function(){e.props.onChange({target:{value:!e.props.value}})},(n="toggle")in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return e=s,(t=[{key:"getClassName",value:function(){return this.props.value?"btn btn-yes-no btn-yes-no-on":"btn btn-yes-no btn-yes-no-off"}},{key:"getIcon",value:function(){return this.props.value?this.props.iconOn||"check_box":this.props.iconOff||"check_box_outline_blank"}},{key:"getLabel",value:function(){return this.props.value?this.props.labelOn||gettext("yes"):this.props.labelOff||gettext("no")}},{key:"render",value:function(){return a.default.createElement("button",{type:"button",onClick:this.toggle,className:this.getClassName(),id:this.props.id||null,"aria-describedby":this.props["aria-describedby"]||null,disabled:this.props.disabled||!1},a.default.createElement("span",{className:"material-icon"},this.getIcon()),a.default.createElement("span",{className:"btn-text"},this.getLabel()))}}])&&o(e.prototype,t),n&&o(e,n),s}();n.default=f},{react:"react"}],295:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("react")),l=e("../reducers/profile-details"),i=r(e("../services/ajax")),s=r(e("../services/snackbar"));function r(e){return e&&e.__esModule?e:{default:e}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=p(o);return t=l?(e=p(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==u(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var a=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,o.default.Component);var e,t,n,r=d(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),r.apply(this,arguments)}return e=a,(t=[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=e.dispatch,r=e.user;t&&t.id===r.id||i.default.get(this.props.user.api.details).then(function(e){n((0,l.load)(e))},function(e){s.default.apiError(e)})}},{key:"render",value:function(){return this.props.children}}])&&c(e.prototype,t),n&&c(e,n),a}();n.default=a},{"../reducers/profile-details":349,"../services/ajax":359,"../services/snackbar":371,react:"react"}],296:[function(l,e,i){(function(e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.Misago=void 0;var t,a=(t=l("./utils/ordered-list"))&&t.__esModule?t:{default:t};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initializers=[],this._context={}}var t,n,r;return t=e,(n=[{key:"addInitializer",value:function(e){this._initializers.push({key:e.name,item:e.initializer,after:e.after,before:e.before})}},{key:"init",value:function(e){var t=this;this._context=e,new a.default(this._initializers).orderedValues().forEach(function(e){e(t)})}},{key:"has",value:function(e){return!!this._context[e]}},{key:"get",value:function(e,t){return this.has(e)?this._context[e]:t||void 0}},{key:"pop",value:function(e){if(this.has(e)){var t=this._context[e];return this._context[e]=null,t}}}])&&o(t.prototype,n),r&&o(t,r),e}(),r=new(i.Misago=n);e.misago=r,i.default=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./utils/ordered-list":381}],297:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var r=o(e("./..")),a=o(e("../services/ajax"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){a.default.init(r.default.get("CSRF_COOKIE_NAME"))}r.default.addInitializer({name:"ajax",initializer:l})},{"../services/ajax":359,"./..":296}],298:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var r=s(e("./..")),a=e("../reducers/auth"),o=s(e("../services/ajax")),l=s(e("../services/snackbar")),i=s(e("../services/store"));function s(e){return e&&e.__esModule?e:{default:e}}var u=45;function c(e){e.get("isAuthenticated")&&window.setInterval(function(){o.default.get(e.get("AUTH_API")).then(function(e){i.default.dispatch((0,a.patch)(e))},function(e){l.default.apiError(e)})},1e3*u)}r.default.addInitializer({name:"auth-sync",initializer:c,after:"auth"})},{"../reducers/auth":344,"../services/ajax":359,"../services/snackbar":371,"../services/store":372,"./..":296}],299:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var r=s(e("./..")),a=s(e("../services/auth")),o=s(e("../services/modal")),l=s(e("../services/store")),i=s(e("../services/local-storage"));function s(e){return e&&e.__esModule?e:{default:e}}function u(){a.default.init(l.default,i.default,o.default)}r.default.addInitializer({name:"auth",initializer:u,after:"store"})},{"../services/auth":360,"../services/local-storage":363,"../services/modal":366,"../services/store":372,"./..":296}],300:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var r=s(e("./..")),a=s(e("../services/ajax")),o=s(e("../services/captcha")),l=s(e("../services/include")),i=s(e("../services/snackbar"));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){o.default.init(e,a.default,l.default,i.default)}r.default.addInitializer({name:"captcha",initializer:u})},{"../services/ajax":359,"../services/captcha":361,"../services/include":362,"../services/snackbar":371,"./..":296}],301:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var r=i(e("react")),a=i(e("../..")),o=i(e("../../components/accept-agreement")),l=i(e("../../utils/mount-component"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){document.getElementById("required-agreement-mount")&&(0,l.default)(r.default.createElement(o.default,{api:e.get("REQUIRED_AGREEMENT_API")}),"required-agreement-mount",!1)}a.default.addInitializer({name:"component:accept-agreement",initializer:s,after:"store"})},{"../..":296,"../../components/accept-agreement":5,"../../utils/mount-component":380,react:"react"}],302:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var r=e("react-redux"),a=u(e("../..")),o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../components/auth-message")),i=u(e("../../utils/mount-component"));function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}function c(){(0,i.default)((0,r.connect)(o.select)(o.default),"auth-message-mount")}a.default.addInitializer({name:"component:auth-message",initializer:c,after:"store"})},{"../..":296,"../../components/auth-message":7,"../../utils/mount-component":380,"react-redux":"react-redux"}],303:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var r=o(e("../..")),a=o(e("../../utils/banned-page"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){e.has("BAN_MESSAGE")&&(0,a.default)(e.get("BAN_MESSAGE"),!1)}r.default.addInitializer({name:"component:banmed-page",initializer:l,after:"store"})},{"../..":296,"../../utils/banned-page":374}],304:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var r=e("react-redux"),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../components/categories")),o=s(e("../..")),i=s(e("../../utils/mount-component"));function s(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(){document.getElementById("categories-mount")&&(0,i.default)((0,r.connect)(a.select)(a.default),"categories-mount")}o.default.addInitializer({name:"component:categories",initializer:c,after:"store"})},{"../..":296,"../../components/categories":22,"../../utils/mount-component":380,"react-redux":"react-redux"}],305:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../components/options/root")),a=i(e("../..")),o=i(e("../../utils/routed-component"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){e.has("USER_OPTIONS")&&(0,o.default)({root:a.default.get("USERCP_URL"),component:r.default,paths:(0,r.paths)()})}a.default.addInitializer({name:"component:options",initializer:u,after:"store"})},{"../..":296,"../../components/options/root":81,"../../utils/routed-component":384}],306:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=c;var r=e("react-redux"),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../components/profile/root")),o=s(e("../..")),i=s(e("../../utils/routed-component"));function s(e){return e&&e.__esModule?e:{default:e}}function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e){e.has("PROFILE")&&e.has("PROFILE_PAGES")&&(0,i.default)({root:o.default.get("PROFILE").url,component:(0,r.connect)(a.select)(a.default),paths:(0,a.paths)()})}o.default.addInitializer({name:"component:profile",initializer:c,after:"reducer:profile-hydrate"})},{"../..":296,"../../components/profile/root":189,"../../utils/routed-component":384,"react-redux":"react-redux"}],307:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=l(e("../..")),a=l(e("../../components/request-activation-link")),o=l(e("../../utils/mount-component"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){document.getElementById("request-activation-link-mount")&&(0,o.default)(a.default,"request-activation-link-mount",!1)}r.default.addInitializer({name:"component:request-activation-link",initializer:i,after:"store"})},{"../..":296,"../../components/request-activation-link":194,"../../utils/mount-component":380}],308:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=l(e("../..")),a=l(e("../../components/request-password-reset")),o=l(e("../../utils/mount-component"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){document.getElementById("request-password-reset-mount")&&(0,o.default)(a.default,"request-password-reset-mount",!1)}r.default.addInitializer({name:"component:request-password-reset",initializer:i,after:"store"})},{"../..":296,"../../components/request-password-reset":195,"../../utils/mount-component":380}],309:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=l(e("../..")),a=l(e("../../components/reset-password-form")),o=l(e("../../utils/mount-component"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){document.getElementById("reset-password-form-mount")&&(0,o.default)(a.default,"reset-password-form-mount",!1)}r.default.addInitializer({name:"component:reset-password-form",initializer:i,after:"store"})},{"../..":296,"../../components/reset-password-form":196,"../../utils/mount-component":380}],310:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=l(e("../../components/search")),a=l(e("../..")),o=l(e("../../utils/routed-component"));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){"misago:search"===e.get("CURRENT_LINK")&&(0,o.default)({paths:(0,r.default)(a.default.get("SEARCH_PROVIDERS"))})}a.default.addInitializer({name:"component:search",initializer:i,after:"store"})},{"../..":296,"../../components/search":198,"../../utils/routed-component":384}],311:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var r=e("react-redux"),a=i(e("../..")),o=e("../../components/snackbar"),l=i(e("../../utils/mount-component"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){(0,l.default)((0,r.connect)(o.select)(o.Snackbar),"snackbar-mount")}a.default.addInitializer({name:"component:snackbar",initializer:s,after:"snackbar"})},{"../..":296,"../../components/snackbar":206,"../../utils/mount-component":380,"react-redux":"react-redux"}],312:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var r=i(e("react")),a=i(e("../../components/social-auth")),o=i(e("../..")),l=i(e("../../utils/mount-component"));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){var t;"misago:social-complete"===e.get("CURRENT_LINK")&&(t=e.get("SOCIAL_AUTH_FORM"),(0,l.default)(r.default.createElement(a.default,t),"page-mount"))}o.default.addInitializer({name:"component:social-auth",initializer:s,after:"store"})},{"../..":296,"../../components/social-auth":209,"../../utils/mount-component":380,react:"react"}],313:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=e("../../components/thread/root"),a=l(e("../..")),o=l(e("../../utils/routed-component"));function l(e){return e&&e.__esModule?e:{default:e}}function i(e){e.has("THREAD")&&e.has("POSTS")&&(0,o.default)({paths:(0,r.paths)()})}a.default.addInitializer({name:"component:thread",initializer:i,after:"store"})},{"../..":296,"../../components/thread/root":227,"../../utils/routed-component":384}],314:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s,n.getListOptions=u;var r=e("../../components/threads/root"),a=l(e("../..")),o=l(e("../../utils/routed-component"));function l(e){return e&&e.__esModule?e:{default:e}}var i="misago:private-threads";function s(e){e.has("THREADS")&&e.has("CATEGORIES")&&(0,o.default)({paths:(0,r.paths)(e.get("user"),u(e))})}function u(e){return e.get("CURRENT_LINK").substr(0,i.length)===i?{api:e.get("PRIVATE_THREADS_API"),startThread:{mode:"START_PRIVATE",submit:a.default.get("PRIVATE_THREADS_API")},title:gettext("Private threads"),pageLead:gettext("Private threads are threads which only those that started them and those they have invited may see and participate in."),emptyMessage:gettext("You aren't participating in any private threads.")}:{api:e.get("THREADS_API")}}a.default.addInitializer({name:"component:threads",initializer:s,after:"store"})},{"../..":296,"../../components/threads/root":261,"../../utils/routed-component":384}],315:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var r=e("react-redux"),a=i(e("../..")),o=e("../../components/user-menu/root"),l=i(e("../../utils/mount-component"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){(0,l.default)((0,r.connect)(o.select)(o.UserMenu),"user-menu-mount"),(0,l.default)((0,r.connect)(o.select)(o.CompactUserMenu),"user-menu-compact-mount")}a.default.addInitializer({name:"component:user-menu",initializer:s,after:"store"})},{"../..":296,"../../components/user-menu/root":266,"../../utils/mount-component":380,"react-redux":"react-redux"}],316:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../components/users/root")),a=i(e("../..")),o=i(e("../../utils/routed-component"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){e.has("USERS_LISTS")&&(0,o.default)({root:a.default.get("USERS_LIST_URL"),component:r.default,paths:(0,r.paths)()})}a.default.addInitializer({name:"component:users",initializer:u,after:"store"})},{"../..":296,"../../components/users/root":292,"../../utils/routed-component":384}],317:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var r=o(e("./..")),a=o(e("../services/include"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){a.default.init(e.get("STATIC_URL"))}r.default.addInitializer({name:"include",initializer:l})},{"../services/include":362,"./..":296}],318:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var r=o(e("./..")),a=o(e("../services/local-storage"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){a.default.init("misago_")}r.default.addInitializer({name:"local-storage",initializer:l})},{"../services/local-storage":363,"./..":296}],319:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var r=o(e("./..")),a=o(e("../services/mobile-navbar-dropdown"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){var e=document.getElementById("mobile-navbar-dropdown-mount");e&&a.default.init(e)}r.default.addInitializer({name:"dropdown",initializer:l,before:"store"})},{"../services/mobile-navbar-dropdown":365,"./..":296}],320:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var r=o(e("./..")),a=o(e("../services/modal"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){var e=document.getElementById("modal-mount");e&&a.default.init(e)}r.default.addInitializer({name:"modal",initializer:l,before:"store"})},{"../services/modal":366,"./..":296}],321:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=o;var r=a(e("moment"));function a(e){return e&&e.__esModule?e:{default:e}}function o(){r.default.locale($("html").attr("lang"))}a(e("./..")).default.addInitializer({name:"moment",initializer:o})},{"./..":296,moment:"moment"}],322:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var r=o(e("./..")),a=o(e("../services/page-title"));function o(e){return e&&e.__esModule?e:{default:e}}function l(e){a.default.init(e.get("SETTINGS").forum_index_title,e.get("SETTINGS").forum_name)}r.default.addInitializer({name:"page-title",initializer:l})},{"../services/page-title":368,"./..":296}],323:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var r=i(e("./..")),a=i(e("../services/ajax")),o=i(e("../services/snackbar")),l=i(e("../services/polls"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){l.default.init(a.default,o.default)}r.default.addInitializer({name:"polls",initializer:s})},{"../services/ajax":359,"../services/polls":369,"../services/snackbar":371,"./..":296}],324:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var r=i(e("./..")),a=i(e("../services/ajax")),o=i(e("../services/posting")),l=i(e("../services/snackbar"));function i(e){return e&&e.__esModule?e:{default:e}}function s(){o.default.init(a.default,l.default,document.getElementById("posting-placeholder"))}r.default.addInitializer({name:"posting",initializer:s})},{"../services/ajax":359,"../services/posting":370,"../services/snackbar":371,"./..":296}],325:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var r=s(e("../..")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../reducers/auth")),o=s(e("../../services/store"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function u(e){o.default.addReducer("auth",a.default,Object.assign({isAuthenticated:e.get("isAuthenticated"),isAnonymous:!e.get("isAuthenticated"),user:e.get("user")},a.initialState))}r.default.addInitializer({name:"reducer:auth",initializer:u,before:"store"})},{"../..":296,"../../reducers/auth":344,"../../services/store":372}],326:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=l(e("../..")),a=l(e("../../reducers/participants")),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){var e=null;r.default.has("THREAD")&&(e=r.default.get("THREAD").participants),o.default.addReducer("participants",a.default,e||[])}r.default.addInitializer({name:"reducer:participants",initializer:i,before:"store"})},{"../..":296,"../../reducers/participants":345,"../../services/store":372}],327:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var r=s(e("../..")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../reducers/poll")),o=s(e("../../services/store"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function u(){var e=null,e=r.default.has("THREAD")&&r.default.get("THREAD").poll?(0,a.hydrate)(r.default.get("THREAD").poll):{isBusy:!1};o.default.addReducer("poll",a.default,e)}r.default.addInitializer({name:"reducer:poll",initializer:u,before:"store"})},{"../..":296,"../../reducers/poll":346,"../../services/store":372}],328:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var r=s(e("../..")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../reducers/posts")),o=s(e("../../services/store"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function u(){var e=null,e=r.default.has("POSTS")?(0,a.hydrate)(r.default.get("POSTS")):{isLoaded:!1,isBusy:!1};o.default.addReducer("posts",a.default,e)}r.default.addInitializer({name:"reducer:posts",initializer:u,before:"store"})},{"../..":296,"../../reducers/posts":348,"../../services/store":372}],329:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=l(e("../..")),a=l(e("../../reducers/profile-details")),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){var e=null;r.default.has("PROFILE_DETAILS")&&(e=r.default.get("PROFILE_DETAILS")),o.default.addReducer("profile-details",a.default,e||{})}r.default.addInitializer({name:"reducer:profile-details",initializer:i,before:"store"})},{"../..":296,"../../reducers/profile-details":349,"../../services/store":372}],330:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=l(e("../..")),a=e("../../reducers/profile"),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){r.default.has("PROFILE")&&o.default.dispatch((0,a.hydrate)(r.default.get("PROFILE")))}r.default.addInitializer({name:"reducer:profile-hydrate",initializer:i,after:"store"})},{"../..":296,"../../reducers/profile":350,"../../services/store":372}],331:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=l(e("../..")),a=l(e("../../reducers/profile")),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){o.default.addReducer("profile",a.default,{})}r.default.addInitializer({name:"reducer:profile",initializer:i,before:"store"})},{"../..":296,"../../reducers/profile":350,"../../services/store":372}],332:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var r=s(e("../..")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../reducers/search")),o=s(e("../../services/store"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function u(){o.default.addReducer("search",a.default,Object.assign({},a.initialState,{providers:r.default.get("SEARCH_PROVIDERS")||[],query:r.default.get("SEARCH_QUERY")||""}))}r.default.addInitializer({name:"reducer:search",initializer:u,before:"store"})},{"../..":296,"../../reducers/search":351,"../../services/store":372}],333:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=l(e("../..")),a=l(e("../../reducers/selection")),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){o.default.addReducer("selection",a.default,[])}r.default.addInitializer({name:"reducer:selection",initializer:i,before:"store"})},{"../..":296,"../../reducers/selection":352,"../../services/store":372}],334:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var r=s(e("../..")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../reducers/snackbar")),o=s(e("../../services/store"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function u(){o.default.addReducer("snackbar",a.default,a.initialState)}r.default.addInitializer({name:"reducer:snackbar",initializer:u,before:"store"})},{"../..":296,"../../reducers/snackbar":353,"../../services/store":372}],335:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var r=s(e("../..")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../reducers/thread")),o=s(e("../../services/store"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function u(){var e=null,e=r.default.has("THREAD")?(0,a.hydrate)(r.default.get("THREAD")):{isBusy:!1};o.default.addReducer("thread",a.default,e)}r.default.addInitializer({name:"reducer:thread",initializer:u,before:"store"})},{"../..":296,"../../reducers/thread":354,"../../services/store":372}],336:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=l(e("../..")),a=l(e("../../reducers/threads")),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){o.default.addReducer("threads",a.default,[])}r.default.addInitializer({name:"reducer:threads",initializer:i,before:"store"})},{"../..":296,"../../reducers/threads":355,"../../services/store":372}],337:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=u;var r=s(e("../..")),a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("../../reducers/tick")),o=s(e("../../services/store"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function u(){o.default.addReducer("tick",a.default,a.initialState)}r.default.addInitializer({name:"reducer:tick",initializer:u,before:"store"})},{"../..":296,"../../reducers/tick":356,"../../services/store":372}],338:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=l(e("../..")),a=l(e("../../reducers/username-history")),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){o.default.addReducer("username-history",a.default,[])}r.default.addInitializer({name:"reducer:username-history",initializer:i,before:"store"})},{"../..":296,"../../reducers/username-history":357,"../../services/store":372}],339:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=l(e("../..")),a=l(e("../../reducers/users")),o=l(e("../../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){o.default.addReducer("users",a.default,[])}r.default.addInitializer({name:"reducer:users",initializer:i,before:"store"})},{"../..":296,"../../reducers/users":358,"../../services/store":372}],340:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=l(e("./..")),a=l(e("../services/snackbar")),o=l(e("../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){a.default.init(o.default)}r.default.addInitializer({name:"snackbar",initializer:i,after:"store"})},{"../services/snackbar":371,"../services/store":372,"./..":296}],341:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=l;var r=o(e("./..")),a=o(e("../services/store"));function o(e){return e&&e.__esModule?e:{default:e}}function l(){a.default.init()}r.default.addInitializer({name:"store",initializer:l,before:"_end"})},{"../services/store":372,"./..":296}],342:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=s;var r=l(e("./..")),a=e("../reducers/tick"),o=l(e("../services/store"));function l(e){return e&&e.__esModule?e:{default:e}}var i=5e4;function s(){window.setInterval(function(){o.default.dispatch((0,a.doTick)())},i)}r.default.addInitializer({name:"tick-start",initializer:s,after:"store"})},{"../reducers/tick":356,"../services/store":372,"./..":296}],343:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=i;var r=l(e("./..")),a=l(e("../services/include")),o=l(e("../services/zxcvbn"));function l(e){return e&&e.__esModule?e:{default:e}}function i(){o.default.init(a.default)}r.default.addInitializer({name:"zxcvbn",initializer:i})},{"../services/include":362,"../services/zxcvbn":373,"./..":296}],344:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.patch=function(e){return{type:i,patch:e}},n.signIn=function(e){return{type:s,user:e}},n.signOut=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return{type:u,soft:e}},n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:l,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case i:var n=Object.assign({},e);return n.user=Object.assign({},e.user,t.patch),n;case s:return Object.assign({},e,{signedIn:t.user});case u:return Object.assign({},e,{isAuthenticated:!1,isAnonymous:!0,signedOut:!t.soft});case o.UPDATE_AVATAR:if(e.isAuthenticated&&e.user.id===t.userId){var r=Object.assign({},e);return r.user=Object.assign({},e.user,{avatars:t.avatars}),r}return e;case o.UPDATE_USERNAME:if(e.isAuthenticated&&e.user.id===t.userId){var a=Object.assign({},e);return a.user=Object.assign({},e.user,{username:t.username,slug:t.slug}),a}return e;default:return e}},n.SIGN_OUT=n.SIGN_IN=n.PATCH_USER=n.initialState=void 0;var o=e("./users"),l={signedIn:!1,signedOut:!1};n.initialState=l;var i="PATCH_USER";n.PATCH_USER=i;var s="SIGN_IN";n.SIGN_IN=s;var u="SIGN_OUT";n.SIGN_OUT=u},{"./users":358}],345:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.replace=function(e){return{type:r,state:e}},n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case r:return t.state;default:return e}},n.REPLACE_PARTICIPANTS=void 0;var r="REPLACE_PARTICIPANTS";n.REPLACE_PARTICIPANTS=r},{}],346:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.hydrate=c,n.busy=function(){return{type:o}},n.release=function(){return{type:l}},n.replace=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return{type:s,state:t?e:c(e)}},n.update=function(e){return{type:u,data:e}},n.remove=function(){return{type:i}},n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case o:return Object.assign({},e,{isBusy:!0});case l:return Object.assign({},e,{isBusy:!1});case i:return{isBusy:!1};case s:return t.state;case u:return Object.assign({},e,t.data);default:return e}},n.UPDATE_POLL=n.REPLACE_POLL=n.REMOVE_POLL=n.RELEASE_POLL=n.BUSY_POLL=void 0;var r,a=(r=e("moment"))&&r.__esModule?r:{default:r};var o="BUSY_POLL";n.BUSY_POLL=o;var l="RELEASE_POLL";n.RELEASE_POLL=l;var i="REMOVE_POLL";n.REMOVE_POLL=i;var s="REPLACE_POLL";n.REPLACE_POLL=s;var u="UPDATE_POLL";function c(e){var t=!1;for(var n in e.choices){if(e.choices[n].selected){t=!0;break}}return Object.assign({},e,{posted_on:(0,a.default)(e.posted_on),hasSelectedChoices:t,endsOn:e.length?(0,a.default)(e.posted_on).add(e.length,"days"):null,isBusy:!1})}n.UPDATE_POLL=u},{moment:"moment"}],347:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.hydrate=function(e){return Object.assign({},e,{posted_on:(0,a.default)(e.posted_on),updated_on:(0,a.default)(e.updated_on),hidden_on:(0,a.default)(e.hidden_on),attachments:e.attachments?e.attachments.map(i):null,poster:e.poster?(0,o.hydrateUser)(e.poster):null,isSelected:!1,isBusy:!1,isDeleted:!1})},n.hydrateAttachment=i,n.patch=function(e,t){return{type:l,post:e,patch:t}},n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case l:return e.id==t.post.id?Object.assign({},e,t.patch):e;default:return e}},n.PATCH_POST=void 0;var r,a=(r=e("moment"))&&r.__esModule?r:{default:r},o=e("./users");var l="PATCH_POST";function i(e){return Object.assign({},e,{uploaded_on:(0,a.default)(e.uploaded_on)})}n.PATCH_POST=l},{"./users":358,moment:"moment"}],348:[function(e,t,n){"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(n,"__esModule",{value:!0}),n.select=function(e){return{type:c,post:e}},n.deselect=function(e){return{type:f,post:e}},n.deselectAll=function(){return{type:d}},n.hydrate=r,n.load=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return{type:p,state:t?e:r(e)}},n.append=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return{type:u,state:t?e:r(e)}},n.unload=function(){return{type:m}},n.update=function(e){return{type:h,update:e}},n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case c:var n=e.results.map(function(e){return e.id==t.post.id?Object.assign({},e,{isSelected:!0}):e});return Object.assign({},e,{results:n});case f:var r=e.results.map(function(e){return e.id==t.post.id?Object.assign({},e,{isSelected:!1}):e});return Object.assign({},e,{results:r});case d:var a=e.results.map(function(e){return Object.assign({},e,{isSelected:!1})});return Object.assign({},e,{results:a});case u:var o=e.results.slice(),l=e.results.map(function(e){return e.id});return t.state.results.map(function(e){-1===l.indexOf(e.id)&&o.push(e)}),Object.assign({},t.state,{results:o});case p:return t.state;case m:return Object.assign({},e,{isLoaded:!1});case h:return Object.assign({},e,t.update);case s.PATCH_POST:var i=e.results.map(function(e){return(0,s.default)(e,t)});return Object.assign({},e,{results:i});default:return e}},n.UPDATE_POSTS=n.UNLOAD_POSTS=n.LOAD_POSTS=n.DESELECT_POSTS=n.DESELECT_POST=n.SELECT_POST=n.APPEND_POSTS=void 0;var s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==l(e)&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e){var o;Object.prototype.hasOwnProperty.call(e,a)&&((o=r?Object.getOwnPropertyDescriptor(e,a):null)&&(o.get||o.set)?Object.defineProperty(n,a,o):n[a]=e[a])}n.default=e,t&&t.set(e,n);return n}(e("./post"));function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}var u="APPEND_POSTS";n.APPEND_POSTS=u;var c="SELECT_POST";n.SELECT_POST=c;var f="DESELECT_POST";n.DESELECT_POST=f;var d="DESELECT_POSTS";n.DESELECT_POSTS=d;var p="LOAD_POSTS";n.LOAD_POSTS=p;var m="UNLOAD_POSTS";n.UNLOAD_POSTS=m;var h="UPDATE_POSTS";function r(e){return Object.assign({},e,{results:e.results.map(s.hydrate),isLoaded:!0,isBusy:!1,isSelected:!1})}n.UPDATE_POSTS=h},{"./post":347}],349:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.load=function(e){return{type:r,newState:e}},n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case r:return t.newState;default:return e}},n.LOAD_DETAILS=void 0;var r="LOAD_DETAILS";n.LOAD_DETAILS=r},{}],350:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.hydrate=function(e){return{type:l,profile:e}},n.patch=function(e){return{type:i,patch:e}},n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case l:return Object.assign({},t.profile,{joined_on:(0,a.default)(t.profile.joined_on),status:(0,o.hydrateStatus)(t.profile.status)});case i:return Object.assign({},e,t.patch);case o.UPDATE_AVATAR:return e.id===t.userId?Object.assign({},e,{avatars:t.avatars}):e;case o.UPDATE_USERNAME:return e.id===t.userId?Object.assign({},e,{username:t.username,slug:t.slug}):e;default:return e}},n.PATCH_PROFILE=n.HYDRATE_PROFILE=void 0;var r,a=(r=e("moment"))&&r.__esModule?r:{default:r},o=e("./users");var l="HYDRATE_PROFILE";n.HYDRATE_PROFILE=l;var i="PATCH_PROFILE";n.PATCH_PROFILE=i},{"./users":358,moment:"moment"}],351:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.replace=function(e){return{type:r,state:{isLoading:!1,providers:e}}},n.update=function(e){return{type:a,update:e}},n.updateProvider=function(e){return{type:o,provider:e}},n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case r:return t.state;case a:return Object.assign({},e,t.update);case o:return Object.assign({},e,{providers:e.providers.map(function(e){return e.id===t.provider.id?t.provider:e})});default:return e}},n.initialState=n.UPDATE_SEARCH_PROVIDER=n.UPDATE_SEARCH=n.REPLACE_SEARCH=void 0;var r="REPLACE_SEARCH";n.REPLACE_SEARCH=r;var a="UPDATE_SEARCH";n.UPDATE_SEARCH=a;var o="UPDATE_SEARCH_PROVIDER";n.UPDATE_SEARCH_PROVIDER=o;n.initialState={isLoading:!1,query:"",providers:[]}},{}],352:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.all=function(e){return{type:a,items:e}},n.none=function(){return{type:o}},n.item=function(e){return{type:l,item:e}},n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case a:return t.items;case o:return[];case l:return(0,r.toggle)(e,t.item);default:return e}},n.SELECT_ITEM=n.SELECT_NONE=n.SELECT_ALL=void 0;var r=e("../utils/sets"),a="SELECT_ALL";n.SELECT_ALL=a;var o="SELECT_NONE";n.SELECT_NONE=o;var l="SELECT_ITEM";n.SELECT_ITEM=l},{"../utils/sets":385}],353:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.showSnackbar=function(e,t){return{type:a,message:e,messageType:t}},n.hideSnackbar=function(){return{type:o}},n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return t.type===a?{type:t.messageType,message:t.message,isVisible:!0}:t.type===o?Object.assign({},e,{isVisible:!1}):e},n.HIDE_SNACKBAR=n.SHOW_SNACKBAR=n.initialState=void 0;var r={type:"info",message:"",isVisible:!1};n.initialState=r;var a="SHOW_SNACKBAR";n.SHOW_SNACKBAR=a;var o="HIDE_SNACKBAR";n.HIDE_SNACKBAR=o},{}],354:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.hydrate=f,n.busy=function(){return{type:l}},n.release=function(){return{type:i}},n.replace=function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return{type:s,state:t?e:f(e)}},n.update=function(e){return{type:u,data:e}},n.updateAcl=function(e){return{type:c,data:e}},n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case l:return Object.assign({},e,{isBusy:!0});case i:return Object.assign({},e,{isBusy:!1});case o.REMOVE_POLL:return Object.assign({},e,{poll:null});case o.REPLACE_POLL:return Object.assign({},e,{poll:t.state});case s:return t.state;case u:return Object.assign({},e,t.data);case c:var n=Object.assign({},e.acl,t.data);return Object.assign({},e,{acl:n});default:return e}},n.UPDATE_THREAD_ACL=n.UPDATE_THREAD=n.REPLACE_THREAD=n.RELEASE_THREAD=n.BUSY_THREAD=void 0;var r,a=(r=e("moment"))&&r.__esModule?r:{default:r},o=e("./poll");var l="BUSY_THREAD";n.BUSY_THREAD=l;var i="RELEASE_THREAD";n.RELEASE_THREAD=i;var s="REPLACE_THREAD";n.REPLACE_THREAD=s;var u="UPDATE_THREAD";n.UPDATE_THREAD=u;var c="UPDATE_THREAD_ACL";function f(e){return Object.assign({},e,{started_on:(0,a.default)(e.started_on),last_post_on:(0,a.default)(e.last_post_on),best_answer_marked_on:e.best_answer_marked_on?(0,a.default)(e.best_answer_marked_on):null,isBusy:!1})}n.UPDATE_THREAD_ACL=c},{"./poll":346,moment:"moment"}],355:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.append=function(e,t){return{type:l,items:e,sorting:t}},n.deleteThread=function(e){return{type:i,thread:e}},n.filterThreads=function(e,t){return{type:s,category:e,categoriesMap:t}},n.hydrate=function(e){return{type:u,items:e}},n.patch=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return{type:c,thread:e,patch:t,sorting:n}},n.sort=function(e){return{type:f,sorting:e}},n.getThreadModerationOptions=p,n.hydrateThread=m,n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(n.type){case l:return(0,a.default)(n.items.map(m),e).sort(n.sorting);case i:return e.filter(function(e){return e.id!==n.thread.id});case s:return e.filter(function(e){var t=n.categoriesMap[e.category];return t.lft>=n.category.lft&&t.rght<=n.category.rght||2==e.weight});case u:return n.items.map(m);case c:var t=e.map(function(e){return e.id===n.thread.id?Object.assign({},e,n.patch):e});return n.sorting?t.sort(n.sorting):t;case f:return e.sort(n.sorting);default:return e}},n.MODERATION_PERMISSIONS=n.SORT_THREADS=n.PATCH_THREAD=n.HYDRATE_THREADS=n.FILTER_THREADS=n.DELETE_THREAD=n.APPEND_THREADS=void 0;var r=o(e("moment")),a=o(e("../utils/concat-unique"));function o(e){return e&&e.__esModule?e:{default:e}}var l="APPEND_THREADS";n.APPEND_THREADS=l;var i="DELETE_THREAD";n.DELETE_THREAD=i;var s="FILTER_THREADS";n.FILTER_THREADS=s;var u="HYDRATE_THREADS";n.HYDRATE_THREADS=u;var c="PATCH_THREAD";n.PATCH_THREAD=c;var f="SORT_THREADS";n.SORT_THREADS=f;var d=["can_announce","can_approve","can_close","can_hide","can_move","can_merge","can_pin","can_review"];function p(t){var n=[];return d.forEach(function(e){t[e]&&n.push(e)}),n}function m(e){return Object.assign({},e,{started_on:(0,r.default)(e.started_on),last_post_on:(0,r.default)(e.last_post_on),moderation:p(e.acl)})}n.MODERATION_PERMISSIONS=d},{"../utils/concat-unique":376,moment:"moment"}],356:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.doTick=function(){return{type:a}},n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:r;return(1<arguments.length&&void 0!==arguments[1]?arguments[1]:null).type===a?Object.assign({},e,{tick:e.tick+1}):e},n.TICK=n.initialState=void 0;var r={tick:0};n.initialState=r;var a="TICK";n.TICK=a},{}],357:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.addNameChange=function(e,t,n){return{type:i,change:e,user:t,changedBy:n}},n.append=function(e){return{type:s,items:e}},n.hydrate=function(e){return{type:u,items:e}},n.hydrateNamechange=c,n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case i:var n=e.slice();return n.unshift({id:Math.floor(Date.now()/1e3),changed_by:t.changedBy,changed_by_username:t.changedBy.username,changed_on:(0,r.default)(),new_username:t.change.username,old_username:t.user.username}),n;case s:return(0,o.default)(e,t.items.map(c));case u:return t.items.map(c);case a.UPDATE_AVATAR:return e.map(function(e){return(e=Object.assign({},e)).changed_by&&e.changed_by.id===t.userId&&(e.changed_by=Object.assign({},e.changed_by,{avatars:t.avatars})),e});case a.UPDATE_USERNAME:return e.map(function(e){return(e=Object.assign({},e)).changed_by&&e.changed_by.id===t.userId&&(e.changed_by=Object.assign({},e.changed_by,{username:t.username,slug:t.slug})),Object.assign({},e)});default:return e}},n.HYDRATE_HISTORY=n.APPEND_HISTORY=n.ADD_NAME_CHANGE=void 0;var r=l(e("moment")),a=e("./users"),o=l(e("../utils/concat-unique"));function l(e){return e&&e.__esModule?e:{default:e}}var i="ADD_NAME_CHANGE";n.ADD_NAME_CHANGE=i;var s="APPEND_HISTORY";n.APPEND_HISTORY=s;var u="HYDRATE_HISTORY";function c(e){return Object.assign({},e,{changed_on:(0,r.default)(e.changed_on)})}n.HYDRATE_HISTORY=u},{"../utils/concat-unique":376,"./users":358,moment:"moment"}],358:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.append=function(e){return{type:l,items:e}},n.hydrate=function(e){return{type:i,items:e}},n.hydrateStatus=c,n.hydrateUser=f,n.updateAvatar=function(e,t){return{type:s,userId:e.id,avatars:t}},n.updateUsername=function(e,t,n){return{type:u,userId:e.id,username:t,slug:n}},n.default=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;switch(t.type){case l:return(0,a.default)(e,t.items.map(f));case i:return t.items.map(f);case s:return e.map(function(e){return(e=Object.assign({},e)).id===t.userId&&(e.avatars=t.avatars),e});default:return e}},n.UPDATE_USERNAME=n.UPDATE_AVATAR=n.HYDRATE_USERS=n.APPEND_USERS=void 0;var r=o(e("moment")),a=o(e("../utils/concat-unique"));function o(e){return e&&e.__esModule?e:{default:e}}var l="APPEND_USERS";n.APPEND_USERS=l;var i="HYDRATE_USERS";n.HYDRATE_USERS=i;var s="UPDATE_AVATAR";n.UPDATE_AVATAR=s;var u="UPDATE_USERNAME";function c(e){return e?Object.assign({},e,{last_click:e.last_click?(0,r.default)(e.last_click):null,banned_until:e.banned_until?(0,r.default)(e.banned_until):null}):null}function f(e){return Object.assign({},e,{joined_on:(0,r.default)(e.joined_on),status:c(e.status)})}n.UPDATE_USERNAME=u},{"../utils/concat-unique":376,moment:"moment"}],359:[function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Ajax=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._cookieName=null,this._csrfToken=null,this._locks={}}var t,n,r;return t=e,(n=[{key:"init",value:function(e){this._cookieName=e}},{key:"getCsrfToken",value:function(){if(-1===document.cookie.indexOf(this._cookieName))return null;var e=new RegExp(this._cookieName+"=([^;]*)"),t=document.cookie.match(e)[0];return t?t.split("=")[1]:null}},{key:"request",value:function(r,a,o){var l=this;return new Promise(function(t,n){var e={url:a,method:r,headers:{"X-CSRFToken":l.getCsrfToken()},data:o?JSON.stringify(o):null,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){t(e)},error:function(e){var t=e.responseJSON||{};t.status=e.status,0===t.status&&(t.detail=gettext("Lost connection with application.")),404===t.status&&(t.detail&&"NOT FOUND"!==t.detail||(t.detail=gettext("Action link is invalid."))),500!==t.status||t.detail||(t.detail=gettext("Unknown error has occured.")),t.statusText=e.statusText,n(t)}};$.ajax(e)})}},{key:"get",value:function(o,e,l){if(e&&(o+="?"+$.param(e)),l){var i=this;return this._locks[l]&&(this._locks[l].url=o),this._locks[l]&&this._locks[l].waiter?{then:function(){}}:this._locks[l]&&this._locks[l].wait?(this._locks[l].waiter=!0,new Promise(function(r,a){window.setTimeout(function(){!function t(n){i._locks[l].wait?window.setTimeout(function(){t(n)},300):i._locks[l].url!==n?t(i._locks[l].url):(i._locks[l].waiter=!1,i.request("GET",i._locks[l].url).then(function(e){i._locks[l].url===n?r(e):(i._locks[l].waiter=!0,t(i._locks[l].url))},function(e){i._locks[l].url===n?a(e):(i._locks[l].waiter=!0,t(i._locks[l].url))}))}(o)},300)})):(this._locks[l]={url:o,wait:!0,waiter:!1},new Promise(function(t,n){i.request("GET",o).then(function(e){i._locks[l].wait=!1,i._locks[l].url===o&&t(e)},function(e){i._locks[l].wait=!1,i._locks[l].url===o&&n(e)})}))}return this.request("GET",o)}},{key:"post",value:function(e,t){return this.request("POST",e,t)}},{key:"patch",value:function(e,t){return this.request("PATCH",e,t)}},{key:"put",value:function(e,t){return this.request("PUT",e,t)}},{key:"delete",value:function(e,t){return this.request("DELETE",e,t)}},{key:"upload",value:function(r,a,o){var l=this;return new Promise(function(t,n){var e={url:r,method:"POST",headers:{"X-CSRFToken":l.getCsrfToken()},data:a,contentType:!1,processData:!1,xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",function(e){e.lengthComputable&&o(Math.round(e.loaded/e.total*100))},!1),e},success:function(e){t(e)},error:function(e){var t=e.responseJSON||{};t.status=e.status,0===t.status&&(t.detail=gettext("Lost connection with application.")),413!==t.status||t.detail||(t.detail=gettext("Upload was rejected by server as too large.")),404===t.status&&(t.detail&&"NOT FOUND"!==t.detail||(t.detail=gettext("Action link is invalid."))),500!==t.status||t.detail||(t.detail=gettext("Unknown error has occured.")),t.statusText=e.statusText,n(t)}};$.ajax(e)})}}])&&a(t.prototype,n),r&&a(t,r),e}(),o=new(n.Ajax=r);n.default=o},{}],360:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Auth=void 0;var a=e("../reducers/auth");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(e,t,n){this._store=e,this._local=t,this._modal=n,this.syncSession(),this.watchState()}},{key:"syncSession",value:function(){var e=this._store.getState().auth;e.isAuthenticated?this._local.set("auth",{isAuthenticated:!0,username:e.user.username}):this._local.set("auth",{isAuthenticated:!1})}},{key:"watchState",value:function(){var t=this,n=this._store.getState().auth;this._local.watch("auth",function(e){e.isAuthenticated?t._store.dispatch((0,a.signIn)({username:e.username})):n.isAuthenticated&&t._store.dispatch((0,a.signOut)())}),this._modal.hide()}},{key:"signIn",value:function(e){this._store.dispatch((0,a.signIn)(e)),this._local.set("auth",{isAuthenticated:!0,username:e.username}),this._modal.hide()}},{key:"signOut",value:function(){this._store.dispatch((0,a.signOut)()),this._local.set("auth",{isAuthenticated:!1}),this._modal.hide()}},{key:"softSignOut",value:function(){this._store.dispatch((0,a.signOut)(!0)),this._local.set("auth",{isAuthenticated:!1}),this._modal.hide()}}])&&o(t.prototype,n),r&&o(t,r),e}(),l=new(n.Auth=r);n.default=l},{"../reducers/auth":344}],361:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Captcha=n.ReCaptcha=n.ReCaptchaComponent=n.QACaptcha=n.NoCaptcha=n.BaseCaptcha=void 0;var r=o(e("react")),a=o(e("../components/form-group"));function o(e){return e&&e.__esModule?e:{default:e}}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(o){var l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t,n,r,a=c(o);return t=l?(e=c(this).constructor,Reflect.construct(a,arguments,e)):a.apply(this,arguments),n=this,!(r=t)||"object"!==i(r)&&"function"!=typeof r?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(n):r}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}var m=function(){function e(){f(this,e)}return p(e,[{key:"init",value:function(e,t,n,r){this._context=e,this._ajax=t,this._include=n,this._snackbar=r}}]),e}();n.BaseCaptcha=m;var h=function(){l(t,m);var e=u(t);function t(){return f(this,t),e.apply(this,arguments)}return p(t,[{key:"load",value:function(){return new Promise(function(e){e()})}},{key:"validator",value:function(){return null}},{key:"component",value:function(){return null}}]),t}();n.NoCaptcha=h;var y=function(){l(t,m);var e=u(t);function t(){return f(this,t),e.apply(this,arguments)}return p(t,[{key:"load",value:function(){var n=this;return new Promise(function(t,e){n._ajax.get(n._context.get("CAPTCHA_API")).then(function(e){n.question=e.question,n.helpText=e.help_text,t()},function(){n._snackbar.error(gettext("Failed to load CAPTCHA.")),e()})})}},{key:"validator",value:function(){return[]}},{key:"component",value:function(e){return r.default.createElement(a.default,{label:this.question,for:"id_captcha",labelClass:e.labelClass||"",controlClass:e.controlClass||"",validation:e.form.state.errors.captcha,helpText:this.helpText||null},r.default.createElement("input",{"aria-describedby":"id_captcha_status",className:"form-control",disabled:e.form.state.isLoading,id:"id_captcha",onChange:e.form.bindInput("captcha"),type:"text",value:e.form.state.captcha}))}}]),t}();n.QACaptcha=y;var b=function(){l(t,r.default.Component);var e=u(t);function t(){return f(this,t),e.apply(this,arguments)}return p(t,[{key:"componentDidMount",value:function(){var t=this;grecaptcha.render("recaptcha",{sitekey:this.props.siteKey,callback:function(e){t.props.binding({target:{value:e}})}})}},{key:"render",value:function(){return r.default.createElement("div",{id:"recaptcha"})}}]),t}();n.ReCaptchaComponent=b;var v=function(){l(t,m);var e=u(t);function t(){return f(this,t),e.apply(this,arguments)}return p(t,[{key:"load",value:function(){return this._include.include("https://www.google.com/recaptcha/api.js",!0),new Promise(function(t){!function e(){"undefined"==typeof grecaptcha?window.setTimeout(function(){e()},200):t()}()})}},{key:"validator",value:function(){return[]}},{key:"component",value:function(e){return r.default.createElement(a.default,{label:gettext("Please solve the quick test"),for:"id_captcha",labelClass:e.labelClass||"",controlClass:e.controlClass||"",validation:e.form.state.errors.captcha,helpText:gettext("This test helps us prevent automated spam registrations on our site.")},r.default.createElement(b,{binding:e.form.bindInput("captcha"),siteKey:this._context.get("SETTINGS").recaptcha_site_key}))}}]),t}();n.ReCaptcha=v;var g=function(){function e(){f(this,e)}return p(e,[{key:"init",value:function(e,t,n,r){switch(e.get("SETTINGS").captcha_type){case"no":this._captcha=new h;break;case"qa":this._captcha=new y;break;case"re":this._captcha=new v}this._captcha.init(e,t,n,r)}},{key:"load",value:function(){return this._captcha.load()}},{key:"validator",value:function(){return this._captcha.validator()}},{key:"component",value:function(e){return this._captcha.component(e)}}]),e}(),_=new(n.Captcha=g);n.default=_},{"../components/form-group":49,react:"react"}],362:[function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Include=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){this._staticUrl=e,this._included=[]}},{key:"include",value:function(e,t){var n=1<arguments.length&&void 0!==t&&t;-1===this._included.indexOf(e)&&(this._included.push(e),this._include(e,n))}},{key:"_include",value:function(e,t){$.ajax({url:(t?"":this._staticUrl)+e,cache:!0,dataType:"script"})}}])&&a(t.prototype,n),r&&a(t,r),e}(),o=new(n.Include=r);n.default=o},{}],363:[function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.LocalStorage=void 0;var o=window.localStorage,r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){var r=this;this._prefix=e,this._watchers=[],window.addEventListener("storage",function(t){var n=JSON.parse(t.newValue);r._watchers.forEach(function(e){e.key===t.key&&t.oldValue!==t.newValue&&e.callback(n)})})}},{key:"set",value:function(e,t){o.setItem(this._prefix+e,JSON.stringify(t))}},{key:"get",value:function(e){var t=o.getItem(this._prefix+e);return t?JSON.parse(t):null}},{key:"watch",value:function(e,t){this._watchers.push({key:this._prefix+e,callback:t})}}])&&a(t.prototype,n),r&&a(t,r),e}(),l=new(n.LocalStorage=r);n.default=l},{}],364:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=(r=e("marked"))&&r.__esModule?r:{default:r},o=e("./one-box");function l(e){a.default.setOptions({renderer:new a.default.Renderer,gfm:!0,tables:!1,breaks:!0,pedantic:!1,sanitize:!1,smartLists:!1,smartypants:!1});var t=new a.default.Renderer;return t.link=function(e,t,n){if(new RegExp("^.*(?:(?:youtu.be/|v/|vi/|u/w/|embed/)|(?:(?:watch)??v(?:i)?=|&v(?:i)?=))([^#&?]*).*").test(e)){var r=(0,o.parseYoutubeUrl)(e);if(r&&!1!==r.data){var a="https://www.youtube.com/embed/";return a+=r.video,a+="?rel=0",r.start&&(a+="&start="+r.start),'<div class="embed-responsive embed-responsive-16by9">'.concat('<iframe class="embed-responsive-item" src="'+a+'" allowfullscreen></iframe>',"</div>")}}return"<a href=".concat(e,"\n      title=").concat(t||e,"\n      target='_blank'\n      }>").concat(n,"</a>")},t.heading=function(e,t){return"<h".concat(t,'>\n    <span class="k-heading">').concat(e,"</span>\n  </h").concat(t,">")},(0,a.default)(e,{renderer:t})}n.default=l},{"./one-box":367,marked:2}],365:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.MobileNavbarDropdown=void 0;var r,a=(r=e("../utils/mount-component"))&&r.__esModule?r:{default:r};function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){this._element=e,this._component=null}},{key:"show",value:function(e){this._component===e?this.hide():(this._component=e,(0,a.default)(e,this._element.id),$(this._element).addClass("open"))}},{key:"showConnected",value:function(e,t){this._component===e?this.hide():(this._component=e,(0,a.default)(t,this._element.id,!0),$(this._element).addClass("open"))}},{key:"hide",value:function(){$(this._element).removeClass("open"),this._component=null}}])&&o(t.prototype,n),r&&o(t,r),e}(),i=new(n.MobileNavbarDropdown=l);n.default=i},{"../utils/mount-component":380}],366:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Modal=void 0;var a=r(e("react-dom")),o=r(e("../utils/mount-component"));function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){var t=this;this._element=e,this._modal=$(e).modal({show:!1}),this._modal.on("hidden.bs.modal",function(){a.default.unmountComponentAtNode(t._element)})}},{key:"show",value:function(e){(0,o.default)(e,this._element.id),this._modal.modal("show")}},{key:"hide",value:function(){this._modal.modal("hide")}}])&&l(t.prototype,n),r&&l(t,r),e}(),s=new(n.Modal=i);n.default=s},{"../utils/mount-component":380,"react-dom":"react-dom"}],367:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.parseYoutubeUrl=i,n.cleanUrl=s,n.getVideoIdFromUrl=u,n.default=n.OneBox=void 0;var a=new RegExp("^.*(?:(?:youtu.be/|v/|vi/|u/w/|embed/)|(?:(?:watch)??v(?:i)?=|&v(?:i)?=))([^#&?]*).*"),o=function(){function a(){var e,t,n,r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=function(e){e&&(r.highlightCode(e),r.embedYoutubePlayers(e))},(t="render")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,this._youtube={}}var e,t,n;return e=a,(t=[{key:"highlightCode",value:function(e){for(var t=e.querySelectorAll("pre>code"),n=0;n<t.length;n++){var r=t[n];hljs.highlightBlock(r)}}},{key:"embedYoutubePlayers",value:function(e){for(var t=e.querySelectorAll("p>a"),n=0;n<t.length;n++){var r=t[n],a=1===r.parentNode.childNodes.length;this._youtube[r.href]||(this._youtube[r.href]=i(r.href));var o=this._youtube[r.href];a&&o&&!1!==o.data&&this.swapYoutubePlayer(r,o)}}},{key:"swapYoutubePlayer",value:function(e,t){var n="https://www.youtube.com/embed/";n+=t.video,n+="?rel=0",t.start&&(n+="&start="+t.start);var r=$('<iframe class="embed-responsive-item" src="'+n+'" allowfullscreen></iframe>');$(e).replaceWith(r),r.wrap('<div class="embed-responsive embed-responsive-16by9"></div>')}}])&&r(e.prototype,t),n&&r(e,n),a}(),l=new(n.OneBox=o);function i(e){var t=s(e),n=u(t);if(!n)return null;var r,a,o=0;return 0<t.indexOf("?")&&((r=t.substr(t.indexOf("?")+1).split("&").filter(function(e){return"t="===e.substr(0,2)})[0])&&("s"===(a=r.substr(2).split("m"))[0].substr(-1)?o+=parseInt(a[0].substr(0,a[0].length-1)):(o+=60*parseInt(a[0]),a[1]&&"s"===a[1].substr(-1)&&(o+=parseInt(a[1].substr(0,a[1].length-1)))))),{start:o,video:n}}function s(e){var t=e;return"https://"===e.substr(0,8)?t=t.substr(8):"http://"===e.substr(0,7)&&(t=t.substr(7)),"www."===t.substr(0,4)&&(t=t.substr(4)),t}function u(e){if(-1===e.indexOf("youtu"))return null;var t=e.match(a);return t?t[1]:null}n.default=l},{}],368:[function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.PageTitle=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(e,t){this._indexTitle=e,this._forumName=t}},{key:"set",value:function(e){var t;e?("string"==typeof e&&(e={title:e}),t=e.title,1<e.page&&(t+=" ("+interpolate(gettext("page: %(page)s"),{page:e.page},!0)+")"),e.parent&&(t+=" | "+e.parent),document.title=t+" | "+this._forumName):document.title=this._indexTitle||this._forumName}}])&&a(t.prototype,n),r&&a(t,r),e}(),o=new(n.PageTitle=r);n.default=o},{}],369:[function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Polls=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(e,t){this._ajax=e,this._snackbar=t,this._polls={}}},{key:"start",value:function(t){var n=this;this.stop(t.poll);function r(){n._polls[t.poll]=t,n._ajax.get(t.url,t.data||null).then(function(e){n._polls[t.poll]._stopped||(t.update(e),n._polls[t.poll].timeout=window.setTimeout(r,t.frequency))},function(e){n._polls[t.poll]._stopped||(t.error?t.error(e):n._snackbar.apiError(e))})}t.delayed?this._polls[t.poll]={timeout:window.setTimeout(r,t.frequency)}:r()}},{key:"stop",value:function(e){this._polls[e]&&(window.clearTimeout(this._polls[e].timeout),this._polls[e]._stopped=!0)}}])&&a(t.prototype,n),r&&a(t,r),e}(),o=new(n.Polls=r);n.default=o},{}],370:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Posting=void 0;var r=a(e("react")),o=a(e("react-dom")),l=e("../components/poll"),i=a(e("../components/posting")),s=a(e("../utils/mount-component"));function a(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function a(){var e,t,n,r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),n=function(){r._isOpen&&!r._isClosing&&(r._isClosing=!0,r._placeholder.removeClass("slide-in"),window.setTimeout(function(){o.default.unmountComponentAtNode(document.getElementById("posting-mount")),r._isClosing=!1,r._isOpen=!1},300))},(t="close")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}var e,t,n;return e=a,(t=[{key:"init",value:function(e,t,n){this._ajax=e,this._snackbar=t,this._placeholder=$(n),this._mode=null,this._isOpen=!1,this._isClosing=!1}},{key:"open",value:function(e){var t;!1===this._isOpen?(this._mode=e.mode,this._isOpen=e.submit,this._realOpen(e)):this._isOpen!==e.submit?(t=gettext("You are already working on other message. Do you want to discard it?"),"POLL"==this._mode&&(t=gettext("You are already working on a poll. Do you want to discard it?")),confirm(t)&&(this._mode=e.mode,this._isOpen=e.submit,this._realOpen(e))):"REPLY"==this._mode&&"REPLY"==e.mode&&this._realOpen(e)}},{key:"_realOpen",value:function(e){"POLL"==e.mode?(0,s.default)(r.default.createElement(l.PollForm,e),"posting-mount"):(0,s.default)(r.default.createElement(i.default,e),"posting-mount"),this._placeholder.addClass("slide-in"),$("html, body").animate({scrollTop:this._placeholder.offset().top},1e3)}}])&&u(e.prototype,t),n&&u(e,n),a}(),f=new(n.Posting=c);n.default=f},{"../components/poll":100,"../components/posting":128,"../utils/mount-component":380,react:"react","react-dom":"react-dom"}],371:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Snackbar=void 0;var a=e("../reducers/snackbar");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){this._store=e,this._timeout=null}},{key:"alert",value:function(e,t){var n=this;this._timeout?(window.clearTimeout(this._timeout),this._store.dispatch((0,a.hideSnackbar)()),this._timeout=window.setTimeout(function(){n._timeout=null,n.alert(e,t)},300)):(this._store.dispatch((0,a.showSnackbar)(e,t)),this._timeout=window.setTimeout(function(){n._store.dispatch((0,a.hideSnackbar)()),n._timeout=null},5e3))}},{key:"info",value:function(e){this.alert(e,"info")}},{key:"success",value:function(e){this.alert(e,"success")}},{key:"warning",value:function(e){this.alert(e,"warning")}},{key:"error",value:function(e){this.alert(e,"error")}},{key:"apiError",value:function(e){var t=(t=e.detail)||(404===e.status?gettext("Action link is invalid."):gettext("Unknown error has occured."));403===e.status&&"Permission denied"===t&&(t=gettext("You don't have permission to perform this action.")),this.error(t)}}])&&o(t.prototype,n),r&&o(t,r),e}(),l=new(n.Snackbar=r);n.default=l},{"../reducers/snackbar":353}],372:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.StoreWrapper=void 0;var a=e("redux");function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._store=null,this._reducers={},this._initialState={}}var t,n,r;return t=e,(n=[{key:"addReducer",value:function(e,t,n){this._reducers[e]=t,this._initialState[e]=n}},{key:"init",value:function(){this._store=(0,a.createStore)((0,a.combineReducers)(this._reducers),this._initialState)}},{key:"getStore",value:function(){return this._store}},{key:"getState",value:function(){return this._store.getState()}},{key:"dispatch",value:function(e){return this._store.dispatch(e)}}])&&o(t.prototype,n),r&&o(t,r),e}(),l=new(n.StoreWrapper=r);n.default=l},{redux:"redux"}],373:[function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Zxcvbn=void 0;var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"init",value:function(e){this._include=e,this._isLoaded=!1}},{key:"scorePassword",value:function(e,t){return this._isLoaded?zxcvbn(e,t).score:0}},{key:"load",value:function(){return this._isLoaded?this._loadedPromise():(this._include.include("misago/js/zxcvbn.js"),this._loadingPromise())}},{key:"_loadingPromise",value:function(){var o=this;return new Promise(function(r,a){!function e(t){var n=0<arguments.length&&void 0!==t?t:0;200<(n+=1)?a():"undefined"==typeof zxcvbn?window.setTimeout(function(){e(n)},200):(o._isLoaded=!0,r())}()})}},{key:"_loadedPromise",value:function(){return new Promise(function(e){e()})}}])&&a(t.prototype,n),r&&a(t,r),e}(),o=new(n.Zxcvbn=r);n.default=o},{}],374:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){{var n;o.default.render(a.default.createElement(l.Provider,{store:u.default.getStore()},a.default.createElement(f,{message:e.message,expires:e.expires_on?(0,r.default)(e.expires_on):null})),document.getElementById("page-mount")),void 0!==t&&!t||(n=s.default.get("SETTINGS").forum_name,document.title=gettext("You are banned")+" | "+n,window.history.pushState({},"",s.default.get("BANNED_URL")))}};var r=c(e("moment")),a=c(e("react")),o=c(e("react-dom")),l=e("react-redux"),i=c(e("../components/banned-page")),s=c(e("./..")),u=c(e("../services/store"));function c(e){return e&&e.__esModule?e:{default:e}}var f=(0,l.connect)(function(e){return e.tick})(i.default)},{"../components/banned-page":9,"../services/store":372,"./..":296,moment:"moment",react:"react","react-dom":"react-dom","react-redux":"react-redux"}],375:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=[],a=[];if(e.forEach(function(e){a.push(e),a.length===t&&(r.push(a),a=[])}),!1!==n&&0<a.length&&a.length<t)for(var o=a.length;o<t;o++)a.push(n);a.length&&r.push(a);return r}},{}],376:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=[];return e.concat(t).filter(function(e){return-1===n.indexOf(e.id)&&(n.push(e.id),!0)})}},{}],377:[function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._callback=e,this._count=t}var e,t,r;return e=n,(t=[{key:"count",value:function(){--this._count,0===this._count&&this._callback()}}])&&a(e.prototype,t),r&&a(e,r),n}();n.default=r},{}],378:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return e.replace(/[&<>"']/g,function(e){return r[e]})};var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"}},{}],379:[function(e,t,n){"use strict";function r(e){return e.toFixed(1)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){return 1073741824<e?r(e/1073741824)+" GB":1048576<e?r(e/1048576)+" MB":1024<e?r(e/1024)+" KB":r(e)+" B"},n.roundSize=r},{}],380:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){var n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=document.getElementById(t),a=e.props?e:o.default.createElement(e,null);r&&(n?l.default.render(o.default.createElement(i.Provider,{store:s.default.getStore()},a),r):l.default.render(a,r))};var o=r(e("react")),l=r(e("react-dom")),i=e("react-redux"),s=r(e("../services/store"));function r(e){return e&&e.__esModule?e:{default:e}}},{"../services/store":372,react:"react","react-dom":"react-dom","react-redux":"react-redux"}],381:[function(e,t,n){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.isOrdered=!1,this._items=e||[]}var e,n,r;return e=t,(n=[{key:"add",value:function(e,t,n){this._items.push({key:e,item:t,after:n&&n.after||null,before:n&&n.before||null})}},{key:"get",value:function(e,t){for(var n=0;n<this._items.length;n++)if(this._items[n].key===e)return this._items[n].item;return t}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"values",value:function(){for(var e=[],t=0;t<this._items.length;t++)e.push(this._items[t].item);return e}},{key:"order",value:function(e){return this.isOrdered||(this._items=this._order(this._items),this.isOrdered=!0),e||void 0===e?this.values():this._items}},{key:"orderedValues",value:function(){return this.order(!0)}},{key:"_order",value:function(e){var t=[];e.forEach(function(e){t.push(e.key)});var n=[],r=[];function a(e){var t=-1;-1===r.indexOf(e.key)&&(e.after?-1!==(t=r.indexOf(e.after))&&(t+=1):e.before&&(t=r.indexOf(e.before)),-1!==t&&(n.splice(t,0,e),r.splice(t,0,e.key)))}e.forEach(function(e){e.after||e.before||(n.push(e),r.push(e.key))}),e.forEach(function(e){"_end"===e.before&&(n.push(e),r.push(e.key))});for(var o=200;0<o&&t.length!==r.length;)--o,e.forEach(a);return n}}])&&a(e.prototype,n),r&&a(e,r),t}();n.default=r},{}],382:[function(e,t,n){"use strict";function a(e,t){return Math.floor(Math.random()*(t-e+1))+e}Object.defineProperty(n,"__esModule",{value:!0}),n.int=a,n.range=function(e,t){for(var n=new Array(a(e,t)),r=0;r<n.length;r++)n[r]=r;return n}},{}],383:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){window.scrollTo(0,0)}},{}],384:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(n){var e={component:n.component||null,childRoutes:[]};n.root?e.childRoutes=[{path:n.root,onEnter:function(e,t){t(null,n.paths[0].path)}}].concat(n.paths):e.childRoutes=n.paths;a.default.render(r.default.createElement(o.Provider,{store:i.default.getStore()},r.default.createElement(l.Router,{routes:e,history:l.browserHistory})),u)};var r=s(e("react")),a=s(e("react-dom")),o=e("react-redux"),l=e("react-router"),i=s(e("../services/store"));function s(e){return e&&e.__esModule?e:{default:e}}var u=document.getElementById("page-mount")},{"../services/store":372,react:"react","react-dom":"react-dom","react-redux":"react-redux","react-router":"react-router"}],385:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.push=function(e,t){{if(-1!==e.indexOf(t))return e;var n=e.slice();return n.push(t),n}},n.remove=function(e,t){return 0<=e.indexOf(t)?e.filter(function(e){return e!==t}):e},n.toggle=function(e,t){{if(-1!==e.indexOf(t))return e.filter(function(e){return e!==t});var n=e.slice();return n.push(t),n}}},{}],386:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t){if(e=(e+"").toLowerCase(),(t=(t+"").toLowerCase()).length<=0)return 0;var n=0,r=0,a=t.length;for(;0<=(r=e.indexOf(t,r));)n+=1,r+=a;return n}},{}],387:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.required=o,n.requiredTermsOfService=function(e){var t=gettext("You have to accept the terms of service.");return o(e||t)},n.requiredPrivacyPolicy=function(e){var t=gettext("You have to accept the privacy policy.");return o(e||t)},n.email=function(t){return function(e){if(!r.test(e))return t||gettext("Enter a valid email address.")}},n.minLength=l,n.maxLength=i,n.usernameMinLength=function(e){return l(e,function(e){return ngettext("Username must be at least %(limit_value)s character long.","Username must be at least %(limit_value)s characters long.",e)})},n.usernameMaxLength=function(e){return i(e,function(e){return ngettext("Username cannot be longer than %(limit_value)s character.","Username cannot be longer than %(limit_value)s characters.",e)})},n.usernameContent=function(){return function(e){if(!a.test($.trim(e)))return gettext("Username can only contain latin alphabet letters and digits.")}},n.passwordMinLength=function(r){return function(e){var t=e.length;if(t<r){var n=ngettext("Valid password must be at least %(limit_value)s character long.","Valid password must be at least %(limit_value)s characters long.",r);return interpolate(n,{limit_value:r,show_value:t},!0)}}};var r=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,a=new RegExp("^[0-9a-z]+$","i");function o(t){return function(e){if(!1===e||null===e||0===$.trim(e).length)return t||gettext("This field is required.")}}function l(r,a){return function(e){var t="",n=$.trim(e).length;if(n<r)return t=a?a(r,n):ngettext("Ensure this value has at least %(limit_value)s character (it has %(show_value)s).","Ensure this value has at least %(limit_value)s characters (it has %(show_value)s).",r),interpolate(t,{limit_value:r,show_value:n},!0)}}function i(r,a){return function(e){var t="",n=$.trim(e).length;if(r<n)return t=a?a(r,n):ngettext("Ensure this value has at most %(limit_value)s character (it has %(show_value)s).","Ensure this value has at most %(limit_value)s characters (it has %(show_value)s).",r),interpolate(t,{limit_value:r,show_value:n},!0)}}},{}]},{},[296,297,298,299,300,317,318,319,320,321,322,323,324,340,341,342,343,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339]);
//# sourceMappingURL=misago.js.map
